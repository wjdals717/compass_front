## **ğŸ“œ ëª©ì°¨**

ğŸ† [í”„ë¡œì íŠ¸ ì†Œê°œ](#-í”„ë¡œì íŠ¸-ì†Œê°œ)

ğŸ‘¨â€ğŸ’» [ì°¸ì—¬ì](#-ì°¸ì—¬ì)

ğŸ›  [ê°œë°œ ë„êµ¬](#-ê°œë°œ-ë„êµ¬)

â° [í”„ë¡œì íŠ¸ ì¼ì •](#-í”„ë¡œì íŠ¸-ì¼ì •)

ğŸ”— [APIëª…ì„¸ì„œì™€ ERDì„¤ê³„ë„](#-apiëª…ì„¸ì„œì™€-erdì„¤ê³„ë„)
  
ğŸ“ [ë©”ë‰´êµ¬ì¡°ë„](#-ë©”ë‰´-êµ¬ì¡°ë„)
  
ğŸ–¥ [í™”ë©´ êµ¬í˜„ ë° ì½”ë“œ ë¦¬ë·°](#-í™”ë©´-êµ¬í˜„-ë°-ì½”ë“œ-ë¦¬ë·°)
  - [íšŒì›ê°€ì… ë° ë¡œê·¸ì¸](#íšŒì›ê°€ì…-ë°-ë¡œê·¸ì¸)
  - [í™ˆ / í•™ì›ì°¾ê¸°](#í™ˆ--í•™ì›ì°¾ê¸°)
  - [í•™ì› ë“±ë¡](#í•™ì›-ë“±ë¡)
  - [í•™ì› ìƒì„¸í˜ì´ì§€](#í•™ì›-ìƒì„¸í˜ì´ì§€)
  - [í•™ìƒ ë§ˆì´í˜ì´ì§€](#í•™ìƒ-ë§ˆì´í˜ì´ì§€)
  - [í•™ì› ê´€ë¦¬ì ë§ˆì´í˜ì´ì§€](#í•™ì›-ê´€ë¦¬ì-ë§ˆì´í˜ì´ì§€)
  - [ì›¹ ê´€ë¦¬ì ë§ˆì´í˜ì´ì§€](#ì›¹-ê´€ë¦¬ì-ë§ˆì´í˜ì´ì§€)
   
âœ [ëŠë‚€ì ](#-ëŠë‚€ì )

<br/>

## **ğŸ† í”„ë¡œì íŠ¸ ì†Œê°œ**

- í”„ë¡œì íŠ¸ ì œëª©
  - í•™ìŠµ ë‚˜ì¹¨ë°˜ : í•™ì› ì •ë³´ ì œê³µ ì›¹ ì‚¬ì´íŠ¸

- í”„ë¡œì íŠ¸ ëª©ì 
  - í•™ì›ì„ ì•Œì•„ë³´ëŠ” ì‚¬ëŒë“¤ì´ ì§€ì—­, ê³¼ëª©, ìˆ˜ì¤€ ë“± ë‹¤ì–‘í•œ ìš”ê±´ì„ ê¸°ë°˜ìœ¼ë¡œ í•™ì›ì„ ê²€ìƒ‰í•˜ì—¬ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ìˆë„ë¡ í•˜ëŠ” í”Œë«í¼ì„ ì œê³µ

- ì œì‘ ê¸°ê°„
  - 2023.10.25 ~ 2023.11.29

- ì£¼ìš” ê¸°ëŠ¥
  - íšŒì›ê°€ì… ë° ë¡œê·¸ì¸
  - ë‹¤ì–‘í•œ ê²€ìƒ‰ ì˜µì…˜ ì œê³µ
  - í•™ì› ìƒì„¸ ì •ë³´ ì œê³µ
  - ê´€ì‹¬í•™ì› ë“±ë¡
  - í•™ì› ë“±ë¡ ë° ì •ë³´ìˆ˜ì • ê¸°ëŠ¥
  - ê´‘ê³  ê¸°ëŠ¥
  - ë¦¬ë·° ì‘ì„±, ìˆ˜ì •, ì‚­ì œ
  - ë¬¸ì˜ ì‘ì„± ë° ë‹µë³€

<br/>

## **ğŸ‘¨â€ğŸ’» ì°¸ì—¬ì**

<br/>

> **íŒ€ì¥: ë³€ì •ë¯¼** 
- ì£¼ìš” ì¼ì • ì¡°ìœ¨ ë° íŒ€ì› ê´€ë¦¬
- ERD ì‘ì„± ë° DB ì„¤ê³„
- ë“±ë¡ í˜ì´ì§€
    - í•™ì› ë“±ë¡ DBì €ì¥(firebase ì´ìš©)
    - firebase ì—…ë¡œë“œì‹œ interrupt í•´ê²°: í”„ë¡œê·¸ë ˆìŠ¤ë°” ì¶”ê°€ ë° ë‹¤ìŒ ì—…ë¡œë“œ ì°¨ë‹¨
- ìƒì„¸ í˜ì´ì§€
    - ê° DBì—ì„œ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°(í•™ì›DB, í•™ì›ì •ë³´DB, í¸ì˜ì‚¬í•­ DB, ìˆ˜ê°•ì—°ë ¹DB, ìˆ˜ì—…ì •ë³´DB)
    - í›„ê¸° ë³„ì  ê¸°ëŠ¥(í•™ì› í›„ê¸° ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°, í›„ê¸° ì‘ì„±, ìˆ˜ì •, ì‚­ì œ)
    - í•™ì› ê´€ë¦¬ìëŠ” ë³¸ì¸ í•™ì›ì— ë¦¬ë·° ì‘ì„± ì°¨ë‹¨ 
- í•™ìƒ ë§ˆì´í˜ì´ì§€(ì‘ì„±í•œ í›„ê¸°)
    - í›„ê¸° ë³„ì  ê¸°ëŠ¥(ë³¸ì¸ì´ ì‘ì„±í•œ í›„ê¸° ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°, í›„ê¸° ìˆ˜ì •, ì‚­ì œ)
<br/>

> **íŒ€ì›: ì •ê°€ì˜**
- ë¼ìš°íŠ¸ ì„¤ì •
- OAuth2ë¡œê·¸ì¸, íšŒì›ê°€ì… ê¸°ëŠ¥
- ê°œì¸ ì •ë³´ ìˆ˜ì •
- ì´ë©”ì¼ ì¸ì¦
- ê´€ë¦¬ì ë§ˆì´í˜ì´ì§€: í•™ì› ìŠ¹ì¸ ê¸°ëŠ¥
- í•™ì› ê´€ë¦¬ì ë§ˆì´í˜ì´ì§€ 
    - í•™ì› ì‹ ì²­ ëª©ë¡(ìŠ¹ì¸ ëŒ€ê¸°, ìŠ¹ì¸ ê±°ì ˆ í•™ì› í™•ì¸), 
    - ë‚˜ì˜ í•™ì›(í•™ì› ìƒì„¸ ì •ë³´ ìˆ˜ì •)
- ì „ì²´ Security ë³´ì•ˆ, Jwt í† í°
<br/>

> **íŒ€ì›: ê¹€ì±„ì›** 
- ERD ì‘ì„± ë° DB ì„¤ê³„
- í™ˆ: í•„í„°ë§ ë§¤ê°œë³€ìˆ˜ ì „ë‹¬
- í•™ì› ì°¾ê¸° í˜ì´ì§€
    - í•™ì› í•„í„°ë§(ì§€ì—­, ë¶„ì•¼, ì´ë¦„, í¸ì˜ì‹œì„¤, ìˆ˜ê°•ì—°ë ¹)
    - í•„í„°ë§ ëª¨ë‹¬(ì§€ì—­, ì¹´í…Œê³ ë¦¬)
- ë¬¸ì˜ êµ¬í˜„
    - í•™ìƒ: ë¬¸ì˜ ì‘ì„± ë° ë‹µë³€ í™•ì¸
    - í•™ì› ê´€ë¦¬ì: ë¬¸ì˜ ì‘ì„± ë° ë‹µë³€ í™•ì¸/ë¬¸ì˜ ë‹µë³€
<br/>

> **íŒ€ì›: ì´ì§€ìš°**
- ë¼ìš°íŠ¸ ì„¤ì •
- ì¹´ì¹´ì˜¤í˜ì´ ê²°ì œ ê¸°ëŠ¥
- í•™ìƒ, í•™ì›ê´€ë¦¬ì ì¢‹ì•„ìš” ê¸°ëŠ¥CRUD
- roleId ê°’ì˜ ë”°ë¼ mypage ë°”ê¾¸ê¸°
- ìœ íš¨í•œ ê´‘ê³  ëª©ë¡
- ë¦¬ë‹¤ì´ë ‰ì…˜
- í›„ê¸° ì‘ì„± ê¶Œí•œ ê´€ë¦¬

<br/>

## **ğŸ›  ê°œë°œ ë„êµ¬**

### FrontEnd

<img src="https://img.shields.io/badge/Visual Studio Code-007ACC?style=for-the-badge&logo=Visual Studio Code&logoColor=white"/> <img src="https://img.shields.io/badge/html5-E34F26?style=for-the-badge&logo=html5&logoColor=white"> 
<img src="https://img.shields.io/badge/css-1572B6?style=for-the-badge&logo=css3&logoColor=white"> 
<img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black"> 
<img src="https://img.shields.io/badge/react-61DAFB?style=for-the-badge&logo=react&logoColor=black"> 

### BackEnd

<img src="https://img.shields.io/badge/Java-ED8B00?style=for-the-badge&logo=openjdk&logoColor=white"> <img src="https://img.shields.io/badge/springboot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white"> <img src="https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white"> <img src="https://img.shields.io/badge/Amazon_AWS-232F3E?style=for-the-badge&logo=amazon-aws&logoColor=white">

### í˜•ìƒ ê´€ë¦¬
<img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white"> <img src="https://img.shields.io/badge/GIT-E44C30?style=for-the-badge&logo=git&logoColor=white">

<br/>

## **â° í”„ë¡œì íŠ¸ ì¼ì •**
![í”„ë¡œì íŠ¸_ì¼ì •](https://github.com/KoreaIt-J-23-2-2/compass_front/assets/137966126/ec7e9d78-4394-4041-8e00-5279012a3ff0)
<br/>

## **ğŸ”— APIëª…ì„¸ì„œì™€ ERDì„¤ê³„ë„**

### APIëª…ì„¸ì„œ
https://www.notion.so/bc3babdfb67544f3a07ad13bd6ce9a2a?v=30e68966d92344eca0545ce9f63ecf2b
### ERDì„¤ê³„ë„
![compass_ERD](https://github.com/KoreaIt-J-23-2-2/compass_front/assets/137966126/21049342-b7a5-442f-bb81-29f020218ae5)
<br/>

## **ğŸ“ ë©”ë‰´ êµ¬ì¡°ë„**
![ë©”ë‰´êµ¬ì¡°ë„ drawio](https://github.com/KoreaIt-J-23-2-2/compass_front/assets/137966126/0cf6550d-9b1d-4dfc-bf4a-00d20212c1cc)
<br/>

## **ğŸ–¥ í™”ë©´ êµ¬í˜„ ë° ì½”ë“œ ë¦¬ë·°**


### **íšŒì›ê°€ì… ë° ë¡œê·¸ì¸**
<details>
<summary>ë¡œê·¸ì¸ ìœ íš¨ì„± ê²€ì‚¬ ë° ì˜ˆì™¸ ì²˜ë¦¬ ì˜ìƒ ê·¸ ì™¸ í† í° ë¶€ì—¬ ë° ê¶Œí•œ ì½”ë“œ ë¦¬ë·°</summary>

![íšŒì›ê°€ì… ë° ë¡œê·¸ì¸](https://github.com/KoreaIt-J-23-2-2/compass_front/assets/137989664/9d67bee5-eb25-4dd6-910d-f4e482bd4098)

<div markdown="1">

## **OAuth2 ë¡œê·¸ì¸**
  
### **Front End**
  
**html ì½”ë“œ**

```html
    <div css={S.SLoginBox}>
        <img src={MainLogo} alt="" css={S.SMainLogo}/>
        <div css={S.SkakaoLoginBtn}><img css={S.SKakaoBtn} src={kakaologin} onClick= {handleKaKaoLogin} /></div>
        <div css={S.SNaverLoginBtn}><img css={S.SNaverBtn} src={naverlogin} onClick= {handleNaverLogin} /></div>
    </div>
```

</br>

- ë„¤ì´ë²„, ì¹´ì¹´ì˜¤ ì•„ì´ì½˜ì„ í´ë¦­ì‹œ í•´ë‹¹ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸


</br>

**ë¡œê·¸ì¸**

```javascript
    const handleKaKaoLogin = () => {
        window.location.href = "http://localhost:8080/oauth2/authorization/kakao";
    }

    const handleNaverLogin = () => {
        window.location.href = "http://localhost:8080/oauth2/authorization/naver";
    }
```
- window.location.hrefë¥¼ í†µí•´ ë¸Œë¼ìš°ì €ì˜ í˜„ì¬ ìœ„ì¹˜ë¥¼ í•´ë‹¹ ì£¼ì†Œë¡œ ë³€ê²½, ì´ URLì€ ê°ê° ì¹´ì¹´ì˜¤, ë„¤ì´ë²„ ë¡œê·¸ì¸ì„ ì²˜ë¦¬í•˜ëŠ” ì„œë²„ ì—”ë“œí¬ì¸íŠ¸ë¡œ ì´ë™


<br/>

---

### **Back End**

**application.yml**

```html
spring:
  profiles.include:
    - secret
  security:
    oauth2:
      client:
        registration:
          kakao:
            clientId: 2dc5c2ec61e5efeb6b952c1b5d381821
            redirectUri: http://localhost:8080/login/oauth2/code/kakao
            authorizationGrantType: authorization_code
            clientAuthenticationMethod: POST
            clientName: Kakao
          naver:
            clientId: i4eW_RUc74M3Ci96bJuG
            redirectUri: http://localhost:8080/login/oauth2/code/naver
            authorizationGrantType: authorization_code
            clientAuthenticationMethod: POST
            clientName: Naver
        provider:
          kakao:
            authorizationUri: https://kauth.kakao.com/oauth/authorize
            tokenUri: https://kauth.kakao.com/oauth/token
            userInfoUri: https://kapi.kakao.com/v2/user/me
            userNameAttribute: id
          naver:
            authorizationUri: https://nid.naver.com/oauth2.0/authorize
            tokenUri: https://nid.naver.com/oauth2.0/token
            userInfoUri: https://openapi.naver.com/v1/nid/me
            userNameAttribute: response
```

- ì¹´ì¹´ì˜¤, ë„¤ì´ë²„ì— ëŒ€í•œ OAuth 2.0 í´ë¼ì´ì–¸íŠ¸ ì •ë³´ë¥¼ ì •ì˜

<br/>

**application-secret.yml**
```html
  security:
    oauth2:
      client:
        registration:
          naver:
            clientSecret:
```

- clientSecret í‚¤ëŠ” ìœ ì¶œì‹œ ë³´ì•ˆìƒì˜ ìœ„í—˜ì´ ìˆê¸° ë•Œë¬¸ì— application-secretì— ë”°ë¡œ ìˆ¨ê¹€

<br/>


**SecurityConfig(ì›¹ ë³´ì•ˆ ì„¤ì •)**


```java
@EnableWebSecurity
@Configuration
@RequiredArgsConstructor
public class SecurityConfig extends WebSecurityConfigurerAdapter {

    private final OAuth2SuccessHandler oAuth2SuccessHandler;
    private final JwtAuthenticationFilter jwtAuthenticationFilter;
    private final PrincipalEntryPoint principalEntryPoint;
    private final PrincipalUserDetailsService principalUserDetailsService;

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http.cors();            // WebMvcConfigì˜ CORS ì„¤ì •ì„ ì ìš©
        http.csrf().disable();  // CSRF ë³´í˜¸ ë¹„í™œì„±í™”
        http.authorizeRequests()
                .antMatchers("/api/auth/**", "/api/option/**",
                        "/api/academies", "/api/academy/**",
                        "/api/review/**", "/api/purchase/**", "/api/academy/check/**",
                        "/api/ad/academies/random")
                .permitAll()
                .anyRequest()
                .authenticated()
                .and()
                .addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class)
                .exceptionHandling()
                .authenticationEntryPoint(principalEntryPoint)
                .and()
                .oauth2Login()
                .successHandler(oAuth2SuccessHandler)
                .userInfoEndpoint()
                .userService(principalUserDetailsService);
    }
}
```

- OAuth 2.0ì„ ì´ìš©í•œ ì†Œì…œ ë¡œê·¸ì¸ ë° JWT(JSON Web Token) ê¸°ë°˜ì˜ ì¸ì¦ì— ê´€ë ¨ëœ ë³´ì•ˆ ì„¤ì •
- JwtAuthenticationFilter : jwt ì¸ì¦ ê´€ë ¨ í•„í„°
- OAuth2SuccessHandlerì—ì„œ OAuth2Loginì´ ì„±ê³µí–ˆì„ ë•Œì˜ ë¡œì§ì„ ì²˜ë¦¬(ë§ˆì§€ë§‰ì— ì‹¤í–‰ë¨)
- PrincipalUserDetailsService : ì‚¬ìš©ì ì •ë³´ë¥¼ ë¡œë“œí•˜ì—¬ OAuth2Userë¥¼ return í•˜ëŠ” í´ë˜ìŠ¤

<br/>

**PrincipalUserDetailsService**

``` java
@Service
public class PrincipalUserDetailsService implements OAuth2UserService {

    @Override
    public OAuth2User loadUser(OAuth2UserRequest userRequest) throws OAuth2AuthenticationException {
        OAuth2UserService<OAuth2UserRequest, OAuth2User> oAuth2UserService = new DefaultOAuth2UserService();    // ì‚¬ìš©ì ì •ë³´ ë¡œë“œí•˜ê¸° ìœ„í•œ ì„œë¹„ìŠ¤ ìƒì„±
        OAuth2User oAuth2User = oAuth2UserService.loadUser(userRequest);    // ì‚¬ìš©ì ì •ë³´ ë¡œë“œ

        Map<String, Object> attributes = oAuth2User.getAttributes();    // ì‚¬ìš©ì ì •ë³´ì—ì„œ ì†ì„± ì–»ì–´ì˜´.

        String provider = userRequest.getClientRegistration().getClientName();  // Naver, Kakao ë“± provider ì´ë¦„
        Map<String, Object> response = null;
        switch (provider) {
            case "Naver":
                response = (Map<String, Object>) attributes.get("response");    // ì†ì„±ì—ì„œ response ë¶€ë¶„ êº¼ëƒ„(id, email, name ë“±ì˜ ì‹¤ì§ˆì  ì‚¬ìš©ì ë°ì´í„°)
                break;
            case "Kakao":
                response = (Map<String, Object>) attributes.get("properties");
                response.put("id", attributes.get("id"));
                break;
        }
        response.put("provider", provider); // provider ì†ì„±ì„ ì¶”ê°€í•´ì¤Œ.
        return new DefaultOAuth2User(new ArrayList<>(), response, "id");
    }
}
```
- OAuth2 ìš”ì²­ì„ ë°›ì•„ ì‚¬ìš©ì ì •ë³´ë¥¼ ë¡œë“œí•´ì„œ providerì— ë”°ë¥¸ êµ¬ì¡°ëŒ€ë¡œ í•„ìš”í•œ ì •ë³´ë¥¼ response Mapì— ë‹´ì•„ì¤€ë‹¤.


<br/>

**OAuth2SuccessHandler**

``` java
@Component
@RequiredArgsConstructor
public class OAuth2SuccessHandler implements AuthenticationSuccessHandler {

    private final AuthMapper authMapper;
    private final JwtProvider jwtProvider;

    @Override
    public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException, ServletException {
        String oauth2Id = authentication.getName(); // PrincipalUserDetailsServiceì˜ loadUserì—ì„œ return í–ˆë˜ DefaultOAuth2Userì˜ keyê°’
        User user = authMapper.findUserByOauth2Id(oauth2Id);

        if (user == null) { // ì†Œì…œ ë¡œê·¸ì¸ ë¼ìˆëŠ” ìœ ì €ê°€ ì—†ë‹¤ë©´ -> ìƒˆë¡œ íšŒì›ê°€ì…
            DefaultOAuth2User defaultOAuth2User = (DefaultOAuth2User) authentication.getPrincipal();
            String provider = defaultOAuth2User.getAttributes().get("provider").toString();

            // íšŒì›ê°€ì…ì´ ì•ˆ ë˜ì—ˆì„ ë•Œ OAuth2 ê³„ì • íšŒì›ê°€ì… í˜ì´ì§€ë¡œ ì´ë™
            response.sendRedirect("http://localhost:3000/auth/detail/signup" +
                    "?oauth2Id=" + oauth2Id +
                    "&provider=" + provider);
            return;
        }
        // ì†Œì…œ ë¡œê·¸ì¸ ë¼ìˆëŠ” ìœ ì €ê°€ ìˆë‹¤ë©´ -> ë¡œê·¸ì¸
        PrincipalUser principalUser = new PrincipalUser(user);
        UsernamePasswordAuthenticationToken authenticationToken
                = new UsernamePasswordAuthenticationToken(principalUser, null, principalUser.getAuthorities());
        String accessToken = jwtProvider.generateToken(authenticationToken);
        response.sendRedirect("http://localhost:3000/auth/oauth2/signin" +  // clientë¡œ tokenì„ ë³´ë‚¸ë‹¤
                "?token=" + URLEncoder.encode(accessToken));
    }
}
```
- DBì—ì„œ ìš”ì²­ì„ ë³´ë‚¸ ìœ ì €ì˜ oauth2Idê°€ ìˆëŠ”ì§€ í™•ì¸
- ì†Œì…œ ë¡œê·¸ì¸ ë¼ìˆëŠ” ìœ ì €ê°€ ì—†ë‹¤ë©´ íšŒì›ê°€ì… í˜ì´ì§€ë¡œ redirectë¥¼ ë³´ë‚¸ë‹¤.
- ì†Œì…œ ë¡œê·¸ì¸ ë¼ìˆëŠ” ìœ ì €ê°€ ìˆë‹¤ë©´ í† í°ì„ ë‹´ì•„ í´ë¼ì´ì–¸íŠ¸ë¡œ redirectë¥¼ ë³´ë‚¸ë‹¤.

<br/>

---

### **Front End**

**SigninOauth2**

``` javascript
function SigninOauth2(props) {  // /auth/oauth2/signin
    // ì„œë²„ë¡œë¶€í„° redirectioní•´ì„œ ë“¤ì–´ì˜¨ tokenì„ localStorageì— ì €ì¥í•˜ëŠ” ê³¼ì •
    const [ searchParams, setSearchParams ] = useSearchParams();
    const queryClient = useQueryClient();

    localStorage.setItem("accessToken", "Bearer " + searchParams.get("token"));
    queryClient.refetchQueries(["getPrincipal"]);

    return <Navigate to={"/"} />
}
```
- ë°±ì—”ë“œì—ì„œ OAuth2Id ìœ ì €ê°€ ìˆì„ ì‹œì— redirect ë˜ëŠ” ê²½ë¡œ íŒŒì¼
- localStorageì— accessTokenì„ ì €ì¥í•´ë‘”ë‹¤.

<br/>

---

<br/>

## **íšŒì›ê°€ì…**

### **FrontEnd**


**html ì½”ë“œ**
``` html
<div css={S.SContainer}>
    <h1 css={S.STitle}>íšŒì›ê°€ì…</h1>
    <h2 css={S.STitle2}>í•„ìš”í•œ ì •ë³´ë“¤ì„ ê¸°ì…í•´ì£¼ì„¸ìš”.</h2>

    <div css={S.SInputBox}>
        <div css={S.SInuptCompartment}>
            <div><input type="email" name="email" placeholder='ì´ë©”ì¼' onChange={handleInputChange}/></div>
            <div><input type="text" name="name" placeholder='ì´ë¦„' onChange={handleInputChange}/></div>
            <div><input type="text" name="nickname" placeholder='ë‹‰ë„¤ì„' onChange={handleInputChange}/></div>
    <div><input type="text" name="phone" placeholder='ì „í™”ë²ˆí˜¸' onChange={handleInputChange}/></div>
        </div>
   </div>

    <div css={S.SSigninBtnBox}>
        <div css={S.SSigninTitle}>
            <span>ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”?</span>
        </div>
        <button css={S.SSigninBtn} onClick={handleSigninOnClick}>ë¡œê·¸ì¸</button>
    </div>
    <div css={S.SSignupBtnBox}>
        <button css={S.SSignupBtn} onClick={handleSignupSubmit}>ê°€ì…í•˜ê¸°</button>
    </div>
</div>
```
- íšŒì›ê°€ì…ì‹œ í•„ìš”í•œ íšŒì› ì •ë³´ë¥¼ ë” ê¸°ì…


<br/>

**íšŒì›ê°€ì…**

``` javascript
    const [ searchParams, setSearchParams ] = useSearchParams();
    const navigate = useNavigate();

    const [ signupUser, setSignupUser ] = useState({
        email: "",
        oauth2Id: searchParams.get("oauth2Id"),
        name: "",
        nickname: "",
        phone: "",
        provider: searchParams.get("provider")
    });

    const handleSigninOnClick = () => {
        navigate("/auth/signin")
    }

    const handleInputChange = (e) => {
        setSignupUser({
            ...signupUser,
            [e.target.name]: e.target.value
        })
    }

    const handleSignupSubmit = async () => {
        try {
            const response = await instance.post("/auth/signup", signupUser);
            alert("íšŒì›ê°€ì… ì™„ë£Œ");
            window.location.replace("/auth/signin");
        } catch (error) {
            console.error(error);
            if(Object.keys(error.response.data).includes("email")) {
                alert("ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ì´ë©”ì¼ì…ë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”.");
            } else if(Object.keys(error.response.data).includes("nickname")) {
                alert("ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ë‹‰ë„¤ì„ì…ë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”.");
            }
        }
    }
```
- íšŒì›ê°€ì… ë²„íŠ¼ í´ë¦­ì‹œ handleSignupSubmit í•¨ìˆ˜ ì‹¤í–‰, /auth/signupìœ¼ë¡œ post ìš”ì²­

<br/>

---

### **Back End**

**AuthController**
``` java
    @ValidAop
    @PostMapping("/api/auth/signup")
    public ResponseEntity<?> signup(
            @Valid @RequestBody SignupReqDto signupReqDto,
            BindingResult bindingResult) {
        return ResponseEntity.ok(authService.signup(signupReqDto));
    }
```
- ValidAopë¡œ ìœ íš¨ì„± ê²€ì‚¬

**AuthService**
``` java
    public boolean signup(SignupReqDto signupReqDto) {
        User user = signupReqDto.toUser();
        int errorCode = authMapper.checkDuplicate(user);
        if(errorCode > 0) {
            responseDuplicateError(errorCode);
        }
        return authMapper.saveUser(user) > 0;
    }

    public void responseDuplicateError(int errorCode) {
        Map<String, String> errorMap = new HashMap<>();
        switch (errorCode) {
            case 1:
                errorMap.put("email", "ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ì´ë©”ì¼ì…ë‹ˆë‹¤.");
                break;
            case 2:
                errorMap.put("nickname", "ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ë‹‰ë„¤ì„ì…ë‹ˆë‹¤.");
                break;
            case 3:
                errorMap.put("email", "ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ì´ë©”ì¼ì…ë‹ˆë‹¤.");
                errorMap.put("nickname", "ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ë‹‰ë„¤ì„ì…ë‹ˆë‹¤.");
                break;
        }
        throw new DuplicateException(errorMap);
    }
```
- responseDuplicateErrorë¡œ ë‹‰ë„¤ì„, ì´ë©”ì¼ ì¤‘ë³µ ê²€ì‚¬
- ì—ëŸ¬ ì½”ë“œê°€ 0ì´ë©´ ì •ìƒ íšŒì›ê°€ì…

<br/>

**auth_mapper**
``` xml
<insert id="saveUser">
        insert into user_tb
        values(
            0,
            #{email},
            #{oauth2Id},
            #{name},
            #{nickname},
            #{phone},
            #{provider},
            0,
            1
        )
    </insert>
    <select id="checkDuplicate"
            parameterType="com.aws.compass.entity.User"
            resultType="java.lang.Integer">
        select
            (select
                if(count(*) > 0, 1, 0)
            from
                user_tb
            where
                email = #{email}
            )
            + (select
                if(count(*) > 0, 2, 0)
            from
                user_tb
            where
                nickname = #{nickname}
            ) as result
    </select>
```
- user_tb DBì— íšŒì› ì •ë³´ ì €ì¥ (enabled: 0(ì´ë©”ì¼ ë¯¸ì¸ì¦), role: 1(í•™ìƒ))
- email, nickname ì¤‘ë³µ ê²€ì‚¬(0: ì¤‘ë³µx, 1: ì´ë©”ì¼ ì¤‘ë³µ, 2: ë‹‰ë„¤ì„ ì¤‘ë³µ, 3: ë‘˜ ë‹¤ ì¤‘ë³µ)


</div>
</details>

<br/>



### **í™ˆ / í•™ì›ì°¾ê¸°**

<details>
<summary>ëª¨ë‹¬ ì½”ë“œ ë¦¬ë·°</summary>
<div markdown="1">

## FrontEnd

ê°ê° ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì™€ í˜ì´ì§€ì—ì„œ ì„ íƒí•œ ì¡°ê±´ë“¤ì„ í•™ì› ì°¾ê¸° í˜ì´ì§€ì—ì„œ ëª¨ì•„ í•„í„°ë§í•˜ê¸° ë•Œë¬¸ì— storeí´ë”ì—ì„œ atomìœ¼ë¡œ ì¡°ê±´ë“¤ì— ëŒ€í•œ ìƒíƒœë¥¼ ê´€ë¦¬í•œë‹¤.

```javascript
import { atom } from 'recoil';

// ì§€ì—­
export const selectedLocationState = atom({
    key: 'selectedLocationState',
    default: {
        atpt_ofcdc_sc_code: "",
        si_do_name:"",
        admst_zone_nm: ""
    }
});

// ì¹´í…Œê³ ë¦¬(ë¶„ì•¼)
export const selectedCategoryState = atom({
    key: 'selectedCategoryState',
    default: {
        realm_sc_nm: "",
        le_crse_nm: ""
    }
});

// í•™ì› ì´ë¦„
export const selectedContentState = atom({
    key: 'selectedContentState',
    default: ""
});

// ìˆ˜ê°• ì—°ë ¹
export const selectedAgeState = atom({
    key: 'selectedAgeState',
    default: []
});

// ì‹œì„¤ ë° í¸ì˜ì‚¬í•­
export const selectedConvenienceState = atom({
    key: 'selectedConvenienceState',
    default: []
});
```
### LocationModal

```javascript
const [selectedLocation, setSelectedLocation] = useRecoilState(selectedLocationState); // ì„ íƒëœ êµìœ¡ì²­, í–‰ì •êµ¬ì—­ ì •ë³´
const [ educationOfficeOptions, setEducationOfficeOptions ] = useState([]); // êµìœ¡ì²­ ëª©ë¡
const [ educationOfficeOption, setEducationOfficeOption ] = useState(selectedLocation.atpt_ofcdc_sc_code); // ì„ íƒëœ êµìœ¡ì²­
const [ siDoName, setSiDoName ] = useState(selectedLocation.si_do_name);  // ì„ íƒëœ êµìœ¡ì²­ì—ì„œ 'êµìœ¡ì²­'ë¶€ë¶„ì„ ë•Œë‚¸ë‹¤
const [ administrativeDistrictOptions, setAdministrativeDistrictOptions ] = useState([]); // í–‰ì •êµ¬ì—­ ëª©ë¡
const [ administrativeDistrictOption, setAdministrativeDistrictOption ] = useState(selectedLocation.admst_zone_nm); // ì„ íƒëœ í–‰ì •êµ¬ì—­

// educationOfficeOptionì´ ì„ íƒë˜ì—ˆê±°ë‚˜ administrativeDistrictOptionì´ ì¡´ì¬í•˜ëŠ” ê²½ìš°ì—ë§Œ districtOptionShowë¥¼ trueë¡œ ì„¤ì •
const isDistrictOptionShow = !!educationOfficeOption || !!administrativeDistrictOption;

// educationOfficeOptionê³¼ ì¼ì¹˜í•˜ëŠ” administrativeDistrictOptions í•„í„°ë§
const filteredAdministrativeDistrictOptions = administrativeDistrictOptions.filter(option => {
    return option.educationOfficeCode === educationOfficeOption;
});

<ReactModal isOpen={modalIsOpen} onRequestClose={closeModal} css={S.SLayout}>
    <div css={S.STitle}>ì§€ì—­ ì„ íƒ</div>
    <div css={S.SListContainer}>
        <ul css={S.SEducationOfficeList}>
            {educationOfficeOptions.map((option) => (
                <li key={option.value} onClick={() => {
                    setEducationOfficeOption(option.value);
                    setAdministrativeDistrictOption("");
                    setSiDoName(option.label);
                    }}
                    css={[
                        S.SEducationOfficeListItem, // ê¸°ì¡´ ìŠ¤íƒ€ì¼ì„ í¬í•¨
                        option.value === educationOfficeOption && S.SCategoryListItemSelected // ì„ íƒëœ li
                    ]}
                >
                    {option.label}
                </li>
            ))}
        </ul>
        <ul css={S.SDistrictOptionList(isDistrictOptionShow)}>    // districtOptionShowê°€ trueì¼ ë•Œ ë³´ì¸ë‹¤.
            {filteredAdministrativeDistrictOptions.map((option) => (
                <li key={option.administrativeDistrictId} 
                    onClick={() => {setAdministrativeDistrictOption(option.administrativeDistrictName)}}
                    css={[
                        S.SDistrictOptionListItem, // ê¸°ì¡´ ìŠ¤íƒ€ì¼ì„ í¬í•¨
                        option.administrativeDistrictName === administrativeDistrictOption && S.SDistrictOptionListItemSelected // ì„ íƒëœ liì— ëŒ€í•œ ìŠ¤íƒ€ì¼
                    ]}
                >
                    {option.administrativeDistrictName}
                </li>
            ))}
        </ul>
    </div>
    <div css={S.ButtonContainer}>
        <button onClick={handleResetButton} css={GS.SButton}>ì´ˆê¸°í™”</button>
        <button onClick={closeModal} css={GS.SButton}>ì„ íƒ</button>
    </div>
</ReactModal>
```

### CategoryModal

```javascript
const [ selectedCategory, setSelectedCategory ] = useRecoilState(selectedCategoryState); // ì„ íƒëœ ì¹´í…Œê³ ë¦¬, ìƒì„¸ ì¹´í…Œê³ ë¦¬ ì •ë³´  
const [ categoryOptions, setCategoryOptions ] = useState([]); // ì¹´í…Œê³ ë¦¬ ëª©ë¡
const [ categoryOption, setCategoryOption ] = useState(selectedCategory.realm_sc_nm); // ì„ íƒëœ ì¹´í…Œê³ ë¦¬
const [ categoryDetailOptions, setCategoryDetailOptions ] = useState([]); // ìƒì„¸ ì¹´í…Œê³ ë¦¬ ëª©ë¡
const [ categoryDetailOption, setCategoryDetailOption ] = useState(selectedCategory.le_crse_nm); // ì„ íƒëœ ìƒì„¸ ì¹´í…Œê³ ë¦¬

// educationOfficeOptionì´ ì„ íƒë˜ì—ˆê±°ë‚˜ administrativeDistrictOptionì´ ì¡´ì¬í•˜ëŠ” ê²½ìš°ì—ë§Œ districtOptionShowë¥¼ trueë¡œ ì„¤ì •
const isDetailOptionShow = !!categoryOption || !!categoryDetailOption;

// categoryOption ì¼ì¹˜í•˜ëŠ” categoryDetailOptions í•„í„°ë§
const filteredCategoryDetailOptions = categoryDetailOptions.filter(option => {
    return option.categoryValue === categoryOption;
});

<ReactModal isOpen={modalIsOpen} onRequestClose={closeModal} css={S.SLayout}>
    <div css={S.STitle}>ì¹´í…Œê³ ë¦¬ ì„ íƒ</div>
    <div css={S.SListContainer}>
        <ul css={S.SCategoryList}>
        {categoryOptions.map((option) => (
            <li
            key={option.value}
            onClick={() => {
                setCategoryOption(option.value);
                setCategoryDetailOption("");
            }}
            css={[
                S.SCategoryListItem, // ê¸°ì¡´ ìŠ¤íƒ€ì¼ì„ í¬í•¨
                option.value === categoryOption && S.SCategoryListItemSelected, // ì„ íƒëœ liì— ëŒ€í•œ ìŠ¤íƒ€ì¼
            ]}
            >
            {option.label}
            </li>
        ))}
        </ul>
        <ul css={S.SCategoryDetailList(isDetailOptionShow)}>    // districtOptionShowê°€ trueì¼ ë•Œ ë³´ì¸ë‹¤. 
        {filteredCategoryDetailOptions.map((option) => (
            <li
            key={option.categoryDetailValue}
            onClick={() => {
                setCategoryDetailOption(option.categoryDetailValue);
            }}
            css={[
                S.SCategoryDetailListItem, // ê¸°ì¡´ ìŠ¤íƒ€ì¼ì„ í¬í•¨
                option.categoryDetailValue === categoryDetailOption &&
                S.SCategoryDetailListItemSelected, // ì„ íƒëœ liì— ëŒ€í•œ ìŠ¤íƒ€ì¼
            ]}
            >
            {option.categoryDetailName}
            </li>
        ))}
        </ul>
    </div>
    <div css={S.ButtonContainer}>
        <button onClick={handleResetButton} css={GS.SButton}>
        ì´ˆê¸°í™”
        </button>
        <button onClick={closeModal} css={GS.SButton}>
        ì„ íƒ
        </button>
    </div>
</ReactModal>;
```
***

</br>

- ì…ë ¥ ë°›ì€ ê°’ ì²˜ë¦¬


### Location
```javascript
// ì„ íƒ ë²„íŠ¼
const closeModal = () => {
    // ì§€ì—­ ê²€ìƒ‰ ì •ë³´
    setSelectedLocation({
        ...selectedLocation,
        atpt_ofcdc_sc_code: educationOfficeOption,
        si_do_name: siDoName,
        admst_zone_nm: administrativeDistrictOption
    })
    setModalIsOpen(false);
    enableBodyScroll();
};

// ì´ˆê¸°í™”
const handleResetButton = () => {
    setEducationOfficeOption("");
    setAdministrativeDistrictOption("");
    setSelectedLocation({
        atpt_ofcdc_sc_code: "",
        si_do_name: "",
        admst_zone_nm: ""
    })
}
```

### Category
```javascript
// ì„ íƒ ë²„íŠ¼
const closeModal = () => {
    // apië¡œ ë„˜ê¸¸ ì¹´í…Œê³ ë¦¬ ê²€ìƒ‰ ì •ë³´
    setSelectedCategory({
        ...selectedCategory,
        realm_sc_nm: categoryOption,
        le_crse_nm: categoryDetailOption
    })
    setModalIsOpen(false);
    enableBodyScroll();
};

// ì´ˆê¸°í™”
const handleResetButton = () => {
    setCategoryOption("");
    setCategoryDetailOption("");
    setSelectedCategory({
        realm_sc_nm: "",
        category_nm: "",
        le_crse_nm: ""
    });
}
```

***

</br>

- ìš”ì²­


### LocationModal

```javascript

// êµìœ¡ì²­ ëª©ë¡ ìš”ì²­
const educationOfficeOptionsState = useQuery(["educationOfficeOptionsState"], async () => {
    try {
        return await instance.get("/option/education-offices");
    }catch(error) {
        console.error(error);
    }
},
{
    retry: 0,
    refetchOnWindowFocus: false,
    onSuccess: response => {
        setEducationOfficeOptions(response.data.map(option => {
            const label = option.educationOfficeName.substring(0, option.educationOfficeName.length - 3);
            return {value: option.educationOfficeCode, label: label};
        }));
    }
});

// í–‰ì •êµ¬ì—­ ëª©ë¡ ìš”ì²­
const getAdministrativeDistrictOptionsState = useQuery(["getAdministrativeDistrictOptionsState"], async () => {
    try {
        return await instance.get("/option/administrative-districts");
    } catch (error) {
        console.error(error);
    }
},{
    retry: 0,
    refetchOnWindowFocus: false,
    onSuccess: response => {
        setAdministrativeDistrictOptions(response.data);
    }
});

```

### CategoryModal

``` javascript

// ë¶„ì•¼ëª… ëª©ë¡ ìš”ì²­
const categoryOptionsState = useQuery(["categoryOptionsState"], async () => {
    try {
        return await instance.get("/option/categories");
    }catch(error) {
        console.error(error);
    }
},
{
    retry: 0,
    refetchOnWindowFocus: false,
    onSuccess: response => {
        setCategoryOptions(response.data.map(option => {
            return { value: option.categoryValue, label: option.categoryName }
        }))
    }
});

// êµìŠµê³¼ì •ëª… ëª©ë¡ ìš”ì²­
const categoryDetailOptionsState = useQuery(["categoryDetailOptionsState"], async () => {
    try {
        return await instance.get("/option/category-details");
    }catch(error) {
        console.error(error);
    }
},
{
    retry: 0,
    refetchOnWindowFocus: false,
    onSuccess: response => {
        setCategoryDetailOptions(response.data);
    }
});

```

***

## BackEnd

### OptionsController
```java
public class OptionsController {

    private final OptionService optionService;

    // êµìœ¡ì²­ ì „ì²´ ë¶ˆëŸ¬ì˜¤ê¸°
    @GetMapping("/education-offices")
    public ResponseEntity<?> getEducationOffices() {
        return ResponseEntity.ok(optionService.getEducationOfficeList());
    }

    // í–‰ì •êµ¬ì—­ ì „ì²´ ë¶ˆëŸ¬ì˜¤ê¸°
    @GetMapping("/administrative-districts")
    public ResponseEntity<?> getAdministrativeDistrict() {
        return  ResponseEntity.ok(optionService.getAdministrativeDistrictList());
    }

    // ë¶„ì•¼ëª… ì „ì²´ ë¶ˆëŸ¬ì˜¤ê¸°
    @GetMapping("/categories")
    public ResponseEntity<?> getCategories() {
        return  ResponseEntity.ok(optionService.getCategoryList());
    }

    // êµìŠµ ê³¼ì • ëª©ë¡ëª… ì „ì²´ ë¶ˆëŸ¬ì˜¤ê¸°
    @GetMapping("/category-details")
    public ResponseEntity<?> getCategoryDetails() {
        return  ResponseEntity.ok(optionService.getCategoryDetailList());
    }
}
```

ëª©ë¡ ì „ì²´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” GETìš”ì²­

### OptionService

```java
public class OptionService {
    private final OptionMapper optionMapper;

    public List<EducationOfficeRespDto> getEducationOfficeList() {
        List<EducationOfficeRespDto> educationOfficeRespDtos = new ArrayList<>();
        optionMapper.getEducationOfficeList().forEach(educationOffice -> educationOfficeRespDtos.add(educationOffice.toEducationOfficeDto()));
        return educationOfficeRespDtos;
    }

    public  List<AdministrativeDistrictRespDto> getAdministrativeDistrictList() {
        List<AdministrativeDistrictRespDto> administrativeDistrictRespDtos = new ArrayList<>();
        optionMapper.getAdministrativeDistrictList().forEach(administrativeDistrict -> administrativeDistrictRespDtos.add(administrativeDistrict.toAdministrativeDistrictDto()));
        return administrativeDistrictRespDtos;
    }

    public List<CategoryRespDto> getCategoryList() {
        List<CategoryRespDto> categoryRespDtos = new ArrayList<>();
        optionMapper.getCategoryList().forEach(category -> categoryRespDtos.add(category.toCategoryDto()));
        return categoryRespDtos;
    }

    public List<CategoryDetailRespDto> getCategoryDetailList() {
        List<CategoryDetailRespDto> categoryDetailRespDtos = new ArrayList<>();
        optionMapper.getCategoryDetailList().forEach(categoryDetail -> categoryDetailRespDtos.add(categoryDetail.toCategoryDetailDto()));
        return categoryDetailRespDtos;
    }
}
```

### repository - OptionMapper
```java
@Mapper
public interface OptionMapper {
    public List<EducationOffice> getEducationOfficeList();
    public List<AdministrativeDistrict> getAdministrativeDistrictList();
    public List<Category> getCategoryList();
    public List<CategoryDetail> getCategoryDetailList();
}
```

### option_mapper

```xml
<mapper namespace="com.aws.compass.repository.OptionMapper">

    <resultMap id="educationOfficeMap" type="com.aws.compass.entity.EducationOffice">
        <id property="educationOfficeId" column="education_office_id" />
        <result property="educationOfficeName" column="education_office_name" />
        <result property="educationOfficeCode" column="education_office_code" />
    </resultMap>
    <resultMap id="administrativeDistrictMap" type="com.aws.compass.entity.AdministrativeDistrict">
        <id property="administrativeDistrictId" column="administrative_district_id" />
        <result property="educationOfficeCode" column="education_office_code" />
        <result property="administrativeDistrictName" column="administrative_district_name" />
    </resultMap>
    <resultMap id="categoryMap" type="com.aws.compass.entity.Category">
        <id property="categoryId" column="category_id" />
        <result property="categoryValue" column="category_value" />
        <result property="categoryName" column="category_name" />
    </resultMap>
    <resultMap id="categoryDetailMap" type="com.aws.compass.entity.CategoryDetail">
        <id property="categoryDetailId" column="category_detail_id" />
        <result property="categoryValue" column="category_value" />
        <result property="categoryDetailValue" column="category_detail_value" />
        <result property="categoryDetailName" column="category_detail_name" />
    </resultMap>

    <select id="getEducationOfficeList" resultMap="educationOfficeMap">
        select
            education_office_id,
            education_office_name,
            education_office_code
        from
            education_office_tb
    </select>

    <select id="getAdministrativeDistrictList" resultMap="administrativeDistrictMap">
        select
            administrative_district_id,
            education_office_code,
            administrative_district_name
        from
            administrative_district_tb
    </select>

    <select id="getCategoryList" resultMap="categoryMap">
        select
            category_id,
            category_value,
            category_name
        from
            category_tb
    </select>

    <select id="getCategoryDetailList" resultMap="categoryDetailMap">
        select
            category_detail_id,
            category_value,
            category_detail_value,
            category_detail_name
        from
            category_detail_tb
    </select>
</mapper>
```
</div>
</details>


<details>
<summary>í™ˆ ì½”ë“œ ë¦¬ë·°</summary>
<div markdown="1">


## FrontEnd

```javascript
const navigate = useNavigate();

const [ selectedLocation, setSelectedLocation ] = useRecoilState(selectedLocationState); // ì§€ì—­
const [ selectedCategory, setSelectedCategory ] = useRecoilState(selectedCategoryState); // ì¹´í…Œê³ ë¦¬
const [ selectedContent, setSelectedContent ] = useRecoilState(selectedContentState); // í•™ì› ì´ë¦„

const [ modalIsOpen, setModalIsOpen ] = useState(false);
const [ categoryModalIsOpen, setCategoryModalIsOpen ] = useState(false);

// ëª¨ë‹¬ì´ ì—´ë¦´ ë•Œ ìŠ¤í¬ë¡¤ ë§‰ê¸°
const disableBodyScroll = () => {
    document.body.style.overflow = 'hidden';
}

// ëª¨ë‹¬ì´ ë‹«í ë•Œ ìŠ¤í¬ë¡¤ ë³µì›
const enableBodyScroll = () => {
    document.body.style.overflow = 'auto';
}

const openLocationModal = () => {
    setModalIsOpen(true);
    disableBodyScroll();
};

const openCategoryModal = () => {
    setCategoryModalIsOpen(true);
    disableBodyScroll();
};

const handleInputOnChange = (e) => {
    setSelectedContent(e.target.value);
}

const handleSearch = () => {
    navigate("academy/find/1");
}

<>
    <div css={S.SMainLayout}>
        <div css={S.SMainContainer}>
            <div css={S.STextContainer}>
                <h1><b>í•™ìŠµ ë‚˜ì¹¨ë°˜</b>ì—ì„œ</h1>
                <h1>ì‰½ê³  ë¹ ë¥´ê²Œ <b>ì›í•˜ëŠ” í•™ì›ì„ ì°¾ì•„ë³´ì„¸ìš”.</b></h1>
            </div>
            <div css={S.SImgBox}>
                <img  css={S.SImgBox} src={HomeImg} alt="" />
            </div>
        </div>
    </div>
    <RootContainer>
        <div css={S.SSearchContainer}>
            <div css={S.SInputBox}>
                <input type="text" placeholder='í•™ì›ëª…, ì§€ì—­, ê³¼ëª©ìœ¼ë¡œ ê²€ìƒ‰í•´ë³´ì„¸ìš”' onChange={handleInputOnChange}/>
            </div>
            <div onClick={openLocationModal}>
                <SelectModalBtn>
                    {selectedLocation.atpt_ofcdc_sc_code
                        ? `${selectedLocation.si_do_name} ${selectedLocation.admst_zone_nm}`
                        : "ì§€ì—­ ì„ íƒ"
                    }   
                </SelectModalBtn>
            </div>
            <div onClick={openCategoryModal}>
                <SelectModalBtn>
                    {selectedCategory.realm_sc_nm
                        ? `${selectedCategory.category_nm} ${selectedCategory.le_crse_nm}`
                        : "ì¹´í…Œê³ ë¦¬ ì„ íƒ"
                    }
                </SelectModalBtn>
            </div>
            <SearchBtn onClick={handleSearch}/>
        </div>
        <div css={S.SLinkContainer}>
            <div css={S.SRegistContainer}>
                <div css={S.SImgCover}>
                    <img css={S.SImg} src={teacher} alt="" />
                </div>
                <div css={S.SCommentContainer}>
                    <div css={S.SRegistTitle}>í•™ì› ê´€ë¦¬ì ë“±ë¡í•˜ê¸°</div>
                    <div css={S.SRegistComment}>í•™ì› ë‚˜ì¹¨ë°˜ì— ë“±ë¡í•´ì„œ ë‚˜ì˜ í•™ì›ì„ í™ë³´í•´ë³´ì„¸ìš”!</div>
                    <LinkBtn link={"/academy/regist"} btn={"ë“±ë¡í•˜ê¸°"}/>
                </div>
            </div>
            <div css={S.SRegistContainer}>
                <div css={S.SImgCover}>
                    <img css={S.SImg} src={student} alt="" />
                </div>
                <div css={S.SCommentContainer}>
                    <div css={S.SRegistTitle}>ë‚˜ì˜ ê´€ì‹¬ í•™ì› ë³´ê¸°</div>
                    <div css={S.SRegistComment}>ê´€ì‹¬ìˆëŠ” í•™ì›ì— í•˜íŠ¸ë¥¼ ëˆ„ë¥´ê³  í•œ ë²ˆì— ë³¼ ìˆ˜ ìˆì–´ìš”!</div>
                    <LinkBtn link={"/account/mypage/like/1"} btn={"ë³´ëŸ¬ê°€ê¸°"} />
                </div>
            </div>
        </div>
        <LocationModal modalIsOpen={modalIsOpen} 
            setModalIsOpen={setModalIsOpen} 
            enableBodyScroll={enableBodyScroll}
            setSelectedLocation={setSelectedLocation}/>
        <CategoryModal modalIsOpen={categoryModalIsOpen} 
            setModalIsOpen={setCategoryModalIsOpen} 
            enableBodyScroll={enableBodyScroll}
            setSelectedCategory={setSelectedCategory}/>
    </RootContainer>
</>

```

- ëª¨ë‹¬ì„ ì—´ì–´ ì„ íƒ ì‹œ atomìœ¼ë¡œ ì „ì—­ì— ì¡°ê±´ ì €ì¥ > í•™ì› ì°¾ê¸° í˜ì´ì§€ ëœë”ë§ ì‹œ ì „ì—­ì— ì €ì¥ëœ ì¡°ê±´ì— ë§ëŠ” í•™ì› ëª©ë¡ í‘œì‹œ
- ë¡œê·¸ì¸ í•˜ì§€ ì•Šê³  LinkBtn í´ë¦­ ì‹œ alertì°½ 'ë¡œê·¸ì¸ í›„ ì´ìš©í•´ì£¼ì„¸ìš”' í‘œì‹œ í›„ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
- í—¤ë”ì˜ ë„¤ë¹„ê²Œì´ì…˜ë°”ë¡œ ì´ë™ ì‹œ ì „ì—­ ìƒíƒœ ì´ˆê¸°í™”


</br>

</div>
</details>


<details>
<summary>ìƒì„¸ ê²€ìƒ‰ ì½”ë“œ ë¦¬ë·°</summary>
<div markdown="1">

## FrontEnd
ì§€ì—­, ì¹´í…Œê³ ë¦¬ì™€ ë§ˆì°¬ê°€ì§€ë¡œ storeí´ë”ì˜ searchOptionsì—ì„œ atomìœ¼ë¡œ ì¡°ê±´ë“¤ì— ëŒ€í•œ ìƒíƒœë¥¼ ê´€ë¦¬í•œë‹¤.

```javascript
import { atom } from 'recoil';

export const selectedAgeState = atom({
    key: 'selectedAgeState',
    default: []
});

export const selectedConvenienceState = atom({
    key: 'selectedConvenienceState',
    default: []
});
```


### FindAcademiesSidebar

```javascript
const [ selectedAgeOptions, setSelectedAgeOptions ] = useRecoilState(selectedAgeState);
const [ selectedConvenienceOptions, setSelectedConvenienceOptions ] = useRecoilState(selectedConvenienceState);

const reset = () => {
    setSelectedAgeOptions([]);
    setSelectedConvenienceOptions([]);
}

<div css={S.FilterLayout}>
    <div css={S.InitialContainer}>
        <h2>ìƒì„¸ ê²€ìƒ‰</h2>
        <button onClick={reset}>í•„í„° ì´ˆê¸°í™”</button>
    </div>
    <AgeOptions />
    <ConvenienceOptions />
</div>
```
ìˆ˜ê°• ì—°ë ¹ê³¼ ì‹œì„¤ ë° í¸ì˜ì‚¬í•­ì„ ì´ˆê¸°í™” í•  ìˆ˜ ìˆëŠ” ë²„íŠ¼ì„  AgeOptionsì™€ ConvenienceOptionsì˜ ì „ì—­ ìƒíƒœì— ë‘ì–´ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œí•¨

### AgeOptions
```javascript
const [ ageOptions, setAgeOptions ] = useState([]);
const [ selectedAgeOptions, setSelectedAgeOptions ] = useRecoilState(selectedAgeState);

<div css={S.FilterContainer}>
    <h3>ìˆ˜ê°• ì—°ë ¹</h3>
    {ageOptions?.map((option) => (
        <div key={option.value}>
            <input
                type="checkbox"
                checked={selectedAgeOptions.includes(option.value)}
                onChange={() => handleCheckboxChange(option.value)}
            />
            {option.label}
        </div>
    ))}
</div>
);
```
### ConvenienceOptions 
```javascript
const [ convenienceOptions, setConvenienceOptions ] = useState([]);
const [ selectedConvenienceOptions, setSelectedConvenienceOptions ] = useRecoilState(selectedConvenienceState);

<div css={S.FilterContainer}>
    <h3>ì‹œì„¤ ë° í¸ì˜ì‚¬í•­</h3>
    {convenienceOptions?.map((option) => (
        <div key={option.value}>
            <input
                type="checkbox"
                checked={selectedConvenienceOptions.includes(option.value)}
                onChange={() => handleCheckboxChange(option.value)}
            />
            {option.label}
        </div>
    ))}
</div>
```

***

- ì…ë ¥ë°›ì€ ê°’ ì²˜ë¦¬

### AgeOptions
```javascript
// ì„ íƒëœ ConvenienceOptionì˜ valueê°’ì„ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ ë˜ëŠ” ì œê±°
const handleCheckboxChange = (value) => {
    setSelectedAgeOptions((prevOptions) => {
        const updatedList = prevOptions.includes(value)
            ? prevOptions.filter(option => option !== value)
            : [...prevOptions, value];

        return updatedList;  // ìˆ˜ì •ëœ ë°°ì—´ì„ ì§ì ‘ ë°˜í™˜
    });
};
```

### ConvenienceOptions 
```javascript
// ì„ íƒëœ ConvenienceOptionì˜ valueê°’ì„ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ ë˜ëŠ” ì œê±°
const handleCheckboxChange = (value) => {
    setSelectedConvenienceOptions((prevOptions) => {
        const updatedList = prevOptions.includes(value)
            ? prevOptions.filter(option => option !== value)
            : [...prevOptions, value];

        return updatedList;  // ìˆ˜ì •ëœ ë°°ì—´ì„ ì§ì ‘ ë°˜í™˜
    });
};
```

***
- ìš”ì²­

### AgeOptions
```javascript
// ìˆ˜ê°• ì—°ë ¹ ëª©ë¡  
const ageOptionsState = useQuery(["ageOptionsState"], async () => {
    try {
        return await instance.get("/option/ages");
    }catch(error) {
        console.error(error);
    }
},
{
    retry: 0,
    refetchOnWindowFocus: false,
    onSuccess: response => {
        setAgeOptions(response.data.map(option => {
            return { value: option.ageId, label: option.ageRange }
        }))
    }
});
```

### ConvenienceOptions 
```javascript
// ì‹œì„¤ ë° í¸ì˜ì‚¬í•­ ëª©ë¡
const convenienceOptionsState = useQuery(["convenienceOptionsState"], async () => {
    try {
        return await instance.get("/option/conveniences");
    }catch(error) {
        console.error(error);
    }
},
{
    retry: 0,
    refetchOnWindowFocus: false,
    onSuccess: response => {
        setConvenienceOptions(response.data.map(option => {
            return { value: option.convenienceId, label: option.convenienceName }
        }))
    }
});
```

***
</br>

## BackEnd

### OptionsController
```java
public class OptionsController {

    private final OptionService optionService;
    
    // ì‹œì„¤ ë° í¸ì˜ì‚¬í•­ ì „ì²´ ë¶ˆëŸ¬ì˜¤ê¸°
    @GetMapping("/conveniences")
    public ResponseEntity<?> getConvenienceOptions() {
        return ResponseEntity.ok(optionService.getConvenienceList());
    }

    // ìˆ˜ê°• ì—°ë ¹ ì „ì²´ ë¶ˆëŸ¬ì˜¤ê¸°
    @GetMapping("/ages")
    public ResponseEntity<?> getAgeOptions() {
        return ResponseEntity.ok(optionService.getAgeList());
    }

}
```
ëª©ë¡ ì „ì²´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” GETìš”ì²­

### OptionsService
```java
public class OptionService {
    private final OptionMapper optionMapper;

    public List<ConvenienceRespDto> getConvenienceList() {
        List<ConvenienceRespDto> convenienceRespDtos = new ArrayList<>();
        optionMapper.getConvenienceList().forEach(convenience -> convenienceRespDtos.add(convenience.toConvenienceDto()));
        return convenienceRespDtos;
    }

    public List<AgeRespDto> getAgeList() {
        List<AgeRespDto> ageRespDtos = new ArrayList<>();
        optionMapper.getAgeList().forEach(age -> ageRespDtos.add(age.toAgeDto()));
        return ageRespDtos;
    }
}
```

### repository - OptionMapper
```java
@Mapper
public interface OptionMapper {
    public List<Convenience> getConvenienceList();
    public List<Age> getAgeList();
}
```

### option_mapper
```xml
<mapper namespace="com.aws.compass.repository.OptionMapper">

    <resultMap id="convenienceMap" type="com.aws.compass.entity.Convenience">
        <id property="convenienceId" column="convenience_id" />
        <result property="convenienceName" column="convenience_name" />
    </resultMap>

    <resultMap id="ageMap" type="com.aws.compass.entity.Age">
        <id property="ageId" column="age_id" />
        <result property="ageRange" column="age_range" />
    </resultMap>


    <select id="getConvenienceList" resultMap="convenienceMap">
        select
            convenience_id,
            convenience_name
        from
            convenience_tb
        order by
            convenience_id
    </select>

    <select id="getAgeList" resultMap="ageMap">
        select
            age_id,
            age_range
        from
            age_tb
        order by
            age_id
    </select>

</mapper>

```

</div>
</details>


<details>
<summary>í•™ì› ì°¾ê¸° ì½”ë“œ ë¦¬ë·°</summary>
<div markdown="1">


## FrontEnd

```javascript
const navigate = useNavigate();
    
const [ selectedLocation, setSelectedLocation ] = useRecoilState(selectedLocationState); // ì§€ì—­
const [ selectedCategory, setSelectedCategory ] = useRecoilState(selectedCategoryState); // ì¹´í…Œê³ ë¦¬
const [ selectedContent, setSelectedContent ] = useRecoilState(selectedContentState); // í•™ì› ì´ë¦„
const [ inputValue, setInputValue ] = useState(selectedContent); // í•™ì›ì´ë¦„ ê²€ìƒ‰ì°½ 

const [ selectedAgeOptions, setSelectedAgeOptions ] = useRecoilState(selectedAgeState); // ìˆ˜ê°•ì—°ë ¹ ì •ë³´
const [ selectedConvenienceOptions, setSelectedConvenienceOptions ] = useRecoilState(selectedConvenienceState); // í¸ì˜ì‚¬í•­ ì •ë³´

const [ classify, setClassify ] = useState("ë“±ë¡ìˆœ");    

const [ totalCount, setTotalCount ] = useState(0);    // í•™ì› ìˆ˜
const { page } = useParams();
const [ academyList, setAcademyList] = useState([]);    // í•™ì› ëª©ë¡

const [ modalIsOpen, setModalIsOpen ] = useState(false);    // Location ëª¨ë‹¬ ì—´ê¸°
const [ categoryModalIsOpen, setCategoryModalIsOpen ] = useState(false);    // Category ëª¨ë‹¬ ì—´ê¸°

// ëª¨ë‹¬ì´ ì—´ë¦´ ë•Œ ìŠ¤í¬ë¡¤ ë§‰ê¸°
const disableBodyScroll = () => {
    document.body.style.overflow = 'hidden';
}

// ëª¨ë‹¬ì´ ë‹«í ë•Œ ìŠ¤í¬ë¡¤ ë³µì›
const enableBodyScroll = () => {
    document.body.style.overflow = 'auto';
}


<RootContainer>
    <div css={S.SearchLayout}>
        <h1>í•™ì›ì°¾ê¸°</h1>
        <div css={S.SearchContainer}>    // ì„ íƒí•œ ì •ë³´ê°€ ë³´ì´ë„ë¡ ì§€ì •
            <div onClick={openLocationModal}>
                <SelectModalBtn>
                    {selectedLocation.atpt_ofcdc_sc_code
                        ? `${selectedLocation.si_do_name} ${selectedLocation.admst_zone_nm}`
                        : "ì§€ì—­ ì„ íƒ"
                    }   
                </SelectModalBtn>
            </div>
            <div onClick={openCategoryModal}>
                <SelectModalBtn>
                    {selectedCategory.realm_sc_nm
                        ? `${selectedCategory.realm_sc_nm === 'êµ­ì œí™”'
                        ? 'ì™¸êµ­ì–´'
                        : selectedCategory.realm_sc_nm === 'ì •ë³´'
                        ? 'IT'
                        : selectedCategory.realm_sc_nm.replace(/\(ëŒ€\)/g, '').trim()} 
                        ${selectedCategory.le_crse_nm.includes("ì „ì²´") ? "" : selectedCategory.le_crse_nm}`
                        : "ì¹´í…Œê³ ë¦¬ ì„ íƒ"
                    }
                </SelectModalBtn>
            </div>
            <div>
                <input type="text" 
                    placeholder='ë‚˜ì—ê²Œ ë§ëŠ” í•™ì›ì„ ì°¾ì•„ë³´ì„¸ìš”' 
                    value={inputValue} 
                    onChange={handleInputOnChange}
                    onKeyUp={handleKeyUp}
                />
            </div>
            <SearchBtn onClick={handleSelectContent}/>
        </div>
    </div>
    <div css={S.PageLayout}>
        <FindAcademiesSidebar />
        <div css={S.SAcademiesContainer}>
            <div css={S.PageContainer}>
                <div css={S.InfoBox}>
                    <div>{totalCount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")}ê°œì˜ í•™ì›ì´ ìˆìŠµë‹ˆë‹¤.</div>    // í•™ì› ìˆ˜ëŠ” 3ìë¦¬ë§ˆë‹¤ , ë¡œ í‘œì‹œ
                </div>
                <div>
                    <div css={S.HeaderBox}>
                        <h3>ì´ëŸ° í•™ì›ì€ ì–´ë– ì„¸ìš”?</h3>
                        <div>
                            <span>ê´‘ê³ </span>
                            <RiAdvertisementFill size={22}/>
                        </div>
                    </div>
                    <ul css={S.UlBox}>
                    {!getPurchaseAcademyList.isLoading && Array.isArray(getPurchaseAcademyList?.data?.data) && getPurchaseAcademyList?.data?.data.map(academy => {
                        return <LiAcademyBox key={academy.ACADEMY_ID} academy={academy}/>
                    })}
                    </ul>
                </div>
                <div>
                    <div css={S.HeaderBox}>
                        <h3>ê²€ìƒ‰ëœ ì •ë³´</h3>
                        <select 
                            css={S.ClassifyBox} 
                            name="classifyBox" id=""
                            value={classify}  // í˜„ì¬ ìƒíƒœ ê°’ì„ ì„ íƒëœ ê°’ìœ¼ë¡œ ì„¤ì •
                            onChange={handleClassifyChange}  // ë³€ê²½ ì‹œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í˜¸ì¶œ
                        >
                            <option value="ë“±ë¡ìˆœ">ë“±ë¡ìˆœ</option>
                            <option value="ì¢‹ì•„ìš”ìˆœ">ì¢‹ì•„ìš”ìˆœ</option>
                            <option value="ë³„ì ìˆœ">ë³„ì ìˆœ</option>
                        </select>
                    </div>
                    <ul css={S.UlBox}>
                    {getAcademyList.isLoading ? (
                        <Loading />
                    ) : (
                        getAcademyList.isFetching ? (
                            <Loading />
                        ) : (
                            academyList.length > 0 ? (
                                academyList.map((academy) => {
                                    return <LiAcademyBox key={academy.ACADEMY_ID} academy={academy} />;
                                })
                            ) : (
                                <NoResult />
                            )
                        )
                    )}
                    </ul>
                </div>
            </div>
            {totalCount === 0 ? ( <></> ) : ( <Pagination totalCount={totalCount} link={`/academy/find`}/> ) }    // í•™ì›ì´ 0ê°œì¼ë•ŒëŠ” Pagination  ìˆ¨ê¸°ê¸°
        </div>
    </div>
    <LocationModal modalIsOpen={modalIsOpen} 
        setModalIsOpen={setModalIsOpen} 
        enableBodyScroll={enableBodyScroll}/>
    <CategoryModal modalIsOpen={categoryModalIsOpen} 
        setModalIsOpen={setCategoryModalIsOpen} 
        enableBodyScroll={enableBodyScroll}/>
</RootContainer>
```
getAcademyListìš”ì²­ì´ Loadingì¤‘ì´ê±°ë‚˜ Fetch ì¤‘ì¼ ë•Œ Loading í˜ì´ì§€ë¥¼ ë³´ì—¬ì£¼ê³  ê²°ê³¼ê°€ ì—†ì„ë•ŒëŠ” NoResultë¥¼ ë³´ì—¬ì¤Œ

### LiAcademyBox - ê´‘ê³ ì™€ í•™ì›ëª©ë¡
```javascript
const navigate = useNavigate();

const academyNameWithoutParentheses = academy.ACA_NM.replace(/\([^)]*\)/g, ''); // "()"ë¥¼ ë¹ˆ ë¬¸ìì—´ë¡œ ëŒ€ì²´
const koreanChars = academyNameWithoutParentheses.match(/[ã„±-ã…ê°€-í£]/g); // í•œê¸€ë§Œ ì¶”ì¶œ
const firstTwoKoreanChars = koreanChars ? koreanChars.slice(0, 2).join('') : '';
const address = academy.FA_RDNMA.split(' ').slice(0, 2).join(' ');
const realm =
    academy.REALM_SC_NM === 'êµ­ì œí™”'
        ? 'ì™¸êµ­ì–´'
        : academy.REALM_SC_NM === 'ì •ë³´'
        ? 'IT'
        : academy.REALM_SC_NM.replace(/\(ëŒ€\)/g, '').trim();

// ëœë¤ ìƒ‰ìƒì„ useStateë¡œ í•œ ë²ˆë§Œ ìƒì„±
const [randomColor, setRandomColor] = useState(generateRandomColor());

// ëœë¤ ìƒ‰ìƒì„ ìƒì„±í•˜ëŠ” í•¨ìˆ˜
function generateRandomColor() {
    return `rgb(${Math.floor(Math.random() * 127 + 128)}, ${Math.floor(Math.random() * 127 + 128)}, ${Math.floor(Math.random() * 127 + 128)})`;
}

<li css={S.LiBox} className='recent' onClick={()=> {navigate(`/academy/info/1?ACADEMY_ID=${academy.ACADEMY_ID}`)}}>
    {academy.logoImg ? (
        <img src={academy.logoImg} alt={`${academy.ACA_NM}ì˜ ë¡œê³ `}  />
    ): (
        <div css={[S.SRandomImg, { backgroundColor: randomColor }]}>
            <span>{firstTwoKoreanChars}</span>
        </div>
    )}
    <strong>{academy.ACA_NM}</strong>
    <div css={S.SAddress}><FaLocationDot />{address}</div>
    <div>{realm}</div>
    <div css={S.SLikeAndRating}>
        <div>ğŸ’•{academy.like_count}</div>
        <div>â­{academy.avg_score}</div>
    </div>
</li>
```
ëœë¤ìƒ‰ìƒìœ¼ë¡œ í•™ì›ì´ë¦„ ì• ë‘ê¸€ìë¥¼ ë”´ ì´ë¯¸ì§€ë¥¼ ë¡œê³ ì— í‘œì‹œ

***
- ì…ë ¥ ë°›ì€ ê°’ ì²˜ë¦¬
```
// ì¡°ê±´ì´ ìƒê¸¸ ë•Œ í•™ì›ëª©ë¡ ì—…ë°ì´íŠ¸, 1pageë¡œ ì´ë™
useEffect(() => {
    navigate("/academy/find/1");
    if(page === "1") {
        getAcademyList.refetch();
    }
}, [selectedLocation, selectedCategory, selectedContent, selectedAgeOptions.length, selectedConvenienceOptions.length, classify]);


const handleInputOnChange = (e) => {
    setInputValue(e.target.value);
}

// í•™ì› ì´ë¦„ ê²€ìƒ‰ì°½ì—ì„œ ì—”í„° ì³¤ì„ë•Œ ê²€ìƒ‰
const handleKeyUp = (e) => {
    if (e.key === 'Enter') {
        handleSelectContent();
    }
};

const handleSelectContent = () => {
    setSelectedContent(inputValue);
}

// í•™ì› ìˆœì„œ í•„í„°ë§(ë“±ë¡ìˆœ, ë³„ì ìˆœ, ê´€ì‹¬í•™ì›ìˆœ)
const handleClassifyChange = (e) => {
    setClassify(e.target.value);
};

const openLocationModal = () => {
    setModalIsOpen(true);
    disableBodyScroll();
};

const openCategoryModal = () => {
    setCategoryModalIsOpen(true);
    disableBodyScroll();
};
```
ì§€ì—­, ì¹´í…Œê³ ë¦¬, ì´ë¦„, ìˆ˜ê°•ì—°ë ¹, ì‹œì„¤ ë° í¸ì˜ì‹œì„¤, ë°°ì—´ìˆœì„œê°€ ë°”ë€”ë•Œë§ˆë‹¤ í•™ì› ëª©ë¡ì„ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¨ë‹¤

***
- ìš”ì²­
```javascript
// ê´‘ê³  ëª©ë¡ ê°€ì§€ê³ ì˜¤ê¸°
const getPurchaseAcademyList = useQuery(["getPurchaseAcademyList"], async () => {
    try{
        return await instance.get(`/ad/academies/random`)

    } catch(error) {
        console.error(error)
    }
}, {
    retry: 0,
    refetchOnWindowFocus: false
})

// í•™ì› ëª©ë¡ ê°€ì§€ê³ ì˜¤ê¸°
const getAcademyList = useQuery(["getAcademyList", page], async () => {
    try {
        setTotalCount(0);
        setAcademyList([]);
        const options = {
            params: {
                pIndex: page,
                pSize: 15,
                ATPT_OFCDC_SC_CODE: selectedLocation.atpt_ofcdc_sc_code,
                ADMST_ZONE_NM: selectedLocation.admst_zone_nm,
                REALM_SC_NM: selectedCategory.realm_sc_nm,
                LE_CRSE_NM: selectedCategory.le_crse_nm,
                ACA_NM: selectedContent,
                ageIds: selectedAgeOptions,
                countAgeId: selectedAgeOptions.length,
                convenienceIds: selectedConvenienceOptions,
                countConvenienceId: selectedConvenienceOptions.length,
                classify: classify
            },
            headers: {
                Authorization: localStorage.getItem("accessToken")
            },
            paramsSerializer: params => QueryString.stringify(params, {arrayFormat: 'repeat'})
        }

        // optionsë¥¼ get ìš”ì²­
        const response = await instance.get("/academies", options);

        // Update academyList with the data from the response
        setAcademyList(response.data.academies);

        // Set the total count
        setTotalCount(response.data.listTotalCount);
        
    } catch (error) {
        console.error(error);
    }
}, {
    retry: 0,
    refetchOnWindowFocus: false
}) 
```
- ê´‘ê³ ëª©ë¡ì€ ìœ íš¨í•œ í•™ì› ì¤‘ ëœë¤ìœ¼ë¡œ 3ê°œ ê°€ì§€ê³ ì˜´ -> ë¹ˆë„ìˆ˜ì— ë”°ë¼ ë¯¼ì› ì œê¸° ê°€ëŠ¥ -> ë¹ˆë„ìˆ˜ë¥¼ ë¹„ìŠ·í•˜ê²Œ ì²˜ë¦¬í•˜ëŠ” ë¡œì§ í•„ìš”
- qs ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•´ ageIdsì™€ convenienceIdsëŠ” íŒŒë¼ë¯¸í„°ë¥¼ ë°˜ë³µí•´ì„œ ì§ë ¬ë¡œ ì „ë‹¬ -> ì„œë²„ì—ì„œ ë¦¬ìŠ¤íŠ¸ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤( IntegerList )
***

## BackEnd

### SecurityConfig

```java
        http.authorizeRequests()
                .antMatchers("/api/auth/**", "/api/option/**",
                        "/api/academies", "/api/academy/**",
                        "/api/review/**", "/api/purchase/**", "/api/academy/check/**",
                        "/api/ad/academies/random")
```

í•™ì› ì°¾ê¸°ì™€ í•™ì› ìƒì„¸ í˜ì´ì§€ëŠ” ë¡œê·¸ì¸ í•˜ì§€ ì•Šê³ ë„ ì´ìš© ê°€ëŠ¥

### AcademyController
```java
public class AcademyController {

    private final AcademyService academyService;

    //í•™ì› ì „ì²´ ë¦¬ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°
    @GetMapping("/api/academies")
    public ResponseEntity<?> getAcademies(SearchAcademysReqDto searchAcademysReqDto) {
        return ResponseEntity.ok(academyService.getAcademies(searchAcademysReqDto));
    }
}
```

### AcademyService
```java
public class AcademyService {

    private final AcademyMapper academyMapper;

    public AcademyListRespDto getAcademies(SearchAcademysReqDto searchAcademysReqDto) {
        int listTotalCount = academyMapper.getListTotalCount(searchAcademysReqDto.toVo());    // í•™ì› ìˆ˜
        List<Academy> academies = academyMapper.getAcademies(searchAcademysReqDto.toVo());    // í•™ì› ëª©ë¡
        return new AcademyListRespDto(listTotalCount, academies);
    }
}    
```
AcademyListRespDtoë¡œ í•™ì› ìˆ˜ì™€ í•™ì›ì„ í•œë²ˆì˜ ìš”ì²­ìœ¼ë¡œ ì‘ë‹µí•¨


### repository - AcademyMapper
```java
@Mapper
public interface AcademyMapper {
    public List<Academy> getAcademies(AcademySearchVo academySearchVo);
    public int getListTotalCount(AcademySearchVo academySearchVo);
}
```
### academy_mapper
```xml
<mapper namespace="com.aws.compass.repository.AcademyMapper">
    <resultMap id="academyMap" type="com.aws.compass.entity.Academy">
        <id property="ACADEMY_ID" column="ACADEMY_ID" />
        <result property="ATPT_OFCDC_SC_CODE" column="ATPT_OFCDC_SC_CODE" />
        <result property="ATPT_OFCDC_SC_NM" column="ATPT_OFCDC_SC_NM" />
        <result property="ADMST_ZONE_NM" column="ADMST_ZONE_NM" />
        <result property="ACA_INSTI_SC_NM" column="ACA_INSTI_SC_NM" />
        <result property="ACA_ASNUM" column="ACA_ASNUM" />
        <result property="ACA_NM" column="ACA_NM" />
        <result property="ESTBL_YMD" column="ESTBL_YMD" />
        <result property="REG_YMD" column="REG_YMD" />
        <result property="REG_STTUS_NM" column="REG_STTUS_NM" />
        <result property="CAA_BEGIN_YMD" column="CAA_BEGIN_YMD" />
        <result property="CAA_END_YMD" column="CAA_END_YMD" />
        <result property="TOFOR_SMTOT" column="TOFOR_SMTOT" />
        <result property="DTM_RCPTN_ABLTY_NMPR_SMTOT" column="DTM_RCPTN_ABLTY_NMPR_SMTOT" />
        <result property="REALM_SC_NM" column="REALM_SC_NM" />
        <result property="LE_ORD_NM" column="LE_ORD_NM" />
        <result property="LE_CRSE_LIST_NM" column="LE_CRSE_LIST_NM" />
        <result property="LE_CRSE_NM" column="LE_CRSE_NM" />
        <result property="PSNBY_THCC_CNTNT" column="PSNBY_THCC_CNTNT" />
        <result property="THCC_OTHBC_YN" column="THCC_OTHBC_YN" />
        <result property="BRHS_ACA_YN" column="BRHS_ACA_YN" />
        <result property="FA_RDNMA" column="FA_RDNMA" />
        <result property="FA_RDNDA" column="FA_RDNDA" />
        <result property="FA_RDNZC" column="FA_RDNZC" />
        <result property="FA_TELNO" column="FA_TELNO" />
        <result property="LOAD_DTM" column="LOAD_DTM" />
        <result property="logoImg" column="logo_img" />
        <result property="like_count" column="LIKE_COUNT" />
        <result property="avg_score" column="AVG_SCORE" />
    </resultMap>

    <select id="getListTotalCount" resultType="int" parameterType="com.aws.compass.vo.AcademySearchVo">
        select
            count(*)
        FROM
            academy_tb
        WHERE
            1 = 1
            <if test="atptOfcdcScCode != null and !atptOfcdcScCode.equals('')">
                AND ATPT_OFCDC_SC_CODE = #{atptOfcdcScCode}
            </if>
            <if test="admstZoneNm != null and !admstZoneNm.equals('')">
                AND ADMST_ZONE_NM = #{admstZoneNm}
            </if>
            <if test="acaAsnum != null and !acaAsnum.equals('')">
                AND ACA_ASNUM = #{acaAsnum}
            </if>
            <if test="acaNm != null and !acaNm.equals('')">
                AND ACA_NM LIKE CONCAT('%', #{acaNm}, '%')
            </if>
            <if test="realmScNm != null and !realmScNm.equals('')">
                AND REALM_SC_NM = #{realmScNm}
            </if>
            <if test="leOrdNm != null and !leOrdNm.equals('')">
                AND LE_ORD_NM = #{leOrdNm}
            </if>
            <if test="leCrseNm != null and !leCrseNm.equals('')">
                AND LE_CRSE_NM = #{leCrseNm}
            </if>
            <if test="ageIds != null and !ageIds.isEmpty()">
                AND ACADEMY_ID IN (
                    SELECT
                        ait.ACADEMY_ID
                    FROM
                        academy_tb at
                        LEFT OUTER JOIN academy_info_tb ait ON ait.ACADEMY_ID = at.ACADEMY_ID
                        LEFT OUTER JOIN attendance_age_tb aat ON aat.academy_info_id = ait.academy_info_id
                    WHERE
                        aat.age_id IN
                        <foreach collection="ageIds" item="ageId" open="(" separator="," close=")">
                            #{ageId}
                        </foreach>
                    GROUP BY
                        ait.ACADEMY_ID
                    HAVING
                        COUNT(DISTINCT aat.age_id) = #{countAgeId}
                )
            </if>
            <if test="convenienceIds != null and !convenienceIds.isEmpty()">
                AND ACADEMY_ID IN (
                    SELECT
                        ait.ACADEMY_ID
                    FROM
                        academy_tb at
                        LEFT OUTER JOIN academy_info_tb ait ON ait.ACADEMY_ID = at.ACADEMY_ID
                        LEFT OUTER JOIN academy_convenience_tb act ON act.academy_info_id = ait.academy_info_id
                    WHERE
                        act.convenience_id IN
                        <foreach collection="convenienceIds" item="convenienceId" open="(" separator="," close=")">
                            #{convenienceId}
                        </foreach>
                    GROUP BY
                        ait.ACADEMY_ID
                    HAVING
                        COUNT(DISTINCT act.convenience_id) = #{countConvenienceId}
                )
            </if>
    </select>

    <select id="getAcademies" parameterType="com.aws.compass.vo.AcademySearchVo" resultMap="academyMap">
        SELECT
            at.ACADEMY_ID,
            at.ATPT_OFCDC_SC_CODE,
            at.ADMST_ZONE_NM,
            at.ACA_ASNUM,
            at.ACA_NM,
            at.REALM_SC_NM,
            at.LE_CRSE_NM,
            at.FA_RDNMA,
            at.FA_RDNDA,
            at.FA_RDNZC,
            at.FA_TELNO,
            ait.logo_img,
            IFNULL(lt.LIKE_COUNT, 0) AS LIKE_COUNT,
            IFNULL(rt.AVG_SCORE, 0) AS AVG_SCORE
        FROM
            academy_tb at
            left outer join academy_info_tb ait ON (ait.ACADEMY_ID = at.ACADEMY_ID)
            left outer join (
                SELECT ACADEMY_ID, COUNT(*) AS LIKE_COUNT
                FROM like_tb
                GROUP BY ACADEMY_ID
            ) lt ON lt.ACADEMY_ID = at.ACADEMY_ID
            left outer join (
                SELECT ACADEMY_ID, AVG(score) AS AVG_SCORE
                FROM review_tb
                GROUP BY ACADEMY_ID
            ) rt ON rt.ACADEMY_ID = at.ACADEMY_ID
        WHERE
            1 = 1
            <if test="atptOfcdcScCode != null and !atptOfcdcScCode.equals('')">
                AND at.ATPT_OFCDC_SC_CODE = #{atptOfcdcScCode}
            </if>
            <if test="admstZoneNm != null and !admstZoneNm.equals('')">
                AND at.ADMST_ZONE_NM = #{admstZoneNm}
            </if>
            <if test="acaAsnum != null and !acaAsnum.equals('')">
                AND at.ACA_ASNUM = #{acaAsnum}
            </if>
            <if test="acaNm != null and !acaNm.equals('')">
                AND at.ACA_NM LIKE CONCAT('%', #{acaNm}, '%')
            </if>
            <if test="realmScNm != null and !realmScNm.equals('')">
                AND at.REALM_SC_NM = #{realmScNm}
            </if>
            <if test="leOrdNm != null and !leOrdNm.equals('')">
                AND at.LE_ORD_NM = #{leOrdNm}
            </if>
            <if test="leCrseNm != null and !leCrseNm.equals('')">
                AND at.LE_CRSE_NM = #{leCrseNm}
            </if>
            <if test="ageIds != null and !ageIds.isEmpty()">
                AND at.ACADEMY_ID IN (
                    SELECT
                        ait.ACADEMY_ID
                    FROM
                        academy_tb at
                        LEFT OUTER JOIN academy_info_tb ait ON ait.ACADEMY_ID = at.ACADEMY_ID
                        LEFT OUTER JOIN attendance_age_tb aat ON aat.academy_info_id = ait.academy_info_id
                    WHERE
                        aat.age_id IN
                        <foreach collection="ageIds" item="ageId" open="(" separator="," close=")">
                            #{ageId}
                        </foreach>
                    GROUP BY
                        ait.ACADEMY_ID
                    HAVING
                        COUNT(DISTINCT aat.age_id) = #{countAgeId}
                )
            </if>
            <if test="convenienceIds != null and !convenienceIds.isEmpty()">
                AND at.ACADEMY_ID IN (
                    SELECT
                        ait.ACADEMY_ID
                    FROM
                        academy_tb at
                        LEFT OUTER JOIN academy_info_tb ait ON ait.ACADEMY_ID = at.ACADEMY_ID
                        LEFT OUTER JOIN academy_convenience_tb act ON act.academy_info_id = ait.academy_info_id
                    WHERE
                        act.convenience_id IN
                        <foreach collection="convenienceIds" item="convenienceId" open="(" separator="," close=")">
                            #{convenienceId}
                        </foreach>
                    GROUP BY
                        ait.ACADEMY_ID
                    HAVING
                        COUNT(DISTINCT act.convenience_id) = #{countConvenienceId}
                )
            </if>
        GROUP BY
            at.ACADEMY_ID
        ORDER BY
            CASE
                WHEN #{classify} = 'ë“±ë¡ìˆœ' THEN ait.academy_info_id
                WHEN #{classify} = 'ì¢‹ì•„ìš”ìˆœ' THEN LIKE_COUNT
                WHEN #{classify} = 'ë³„ì ìˆœ' THEN AVG_SCORE
                ELSE ait.ACADEMY_ID
            END DESC
        LIMIT #{index}, #{pSize}
    </select>
</mapper>
```
 - ì¡°ê±´ì— ë§ëŠ” í•™ì› ìˆ˜ì™€ í•™ì›ëª©ë¡ì„ ê°€ì§€ê³  ì˜¤ëŠ” ì¿¼ë¦¬
 - getAcademiesëŠ” ë™ì ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ íŒŒë¼ë¯¸í„° ê°’ì´ ìˆëŠ” ê²½ìš°ì—ë§Œ ì¡°ê±´ì´ ì¶”ê°€ë˜ê²Œí•¨.
 - í•™ì›ì„ ê°€ì§€ê³  ì˜¤ëŠ” ì‹œê°„ì„ ë‹¨ì¶•í•˜ê¸° ìœ„í•´ ageIdsì™€ convenienceIdsëŠ” ì¡°ê±´ì´ ìˆëŠ” ê²½ìš°ì—ë§Œ ì„œë¸Œì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•´ academy_tbì™€ ì¡°ì¸í•¨
 - ageIdsì™€ convenienceIdsëŠ” Listì´ê¸° ë•Œë¬¸ì— foreachë¥¼ ì‚¬ìš©í•˜ì—¬ IN ì¡°ê±´ì„ ì¤Œ

***

### AdvertisementController
```java
public class AdvertisementController {

    private final AdvertisementService advertisementService;

    // ê´‘ê³  í•™ì› ëœë¤ ë‚˜íƒ€ë‚´ê¸°
    @GetMapping("/api/ad/academies/random")
    public ResponseEntity<?> getRandomAcademies() {
        return ResponseEntity.ok(advertisementService.getADOfRandomAcademies());
    }


}
```
### AdvertisementService
```java
public class AdvertisementService {
    private final AdvertisementMapper advertisementMapper;

    public List<Academy> getADOfRandomAcademies() {
        return advertisementMapper.getADOfRandomAcademies();
    }
}
```

### repository - AdvertisementMapper
```java
@Mapper
public interface AdvertisementMapper {

    public List<Academy> getADOfRandomAcademies();
}

```

### advertisement_mapper
```xml
<mapper namespace="com.aws.compass.repository.AdvertisementMapper">
    <resultMap id="academyMap" type="com.aws.compass.entity.Academy">
        <id property="ACADEMY_ID" column="ACADEMY_ID" />
        <result property="ATPT_OFCDC_SC_CODE" column="ATPT_OFCDC_SC_CODE" />
        <result property="ATPT_OFCDC_SC_NM" column="ATPT_OFCDC_SC_NM" />
        <result property="ADMST_ZONE_NM" column="ADMST_ZONE_NM" />
        <result property="ACA_INSTI_SC_NM" column="ACA_INSTI_SC_NM" />
        <result property="ACA_ASNUM" column="ACA_ASNUM" />
        <result property="ACA_NM" column="ACA_NM" />
        <result property="ESTBL_YMD" column="ESTBL_YMD" />
        <result property="REG_YMD" column="REG_YMD" />
        <result property="REG_STTUS_NM" column="REG_STTUS_NM" />
        <result property="CAA_BEGIN_YMD" column="CAA_BEGIN_YMD" />
        <result property="CAA_END_YMD" column="CAA_END_YMD" />
        <result property="TOFOR_SMTOT" column="TOFOR_SMTOT" />
        <result property="DTM_RCPTN_ABLTY_NMPR_SMTOT" column="DTM_RCPTN_ABLTY_NMPR_SMTOT" />
        <result property="REALM_SC_NM" column="REALM_SC_NM" />
        <result property="LE_ORD_NM" column="LE_ORD_NM" />
        <result property="LE_CRSE_LIST_NM" column="LE_CRSE_LIST_NM" />
        <result property="LE_CRSE_NM" column="LE_CRSE_NM" />
        <result property="PSNBY_THCC_CNTNT" column="PSNBY_THCC_CNTNT" />
        <result property="THCC_OTHBC_YN" column="THCC_OTHBC_YN" />
        <result property="BRHS_ACA_YN" column="BRHS_ACA_YN" />
        <result property="FA_RDNMA" column="FA_RDNMA" />
        <result property="FA_RDNDA" column="FA_RDNDA" />
        <result property="FA_RDNZC" column="FA_RDNZC" />
        <result property="FA_TELNO" column="FA_TELNO" />
        <result property="LOAD_DTM" column="LOAD_DTM" />
        <result property="logoImg" column="logo_img" />
        <result property="like_count" column="LIKE_COUNT" />
        <result property="avg_score" column="AVG_SCORE" />
    </resultMap>

    <select id="getADOfRandomAcademies"
            resultMap="academyMap">
        select
            pit.ACADEMY_ID,
            at.ACA_NM,
            at.FA_RDNMA,
            at.FA_RDNDA,
            at.REALM_SC_NM,
            at.LE_CRSE_LIST_NM,
            at.FA_TELNO,
            ait.logo_img,
            IFNULL(lt.LIKE_COUNT, 0) AS LIKE_COUNT,
            IFNULL(rt.AVG_SCORE, 0) AS AVG_SCORE
        from
            purchase_info_tb pit
            left outer join academy_info_tb ait ON (ait.ACADEMY_ID = pit.ACADEMY_ID)
            left outer join product_tb pt on(pt.product_id = pit.product_id)
            left outer join academy_tb at on(at.ACADEMY_ID = pit.ACADEMY_ID)
            left outer join (
                SELECT ACADEMY_ID, COUNT(*) AS LIKE_COUNT
                FROM like_tb
                GROUP BY ACADEMY_ID
            ) lt ON lt.ACADEMY_ID = at.ACADEMY_ID
            left outer join (
                SELECT ACADEMY_ID, AVG(score) AS AVG_SCORE
                FROM review_tb
                GROUP BY ACADEMY_ID
            ) rt ON rt.ACADEMY_ID = at.ACADEMY_ID
        where
            now() <![CDATA[ <= ]]> date_add(purchase_date, interval pt.product_period DAY)    // ê´‘ê³  ìœ íš¨ì„± ê²€ì‚¬
        ORDER BY RAND() 
        LIMIT 3;
    </select>
</mapper>
```
ìœ íš¨í•œ ê´‘ê³ ë¥¼ ëœë¤ìœ¼ë¡œ ë°°ì—´ í›„ ìœ„ì˜ 3ê°œë¥¼ ê°€ì ¸ì˜´

</div>
</details>


<br/>


### **í•™ì› ë“±ë¡**
<details>
<summary>í•™ì› ë“±ë¡ ì½”ë“œ ë¦¬ë·°</summary>
<div markdown="1">
  í•™ì› ë“±ë¡
</div>
</details>

<br/>


### **í•™ì› ìƒì„¸í˜ì´ì§€**
<details>
<summary>í•™ì› ìƒì„¸í˜ì´ì§€ ì½”ë“œ ë¦¬ë·°</summary>
<div markdown="1">
  í•™ì› ìƒì„¸í˜ì´ì§€
</div>
</details>

<br/>


### **í•™ìƒ ë§ˆì´í˜ì´ì§€**

<details>
<summary>ê´€ì‹¬ í•™ì›</summary>

![ê´€ì‹¬í•™ì› ê¸°ëŠ¥](https://github.com/KoreaIt-J-23-2-2/compass_front/assets/137989664/e21b6c5a-3504-4e7d-ac96-bca7fca5a316)

### FrontEnd

#### í•™ì› ìƒì„¸í˜ì´ì§€  ì¢‹ì•„ìš” ë²„íŠ¼
  ```html
                      
           <div css={S.SSide}>
            <div css={S.SOptionBox}>
                {!getLikeState.isLoading &&
                    <button disabled={!principal?.data?.data}
                    css={S.SLikeButton}
                    onClick={handleLikeButtonClick}>
                        {getLikeState?.data?.data ? <AiFillHeart css={S.SLikeIcon(getLikeState?.data?.data)}/> :
                        <AiOutlineHeart css={S.SLikeIcon(getLikeState?.data?.data)}/>}
                        ê´€ì‹¬í•™ì›
                        <div>{likeCountOfInfo?.data?.data}</div>
                    </button>
                }
                <button css={S.SinquiryButton(isAcademyRegistered)} onClick={handleinquiryButton}>
                    <BsChatLeftTextFill css={S.SinquiryIcon}/>
                    ë¬¸ì˜
                </button>
            </div>
        </div>
```
      
-   butttonì— onClickë¥¼ ë„£ì–´ì¤Œìœ¼ë¡œì¨ ë‚´ê°€ ì·¨í•œ í–‰ë™ì— ëŒ€í•œ ê°’ì„ í•¨ìˆ˜ë¡œ ë„˜ê²¨ì¤€ë‹¤.
-   dataì˜ ì¡°ê±´ì— ë”°ë¼ ê°’ì´ ë‹¬ë¼ì§„ë‹¤.

#### ì…ë ¥ ë°›ì€ ê°’ ì²˜ë¦¬
``` javascript
const getLikeState = useQuery(["getLikeState"], async () => {
        try {
            const option = {
                headers: {
                    Authorization: localStorage.getItem("accessToken")
                }
            }
            return await instance.get(`/account/like/${academyId}/${userId}`, option)
        } catch(error) {
            console.error(error)
        }
    }, {
        refetchOnWindowFocus: false,
        retry: 0
    })

const likeCountOfInfo = useQuery(["getLikeCountOfInfo"], async () => {
        try {
            const option = {
                headers: {
                    Authorization: localStorage.getItem("accessToken")
                }
            }
            return await instance.get(`/account/info/like/count/${academyId}`, option)
        } catch(error) {
            console.error(error)
        }
    }, {
        retry: 0,
        refetchOnWindowFocus: false
    })

const handleLikeButtonClick = async () => {
        try {
            const option = {
                headers: {
                    Authorization: localStorage.getItem("accessToken")
                }
            }
            if(getLikeState?.data?.data) {
                await instance.delete(`/account/like/${academyId}/${userId}`, option);
            } else {
                await instance.post(`/account/like/${academyId}/${userId}`, {}, option);
            }
            getLikeState.refetch();
            likeCountOfInfo.refetch();
        } catch(error) {
            console.error(error)
        }
    }
```
- handleLikeButtonClick ê´€ì‹¬ í•™ì›ì„ ì¶”ê°€ ë˜ëŠ” ì œê±°í•˜ëŠ” ì—­í• 
- likeCountOfInfoì™€ getLikeState : ê°ê° ê´€ì‹¬ í•™ì›ì˜ ì¢‹ì•„ìš” ìˆ˜ì™€ í˜„ì¬ ì‚¬ìš©ìì˜ í•´ë‹¹ í•™ì›ì— ëŒ€í•œ ê´€ì‹¬ ìƒíƒœë¥¼ ê°€ì ¸ì˜¤ëŠ” ì—­í• 
  
#### ë§ˆì´í˜ì´ì§€ ê´€ì‹¬í•™ì› ë¦¬ìŠ¤íŠ¸ ë³´ê¸°
   ```html
        <div>
            <h2>â¤ï¸ ë‚˜ì˜ ê´€ì‹¬ í•™ì›</h2>
            <div>
                {likeCountOfMypage === 0 ? 
                <EmptyBox comment={"ë‚˜ì˜ ê´€ì‹¬ í•™ì›ì„ ì¶”ê°€í•´ ë³´ì„¸ìš”!"} link={'/academy/find/1'} btn={"ë³´ëŸ¬ ê°€ê¸°"}/> : 
                <ul css={S.UlBox}>
                    {!getLikeAcademiesQuery.isLoading && Array.isArray(getLikeAcademiesQuery?.data?.data) && getLikeAcademiesQuery?.data?.data.map(academy => {
                        return <LiAcademyBox key={academy.ACADEMY_ID} academy={academy}/>
                    })}
                </ul>}
                <Pagination totalCount={likeCountOfMypage.data.data} link={'/account/mypage/like'} search={''}/>
            </div>
        </div>
```
-   getLikeAcademiesQuery í†µí•´ Listë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.

#### ì…ë ¥ ë°›ì€ ê°’

```javascript
const userId = principal?.userId

    const getLikeAcademiesQuery = useQuery(["getLikeAcademies", page], async () => {
        try {
            const option = {
                headers: {
                    Authorization: localStorage.getItem("accessToken")
                }
            }
            return await instance.get(`/account/mypage/like/${userId}/${page}`, option);
        } catch (error) {
            console.error(error);
        }
    }, {
        retry: 0,
        refetchOnWindowFocus: false
    });
```
-  principalì—ì„œ ì¶”ì¶œí•˜ì—¬ userId ìƒìˆ˜ì— í• ë‹¹


### Backend

#### controller
```java

@RestController
@RequiredArgsConstructor
public class AccountController {

    private final AccountService accountService;

  // ì¢‹ì•„ìš” ìƒíƒœ
    @GetMapping("/api/account/like/{academyId}/{userId}")
    public ResponseEntity<?> getLikeState (@PathVariable int userId, @PathVariable int academyId) {
        return ResponseEntity.ok(accountService.getLikeState(userId, academyId));
    }

    // ì¢‹ì•„ìš” ì¶”ê°€
    @PostMapping("/api/account/like/{academyId}/{userId}")
    public ResponseEntity<?> setLike(@PathVariable int userId, @PathVariable int academyId) {
        return ResponseEntity.ok(accountService.setLike(userId, academyId));
    }

    // ì¢‹ì•„ìš” ì‚­ì œ
    @DeleteMapping("/api/account/like/{academyId}/{userId}")
    public ResponseEntity<?> cancelLike(@PathVariable int userId, @PathVariable int academyId) {
        return ResponseEntity.ok(accountService.cancelLike(userId, academyId));
    }

    // ì¢‹ì•„ìš” COUNT
    @GetMapping("/api/account/mypage/like/count/{userId}")
    public ResponseEntity<?> getLikeCount(@PathVariable int userId) {
        return ResponseEntity.ok(accountService.getLikeCount(userId));
    }

    // ê´€ì‹¬ í•™ì›
    @GetMapping("/api/account/mypage/like/{userId}/{page}")
    public ResponseEntity<?> getLikeAcademies(@PathVariable int userId, @PathVariable int page) {
        return ResponseEntity.ok(accountService.getLikeAcademy(userId, page));
    }

    // ê´€ì‹¬í•™ì› COUNT
    @GetMapping("/api/account/info/like/count/{academyId}")
    public ResponseEntity<?> getLikeCountOfInfo(@PathVariable int academyId) {
        return ResponseEntity.ok(accountService.getLikeInfoCount(academyId));
    }
}
```
- ì¢‹ì•„ìš”ì˜ CRUDì— ëŒ€í•œ ë°ì´í„° ì²˜ë¦¬

#### DTO
```java
@Builder
@Data
public class AcademyLikeRespDto {
    private int likeId;
    private int userId;
    private int ACADEMYID;
}
```

#### Service
```java
@Service
@RequiredArgsConstructor
public class AccountService {
public boolean getLikeState(int userId, int academyId) {
        return accountMapper.getLikeState(userId, academyId) > 0;
    }

    public boolean setLike(int userId, int academyId) {
        return accountMapper.insertLike(userId, academyId) > 0;
    }

    public boolean cancelLike(int userId, int academyId) {
        return accountMapper.deleteLike(userId, academyId) > 0;
    }

    public int getLikeCount(int userId) {
        return accountMapper.getLikeCountByUserId(userId);
    }

    public List<Academy> getLikeAcademy(int userId, int page) {
        int index = (page - 1) * 5;

        return accountMapper.getLikeAcademies(userId, index);
    }

    public int getLikeInfoCount(int academyId) {
        return accountMapper.getLikeCountByAcademyId(academyId);
    }
}
```
- controllerì—ì„œ ë³´ë‚¸ likeì— ê´€í•œ ê²ƒë“¤ì„ ë°›ëŠ”ë‹¤.

#### Repository
```java
@Mapper
public interface AccountMapper {
    public int getLikeState(int userId, int academyId);
    public int insertLike(int userId, int academyId);
    public int deleteLike(int userId, int academyId);

    public int getLikeCountByUserId(int userId);
    public List<Academy> getLikeAcademies(int userId, int index);

    public int getLikeCountByAcademyId(int academyId);
}
```
- ë°ì´í„°ë² ì´ìŠ¤ì™€ ìƒí˜¸ ì‘ìš©í•˜ëŠ” ë©”ì„œë“œë¥¼ ì •ì˜

#### SQL
```java

    <select id="getLikeState"
            resultType="java.lang.Integer">
        select
            count(*)
        from
            like_tb
        where
            user_id = #{userId}
            and ACADEMY_ID = #{academyId}

    </select>

    <select id="getLikeCountByUserId"
            resultType="java.lang.Integer">
        select
            count(*)
        from
            like_tb
        where
            user_id = #{userId}
    </select>

    <select id="getLikeAcademies"
            resultMap="academyMap">
        SELECT
            at.ACADEMY_ID,
            at.ACA_NM,
            at.REALM_SC_NM,
            at.FA_RDNMA,
            ait.logo_img,
            IFNULL(clt.LIKE_COUNT, 0) AS LIKE_COUNT,
            IFNULL(AVG(rt.score), 0) AS AVG_SCORE
        FROM
            like_tb lt
            LEFT OUTER JOIN academy_tb at ON (at.ACADEMY_ID = lt.ACADEMY_ID)
            LEFT OUTER JOIN academy_info_tb ait ON (ait.ACADEMY_ID =       lt.ACADEMY_ID)
            LEFT OUTER JOIN review_tb rt ON (rt.ACADEMY_ID = lt.ACADEMY_ID)
            LEFT OUTER JOIN (
                SELECT ACADEMY_ID, COUNT(*) AS LIKE_COUNT
                FROM like_tb
                GROUP BY ACADEMY_ID
            ) clt ON clt.ACADEMY_ID = at.ACADEMY_ID
        where
            lt.user_id = #{userId}
        group by
            at.ACADEMY_ID
        order by
            lt.like_id desc
        limit #{index}, 9
    </select>

    <select id="getLikeCountByAcademyId"
            resultType="java.lang.Integer">
        select
            count(*)
        from
            like_tb
        where
            academy_id = #{academyId}
    </select>
    <insert id="insertLike">
        insert into like_tb
        values(0, #{userId}, #{academyId})
    </insert>

    <delete id="deleteLike">
        delete
        from
            like_tb
        where
            user_id = #{userId}
            and ACADEMY_ID = #{academyId}
    </delete>
```
-  ì¢‹ì•„ìš”ì˜ CRUD ë° ê¸°ëŠ¥ì„ ìœ„í•œ ì¿¼ë¦¬ë¬¸ ì‘ì„±

</details>
  
<details>
<summary>ê°œì¸ ì •ë³´ ìˆ˜ì •</summary>

![ê°œì¸ì •ë³´ ìˆ˜ì •](https://github.com/KoreaIt-J-23-2-2/compass_front/assets/137989664/6b0f558d-5380-4c29-81d8-04b1e35b5d7e)
<br/>

ìœ ì €ì˜ ê°œì¸ ì •ë³´ë¥¼ ìˆ˜ì •í•˜ëŠ” í˜ì´ì§€, ì´ë©”ì¼ ì¸ì¦ ê¸°ëŠ¥

---

### **Front End**

**html**

``` html
<h2>ğŸ› ï¸ ê°œì¸ ì •ë³´ ìˆ˜ì •</h2>
<div>
    <div css={S.SButtonBox}>
        <div>
            ë‚´ ì •ë³´
        </div>
        {isEdit? 
        <button onClick={handleEditSubmitOnClick}>í™•ì¸</button> 
        : <button onClick={handleEditBtnOnClick}>ë³€ê²½í•˜ê¸°</button>}
    </div>
    <table css={S.STable}>
        <tbody>
            <tr>
                <td>ì´ë©”ì¼</td>
                <td>
                    {isEdit ?
                        <input type="text"
                            name='email' 
                            value={newUser.email}
                            onChange={handleInputChange}/>
                        :principalState.data.data.email}
                    {principalState.data.data.enabled > 0 ?
                        <button disabled>
                            ì¸ì¦ ì™„ë£Œ
                        </button>
                        : (!isEdit ? 
                                <button onClick={handleSendMail}>
                                    ì¸ì¦ í•˜ê¸°
                                </button>
                                : <button disabled>
                                    ì¸ì¦ í•˜ê¸°
                                </button>)
                    }
                </td>
            </tr>
            <tr>
                <td>ì´ë¦„</td>
                <td>
                    {isEdit ?
                        <input type="text"
                            name='name' 
                            value={newUser.name}
                            onChange={handleInputChange}/>
                        :principalState.data.data.name}
                </td>
            </tr>

            ...

        </tbody>
    </table>
</div>
```
- principalStateì— ë¡œê·¸ì¸í•œ ìœ ì € ì •ë³´ê°€ ë‹´ê²¨ìˆë‹¤.
- isEdit ìƒíƒœì— ë”°ë¼ input ë˜ëŠ” í…ìŠ¤íŠ¸ë¡œ ë°”ê¿”ì¤€ë‹¤.
- enabledê°€ 0ì´ë©´ ì´ë©”ì¼ ì¸ì¦ ì•ˆ ëœ ìœ ì €, 1ì´ë©´ ì¸ì¦ëœ ìœ ì €

<br/>

**ì´ë©”ì¼ ì¸ì¦ ë©”ì¼ ì „ì†¡**
``` javascript
    const handleSendMail = async () => {
        try {
            const option = {
                headers: {
                    Authorization: localStorage.getItem("accessToken")
                }
            }
            await instance.post("/account/auth/email", {}, option);  // ì£¼ì†Œ, ë°ì´í„°, ì˜µì…˜
            alert("ì¸ì¦ ë©”ì¼ ì „ì†¡ ì™„ë£Œ. ì¸ì¦ ìš”ì²­ ë©”ì¼ì„ í™•ì¸í•´ì£¼ì„¸ìš”.");
        } catch (error) {
            alert("ì¸ì¦ ë©”ì¼ ì „ì†¡ ì‹¤íŒ¨. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
        }
    }
```
- /account/auth/email ë¡œ ìš”ì²­


<br/>

**ìˆ˜ì • ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸**
``` javascript
    const handleEditSubmitOnClick = async () => {
        try {
            setIsEdit(false);
            if(JSON.stringify(newUser) !== JSON.stringify(user)) {  // ê¸°ì¡´ ìœ ì €ì™€ ë‹¬ë¼ì¡Œì„ ë•Œë§Œ ìˆ˜ì •
                const option = {
                    headers: {
                        Authorization: localStorage.getItem("accessToken")
                    }
                }
                const response = await instance.put(`/account/user/${principalState.data.data.userId}`, newUser, option);
                queryClient.refetchQueries(["getPrincipal"]);
                alert("ê°œì¸ì •ë³´ ë³€ê²½ì´ ì™„ë£Œ ë˜ì—ˆìŠµë‹ˆë‹¤.");
            }
        } catch (error) {
            console.error(error);
            if(Object.keys(error.response.data).includes("email")) {
                alert(error.response.data.email);
            } else if(Object.keys(error.response.data).includes("nickname")) {
                alert(error.response.data.nickname);
            }
            setNewUser(user);
        }
    }
```
- newUser ê°ì²´ì— ë³€ê²½ëœ ìœ ì € ì •ë³´ë¥¼ ë‹´ì•„ì„œ /account/user/{userId}ë¡œ put ìš”ì²­
- ê¸°ì¡´ ìœ ì €ì™€ ë‹¬ë¼ì¡Œì„ ë•Œë§Œ put ìš”ì²­
- ì´ë©”ì¼, ë‹‰ë„¤ì„ ì¤‘ë³µì‹œ, ì´ë©”ì¼ ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨ì‹œì—” ì¤‘ë³µ ë©”ì‹œì§€ alert

<br/>

---

<br/>

### **Back End**

**AccountController**

``` java
    // ê°œì¸ ì •ë³´ ìˆ˜ì •
    @ValidAop
    @PutMapping("/api/account/user/{userId}")
    public ResponseEntity<?> editUser(@PathVariable int userId,
                                      @Valid @RequestBody EditUserReqDto editUserReqDto,
                                      BindingResult bindingResult) {
        return ResponseEntity.ok(accountService.updateUser(userId,editUserReqDto));
    }

    // ì´ë©”ì¼ ì¸ì¦í•˜ê¸°
    @PostMapping("/api/account/auth/email")
    public ResponseEntity<?> sendAuthenticationMail() {
        return ResponseEntity.ok(accountService.sendAuthMail());
    }

    // ì¸ì¦ëœ ì´ë©”ì¼ ê°€ì ¸ì˜¤ê¸°
    @GetMapping("/api/account/auth/email")
    public ResponseEntity<?> authenticateMail (String token) {
        //ì£¼ì†Œì˜ í† í°ì„ ë°›ê³  ìœ íš¨í•œì§€ í™•ì¸
        return ResponseEntity.ok(accountService.authenticateMail(token) ? "ì¸ì¦ ì™„ë£Œ" : "ì¸ì¦ ì‹¤íŒ¨");
    }
```
- ValidAopë¡œ ìœ íš¨ì„± ê²€ì‚¬

<br/>

**AccountService**

**ì¸ì¦ ë©”ì¼ ì „ì†¡**
``` java
    public boolean sendAuthMail() {
        PrincipalUser principalUser = (PrincipalUser) SecurityContextHolder.getContext().getAuthentication().getPrincipal();
        String toEmail = principalUser.getUser().getEmail();

        MimeMessage mimeMailMessage = javaMailSender.createMimeMessage();
        try {
            MimeMessageHelper helper = new MimeMessageHelper(mimeMailMessage, false, "utf-8");
            helper.setSubject("í•™ìŠµ ë‚˜ì¹¨ë°˜ ì´ë©”ì¼ ì¸ì¦");
            helper.setFrom("mini011029@gmail.com");
            helper.setTo(toEmail);

            String token = jwtProvider.generateAuthMailToken(toEmail);      //ì´ë©”ì¼ ì¸ì¦ì„ ìœ„í•œ í† í° ë°œí–‰

            mimeMailMessage.setText(
                    //htmlë¡œ mailì„ ì „ì†¡í•˜ê¸° ìœ„í•¨
                    "<div>" +
                            "<h1>í•™ìŠµ ë‚˜ì¹¨ë°˜ ì´ë©”ì¼ ì¸ì¦ ë©”ì¼</h1>"+
                            "<p>ì´ë©”ì¼ ì¸ì¦ì„ ì™„ë£Œí•˜ë ¤ë©´ ì•„ë˜ì˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.</p>" +
                            "<a href=\"http://localhost:8080/api/account/auth/email?token=" + token + "\">ì¸ì¦í•˜ê¸°</a>" +
                    "</div>", "utf-8", "html"
            );
            javaMailSender.send(mimeMailMessage);       //ì„¤ì •í•œ ë©”ì‹œì§€ë¥¼ senderë¥¼ í†µí•´ ì „ë‹¬í•¨
        } catch (Exception e) {
            e.printStackTrace();
            throw new SendMailException("ì´ë©”ì¼ ì „ì†¡ì´ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
        }
        return true;
    }
```
- generateAuthMailToken : ì´ë©”ì¼ ì¸ì¦ í† í° ë°œí–‰(ìœ íš¨ê¸°ê°„ - 5ë¶„)
- http://localhost:8080/api/account/auth/email ë¡œ a íƒœê·¸ ë§Œë“¤ì–´ì„œ ì¸ì¦í•˜ë„ë¡ í•œë‹¤.

<br/>

**ì´ë©”ì¼ ì¸ì¦**

``` java
    @Transactional(rollbackFor = Exception.class)
    public boolean authenticateMail(String token) {
        Claims claims = jwtProvider.getClaims(token);
        if(claims == null) {    // ìœ íš¨í•˜ì§€ ì•Šì€ í† í°
            throw new AuthMailException("ë§Œë£Œëœ ì¸ì¦ ìš”ì²­ì…ë‹ˆë‹¤.");
        }

        String email = claims.get("email").toString();
        User user = accountMapper.findUserByEmail(email);

        if(user.getEnabled() > 0) { // ì´ë¯¸ ì¸ì¦ëœ ìƒíƒœ
            throw new AuthMailException("ì´ë¯¸ ì¸ì¦ì´ ì™„ë£Œëœ ìš”ì²­ì…ë‹ˆë‹¤.");
        }

        return accountMapper.updateEnabledToEmail(email) > 0;
    }
```
- ì´ë©”ì¼ì˜ a íƒœê·¸ ë§í¬ë¥¼ í†µí•´ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ Service
- í•´ë‹¹ ìœ ì €ì˜ enabledê°€ 1ì´ë¼ë©´ ì´ë¯¸ ì¸ì¦ëœ ìƒíƒœë¡œ ì˜ˆì™¸ ì²˜ë¦¬
- í† í°ì´ ìœ íš¨í•˜ë‹¤ë©´ enabledë¥¼ 1ë¡œ ì—…ë°ì´íŠ¸(enabled 1 : ì¸ì¦ ìƒíƒœ)

<br/>

**ìœ ì € ì •ë³´ ìˆ˜ì •**
``` java
    public boolean updateUser(int userId, EditUserReqDto editUserReqDto) {
        User newUser = editUserReqDto.toUser();
        newUser.setUserId(userId);

        int errorCode = accountMapper.checkDuplicateAndIdNot(newUser);
        if(errorCode > 0) {
            authService.responseDuplicateError(errorCode);
        }

        PrincipalUser principalUser = (PrincipalUser) SecurityContextHolder.getContext().getAuthentication().getPrincipal();
        User oldUser = principalUser.getUser();

        if(oldUser.getEnabled() > 0 && !Objects.equals(oldUser.getEmail(), newUser.getEmail())) {  // ì´ë©”ì¼ ë³€ê²½ í•˜ë©´ enabled 0ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•´ì¤˜ì•¼ í•¨.
            newUser.setEnabled(0);
        } else {
            newUser.setEnabled(oldUser.getEnabled());
        }

        return accountMapper.updateUser(newUser) > 0;
    }
```
- ê¸°ì¡´ ìœ ì €ë¥¼ ê°€ì ¸ì™€ ìƒˆ ìœ ì €ì˜ ì´ë©”ì¼ì´ ë³€ê²½ëì„ ë•ŒëŠ” enabledë¥¼ 0ìœ¼ë¡œ ë³€ê²½í•œë‹¤.(enabled 0 : ë¯¸ì¸ì¦ ìƒíƒœ)

<br/>

**account_mapper.xml**
``` xml
    <update id="updateUser">
        update
            user_tb
        set
            email = #{email},
            name = #{name},
            nickname = #{nickname},
            phone = #{phone},
            enabled = #{enabled}
        where
            user_id = #{userId}
    </update>
    <update id="updateEnabledToEmail">
        update
            user_tb
        set
            enabled = 1
        where
            email = #{email}
    </update>
    <select id="findUserByEmail" resultMap="userMap">
        select
            user_id,
            email,
            oauth2_id,
            name,
            nickname,
            phone,
            provider,
            enabled,
            role_id
        from
            user_tb
        where
            email = #{email}
    </select>
    <select id="checkDuplicateAndIdNot"
            parameterType="com.aws.compass.entity.User"
            resultType="java.lang.Integer">
        select
            (select
                if(count(*) > 0, 1, 0)
            from
                user_tb
            where
                email = #{email}
                and user_id != #{userId}
            )
            + (select
                if(count(*) > 0, 2, 0)
            from
                user_tb
            where
                nickname = #{nickname}
                and user_id != #{userId}
            ) as result
    </select>
```
- checkDuplicateAndIdNot : ì´ë©”ì¼, ë‹‰ë„¤ì„ì´ ì¤‘ë³µì¸ì§€ í™•ì¸í•˜ëŠ” sql, í•´ë‹¹ ìœ ì €ì˜ ì´ë©”ì¼ê³¼ ë‹‰ë„¤ì„ì€ ì¤‘ë³µì²´í¬ ë˜ë©´ ì•ˆ ë˜ê¸°ì— user_id != #{userId} ì¡°ê±´ì„ ë„£ì–´ì¤€ë‹¤. (0 : ì¤‘ë³µx, 1 : ì´ë©”ì¼ ì¤‘ë³µ, 2 : ë‹‰ë„¤ì„ ì¤‘ë³µ, 3 : ë‘˜ ë‹¤ ì¤‘ë³µ)

<br/>
</details>
  
<details>
<summary>í•™ì› ì‹ ì²­ ëª©ë¡</summary>

![í•™ì› ì‹ ì²­ ëª©ë¡ ìŠ¹ì¸ëŒ€ê¸°  ê±°ì ˆ](https://github.com/KoreaIt-J-23-2-2/compass_front/assets/137989664/7c33f976-4e43-409a-bfb7-b1f95e233ef5)

<br/>

ìŠ¹ì¸ ëŒ€ê¸°, ìŠ¹ì¸ ê±°ì ˆ ìƒíƒœì˜ í•™ì›ì„ ë³¼ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥

<br/>

---

<br/>

### **Front End**

**html**

``` html
<h2>ğŸ—’ï¸ í•™ì› ì‹ ì²­ ëª©ë¡</h2>
<div>
    {getAppliedAcademies?.data?.data.listTotalCount === 0 ? 
    <EmptyBox comment={<>ì‹ ì²­í•œ í•™ì›ì´ ì—†ìŠµë‹ˆë‹¤.<br/>í•™ì›ì„ ë“±ë¡í•´ ë³´ì„¸ìš”!</>}
        link={'/academy/regist'} btn={"ë“±ë¡í•˜ê¸°"}/> : 
    <>
        <div css={S.SComment}>í•™ì› ìŠ¹ì¸ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³  ì¬ì‹ ì²­ í•´ë³´ì„¸ìš”!</div>
        <table css={GS.STable}>
            <tbody>
                <tr>
                    <td>í•™ì› ë²ˆí˜¸</td>
                    <td>í•™ì›ëª…</td>
                    <td>ìŠ¹ì¸ ì—¬ë¶€</td>
                    <td>í•™ì› ì„ íƒ</td>
                </tr>
                {getAppliedAcademies?.data?.data.academyRegistrations.map(academy => {
                    return  <tr key={academy.academyRegistrationId} 
                                style={{ fontWeight: selectedAcademy === academy ? 'bold' : 'normal', color: academy.approvalStatus < 0 ? 'red' : 'black'}}>
                                <td>{academy.acaAsnum}</td>
                                <td>{academy.acaNm}</td>
                                <td>{academy.approvalStatus === 0 ? "ìŠ¹ì¸ ëŒ€ê¸°" : "ìŠ¹ì¸ ê±°ì ˆ"}</td>
                                <td>
                                    <button css={GS.SButton} onClick={(e) => handleAcademyOnClick(e, academy)}>
                                        {selectedAcademy === academy ? 'ì„ íƒ í•´ì œ' : 'ì„ íƒ'}
                                    </button>
                                </td>
                            </tr>
                })}
            </tbody>
        </table>
        {!getAppliedAcademies.isLoading &&
            <Pagination totalCount={getAppliedAcademies?.data?.data?.listTotalCount}
                link={`/account/mypage/appliedacademy`}/>}
        <div>
            {isApplicatedOpen && !!selectedAcademy && 
                (selectedAcademy?.approvalStatus > 0 ? <></> : 
                    selectedAcademy.approvalStatus === 0 ? 
                    <RetryMyAcademy type={"awaiting"} selectedAcademy={selectedAcademy}/> : 
                    <RetryMyAcademy type={"reject"} selectedAcademy={selectedAcademy}/>)}
        </div>
    </>}
</div>
```
- ìŠ¹ì¸ ëŒ€ê¸°, ìŠ¹ì¸ ê±°ì ˆ ìƒíƒœì˜ í•™ì› ëª©ë¡ì„ ê°€ì ¸ì˜¨ë‹¤.
- ì„ íƒëœ í•™ì›ì˜ ìŠ¹ì¸ ìƒíƒœì— ë”°ë¼ propsë¡œ ë³´ë‚´ ê°ê°ì˜ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•œë‹¤.

<br/>

**ìŠ¹ì¸ ëŒ€ê¸°, ìŠ¹ì¸ ê±°ì ˆ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°**
```javascript
    const getAppliedAcademies = useQuery(["getAppliedAcademy", page], async () => {
        const option = {
            headers: {
                Authorization: localStorage.getItem("accessToken")
            }
        }
        return await instance.get(`/academies/applied/${principal.data.data.userId}/${page}`, option);
    }, {
        refetchOnWindowFocus: false,
        onSuccess: () => {
            setSelectedAcademy(null);
        }
    })
```
- /accademies/applied/{userId}/{page}ë¡œ get ìš”ì²­

<br/>

**html**
``` html
<div>
    <div css={S.SContainer}>
        <div css={S.SInfo}>
            {type === "reject" && "ìŠ¹ì¸ ê±°ì ˆëœ í•™ì› ë“±ë¡ì…ë‹ˆë‹¤. ê±°ì ˆ ì‚¬ìœ ë¥¼ í™•ì¸í•œ í›„ ì¬ë“±ë¡ í•˜ì„¸ìš”."}
            {type === "awaiting" && "ìŠ¹ì¸ ëŒ€ê¸°ì¤‘ì¸ í•™ì› ë“±ë¡ì…ë‹ˆë‹¤. í•™ì› ìŠ¹ì¸ì€ 3ì¼ ì´ë‚´ ì™„ë£Œë©ë‹ˆë‹¤."}
        </div>
        {type === "reject" && 
            <>
                <div css={S.SNameContainer}>
                    <span css={S.SName}>
                        ê±°ì ˆ ì‚¬ìœ 
                    </span>
                </div>
                <div css={S.SRejectReason}>
                    {selectedAcademy.rejectReason}
                </div>
            </>
        }
        
        <div css={S.SNameContainer}>
            <span css={S.SName}>ì„ íƒëœ í•™ì›</span>
        </div>
        <div>
            <div css={S.SAcademyInfoBox}>
                <div><span>í•™ì› ë²ˆí˜¸</span><div>{selectedAcademy.acaAsnum}</div></div>
                <div><span>ì§€ì—­</span><div>{selectedAcademy.admstZoneNm}</div></div>
            </div>
            <div css={S.SAcademyInfoBox}>
                <div><span>í•™ì›ëª…</span><div>{selectedAcademy.acaNm}</div></div>
            </div>
        </div>
        <div css={S.SNameContainer}>
            <span css={S.SName}>ì‚¬ì „í™•ì¸ì„œë¥˜ ì œì¶œ</span>
        </div>
        {type === "reject" && 
            <>
                <FileUpload academyContent={academyContent} setAcademyContent={setAcademyContent}
                    uploadeFile={uploadeFile} setUploadeFile={setUploadeFile}/>
                <div css={S.SButtonContainer}>
                    <button css={S.SSubmitButton} onClick={handlesubmissionClick}>ì œì¶œ</button>
                </div>
            </>
        }
        {type === "awaiting" && <FileDownload selectedAcademy={selectedAcademy}/>}
    </div>
</div>
```
- propsë¡œ ë³´ë‚´ì¤€ typeì— ë”°ë¼ ê°ê°ì˜ ê¸°ëŠ¥ì„ ìˆ˜í–‰
- ìŠ¹ì¸ ê±°ì ˆ ìƒíƒœì´ë©´ íŒŒì¼ì„ ë‹¤ì‹œ ì—…ë¡œë“œí•´ ì œì¶œí•  ìˆ˜ ìˆê³ , ìŠ¹ì¸ ëŒ€ê¸° ìƒíƒœëŠ” ì œì¶œí–ˆë˜ íŒŒì¼ì„ ë‹¤ì‹œ ë‹¤ìš´ë¡œë“œ ë°›ì•„ë³¼ ìˆ˜ ìˆë‹¤.

<br/>

**ì œì¶œ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸**
```javascript
    const handlesubmissionClick = async () => {
        try {
            const option = {
                headers: {
                    Authorization: localStorage.getItem("accessToken")
                }
            }

            if(uploadeFile.idFile){
                if(academyContent.match === 'false' && uploadeFile.operationRegistrationFile === 0) {
                    alert("ì•„ì§ ì—…ë¡œë“œ ì¤‘ì…ë‹ˆë‹¤! ì ì‹œí›„ ì‹œë„í•´ì£¼ì„¸ìš”.");
                    return;
                }
                await instance.put("/academy/reapplied", academyContent, option);
                alert("ì—…ë¡œë“œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì‹ ì²­ì€ 3ì¼ ì´ë‚´ í™•ì¸ë©ë‹ˆë‹¤.");
            }
        } catch (error) {
            alert(error.response.data.sendFail);
        }
    }
```
- /academy/reappliedë¡œ ìƒˆë¡œ ì—…ë¡œë“œí•œ íŒŒì¼ì„ ë‹´ì•„ put ìš”ì²­

<br/>

---

<br/>

### **Back End**

**AcademyController**

``` java
    // ìŠ¹ì¸ ê±°ì ˆ í•™ì› ì¬ì‹ ì²­
    @ValidAop
    @PutMapping("/api/academy/reapplied")
    public ResponseEntity<?> updateAcademyRegist(@Valid @RequestBody AcademyRegistrationReqDto academyRegistrationReqDto, BindingResult bindingResult) {
        return ResponseEntity.ok(academyService.updateAcademyRegist(academyRegistrationReqDto));
    }

    // ì‹ ì²­ëœ í•™ì› ëª©ë¡ ë³´ê¸°
    @GetMapping("/api/academies/applied/{userId}/{page}")
    public ResponseEntity<?> getAppliedAcademies(@PathVariable int userId, @PathVariable int page) {
        return ResponseEntity.ok(academyService.getAppliedAcademies(userId, page));
    }

```
- í˜ì´ì§€ë„¤ì´ì…˜ì„ ìœ„í•´ PathVariableë¡œ page ë³€ìˆ˜ ë°›ì•„ì™€ì¤Œ.

<br/>

**AcademyService**

```java
    @Transactional(rollbackFor = Exception.class)
    public boolean updateAcademyRegist(AcademyRegistrationReqDto academyRegistrationReqDto) {
        AcademyRegistration academyRegistration = academyRegistrationReqDto.toAcademyRegist();

        return academyMapper.updateAcademyRegist(academyRegistration) > 0;
    }

    public AppliedAcademiesRespDto getAppliedAcademies(int userId, int page) {
        int index = (page - 1) * 5;

        List<AcademyRegistration> academyRegistrations = academyMapper.getAppliedAcademyRegistrations(userId, index);
        int listTotalCount = academyMapper.getAppliedAcademyCount(userId);

        return new AppliedAcademiesRespDto(academyRegistrations, listTotalCount);
    }
```


<br/>

**academy_mapper**

```xml
    <update id="updateAcademyRegist">
        update
            academy_registration_tb
        set
            approval_status = 0,
            business_registration_file = #{businessRegistrationFile},
            id_file = #{idFile},
            operation_registration_file =
            <choose>
                <when test='operationRegistrationFile==null or operationRegistrationFile.equals("")'>
                    null,
                </when>
                <otherwise>
                    #{operationRegistrationFile},
                </otherwise>
            </choose>
            reject_reason = null
        where
            ACADEMY_ID = #{academyId}
    </update>
    <select id="getAppliedAcademyRegistrations" resultMap="academyRegistrationMap" parameterType="map">
        select
            art.academy_registration_id,
            art.ACADEMY_ID,
            at.ACA_ASNUM,
            at.ACA_NM,
            at.ADMST_ZONE_NM,
            art.match,
            art.user_id,
            art.business_registration_file,
            art.id_file,
            art.operation_registration_file,
            art.approval_status,
            art.reject_reason
        from
            academy_registration_tb art
            left outer join academy_tb at on(at.ACADEMY_ID = art.ACADEMY_ID)
        where
            art.user_id = #{userId}
            and art.approval_status &lt; 1
        order by
            art.approval_status asc,
            art.academy_registration_id desc
        limit #{index}, 5
    </select>
```
- updateAcademyRegist : 
  - approval_statusë¥¼ -1 -> 0ìœ¼ë¡œ ì—…ë°ì´íŠ¸(ìŠ¹ì¸ ê±°ì ˆ -> ìŠ¹ì¸ ëŒ€ê¸° ìƒíƒœë¡œ ë³€ê²½)
  - fileë“¤ ì—…ë°ì´íŠ¸
  - ê±°ì ˆ ì‚¬ìœ  nullë¡œ ë¹„ì›Œì£¼ê¸°
- getAppliedAcademyRegistrations : 
  - approval_status < 1 -> ìŠ¹ì¸ ëŒ€ê¸°, ìŠ¹ì¸ ê±°ì ˆ í•™ì›ë“¤ë§Œ ì¡°íšŒ
  - approval_status ì˜¤ë¦„ì°¨ìˆœ -> ìŠ¹ì¸ ê±°ì ˆ ìƒíƒœì¸ í•™ì›ì´ ë¨¼ì € ë³´ì´ë„ë¡

<br/>

</details>
  
<details>
<summary>ë‚˜ì˜ ë¬¸ì˜</summary>

## FrontEnd

### AcademyInquiry
```javascript
const navigate = useNavigate();
const location = useLocation();
const queryParams = new URLSearchParams(location.search);
const academyId = queryParams.get('academyId');

const queryClient = useQueryClient();
const principal = queryClient.getQueryState("getPrincipal");

const [ academyData, setAcademyData ] = useState(); // í•™ì› ì •ë³´ ìƒíƒœ
const [ inquiryData, setInquiryData ] = useState({    // ë¬¸ì˜ ì •ë³´
    userId: "",
    academyId: "",
    inquiryTitle: "",
    inquiryContent: "",
    answerChecked: 0
});

useEffect(() => {
    setInquiryData({
        ...inquiryData,
        userId: principal.data.data.userId,
        academyId: academyId
    })
}, []);

<RootContainer>
    <div css={S.SLayout}>
        <h1 >ë¬¸ì˜ì‚¬í•­</h1>
        <div css={S.AcademyContainer}>
            í•™ì›ëª…: 
            <div>{academyData?.ACA_NM}</div>
        </div>
        <div css={S.InputContainer}>
            <input type="text" name='title' placeholder='ì œëª©' onChange={handleTitle}/>
            <textarea placeholder='ë¬¸ì˜ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!' style={{ resize: "none" }} name="" id="" cols="30" rows="10" onChange={handleContent}></textarea>
        </div>
        <div css={S.ButtonContainer}>
            <button onClick={InquiryButtonClick}>ë¬¸ì˜í•˜ê¸°</button>
        </div>
    </div>
</RootContainer>
```


í™•ì¸ í•˜ì§€ ì•Šì€ ë‹µë³€ì˜ ê°œìˆ˜ëŠ” StudentSidebarì˜ ì „ì—­ì—ì„œ ê´€ë¦¬(í•™ì›ê´€ë¦¬ìë„ ì“°ê¸° ë•Œë¬¸ì—)
```javascript
const [uncheckedAnswerCount, setUncheckedAnswerCount] = useState();

        <StudentSidebar
        uncheckedAnswerCount={uncheckedAnswerCount}
        setUncheckedAnswerCount={setUncheckedAnswerCount}
        />
```

### StudentSidebar
```javascript
<MyPageSidebar role={'í•™ìƒ'}>
    <div css={S.IconContainer}>
        <NavLink to='/account/mypage/like/1' activeClassName='active'>
            <div>
                <span>â¤ï¸</span>
                <span>ê´€ì‹¬ í•™ì› {likeCountOfMypage?.data?.data}ê°œ</span>
            </div>
        </NavLink>
        <NavLink to='/account/mypage/user' activeClassName='active'>
            <div>
                <span><AiFillSetting/></span>
                <span>ê°œì¸ ì •ë³´ ìˆ˜ì •</span>
            </div>
        </NavLink>
    </div>
    <div css={S.RoleContainer}>
        <NavLink to='/account/mypage/appliedacademy/1' activeClassName='active'>
            ğŸ—’ï¸ í•™ì› ì‹ ì²­ ëª©ë¡
        </NavLink>
        <NavLink to='/account/mypage/inquiry/1' activeClassName='active'>
            <div css={S.InquiryBox}>
                ğŸ“ ë‚˜ì˜ ë¬¸ì˜ 
                { uncheckedAnswerCount > 0 && <div>{uncheckedAnswerCount}</div>}
            </div>
        </NavLink>
        <NavLink to='/account/mypage/review/1' activeClassName='active'>
            ğŸ“œ ì‘ì„±í•œ í›„ê¸°
        </NavLink>
    </div>
</MyPageSidebar>
```
uncheckedAnswerCountê°€ 0ì¼ë•ŒëŠ” ë‚˜íƒ€ë‚˜ì§€ ì•Šë„ë¡ ì²˜ë¦¬
### MypageInquiry
```javascript
<div>
    <h2>ğŸ“ ë‚˜ì˜ ë¬¸ì˜</h2>
    <div>
        {getUserInquiryList.data.data.listTotalCount === 0 ? 
        <EmptyBox comment={"ì •ë³´ê°€ ê¶ê¸ˆí•œ í•™ì›ì— ë¬¸ì˜ë¥¼ ë‚¨ê²¨ë³´ì„¸ìš”!"} link={'/academy/find/1'} btn={"ë³´ëŸ¬ ê°€ê¸°"}/> : 
        <>
            <div css={S.SComment}>í•™ì›ì„ í´ë¦­í•´ì„œ ì‘ì„±í•œ ë¬¸ì˜ì™€ ë‹µë³€ì„ í™•ì¸í•´ë³´ì„¸ìš”! í™•ì¸ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì•Œë¦¼ì´ ì‚¬ë¼ì§‘ë‹ˆë‹¤.</div>
            <table css={GS.STable}>
                <tbody>
                    <tr>
                        <td>No</td>
                        <td>í•™ì›ëª…</td>
                        <td>ë¬¸ì˜ì‚¬í•­</td>
                        <td>ë‹µë³€</td>
                    </tr>
                    {!getUserInquiryList.isLoading && Array.isArray(getUserInquiryList?.data?.data.inquiries) && getUserInquiryList?.data?.data.inquiries.map(inquiry => {
                        const answerDisplay = inquiry.answer ? 'O' : 'X';
                        return  <tr key={inquiry.inquiryId} 
                                    onClick={() => handleInquiryOnClick(inquiry)} 
                                    style={{
                                        fontWeight: selectedInquiry === inquiry ? 'bold' : 'normal',
                                        color: inquiry.answerChecked === 1 ? 'red' : 'black', cursor: 'pointer'
                                    }}>
                                    <td>{inquiry.inquiryId}</td>
                                    <td>{inquiry.acaNm}</td>
                                    <td>{inquiry.inquiryTitle}</td>
                                    <td>{answerDisplay}</td>
                                </tr>
                    })}
                </tbody>
            </table>
            <Pagination totalCount={getUserInquiryList.data.data.listTotalCount}
                link={'/account/mypage/inquiry'}/>
            {!!selectedInquiry && 
                <SelectedInquiry 
                    selectedInquiry={selectedInquiry}  
                    setSelectedInquiry={setSelectedInquiry}
                    page={page}/>
            }
        </>}
    </div>
</div>
```
getUserInquiryListê°€ ë¹ˆê°’ ì¼ë•ŒëŠ” ë³´ëŸ¬ê°€ê¸° ë²„íŠ¼ì„ í†µí•´ í•™ì› ì°¾ê¸° í˜ì´ì§€ë¡œ ì´ë™ ê°€ëŠ¥

### SelectedInquiry
```javascript
<div css={S.SContainer}>
    <div css={S.SNameContainer}>
        <span css={S.SName}>ë¬¸ì˜ ë‚´ì—­</span>
        <div css={S.SAnswerStatusColor(selectedInquiry.answer)}>{selectedInquiry.answer !== null ? 'ë‹µë³€ ì™„ë£Œ' : 'ë‹µë³€ ëŒ€ê¸°ì¤‘'}</div>
    </div>
    <div>
        <div css={S.SInfoContainer}>
            <span>í•™ì›ëª…</span>
            <div>{selectedInquiry.acaNm}</div>
        </div>
        <div css={S.SInfoContainer}>
            <span>ì œëª©</span>
            <div>{selectedInquiry.inquiryTitle}</div>
        </div>
        <div css={S.SInfoContainer}>
            <span>ë‚´ìš©</span>
            <div>{selectedInquiry.inquiryContent}</div>
        </div>
    </div>
    {!!selectedInquiry.answer && 
        <div css={S.SInfoContainer}>
            <span>ë‹µë³€</span>
            <div>{selectedInquiry.answer}</div>
        </div>}
    <div css={S.SButtonContainer}>
        <button onClick={handleCheckButton}>í™•ì¸</button>
    </div>
</div>
```

***
- ì…ë ¥ë°›ì€ ê°’ ì²˜ë¦¬

### AcademyInquiry
```javascript
const handleTitle = (e) => {
    setInquiryData({
        ...inquiryData,
        inquiryTitle: e.target.value
    });
}

const handleContent = (e) => {
    setInquiryData({
        ...inquiryData,
        inquiryContent: e.target.value
    });
}
```
íƒ€ì´í‹€ê³¼ ë¬¸ì˜ë‚´ìš©ì´ ë‘˜ë‹¤ ì…ë ¥ë˜ì–´ì•¼ ë¬¸ì˜ ê°€ëŠ¥

### StudentSidebar
```javascript
<div css={S.InquiryBox}>
ğŸ“ ë‚˜ì˜ ë¬¸ì˜ 
{ uncheckedAnswerCount > 0 && <div>{uncheckedAnswerCount}</div>}
</div>
```
uncheckedAnswerCountëŠ” StudentSidebarê°€ ëœë”ë§ ë  ë•Œë§ˆë‹¤ ë¶ˆëŸ¬ì˜´ 

### MypageInquiry
```javascript
{!getUserInquiryList.isLoading && Array.isArray(getUserInquiryList?.data?.data.inquiries) && getUserInquiryList?.data?.data.inquiries.map(inquiry => {
    const answerDisplay = inquiry.answer ? 'O' : 'X';
    return  <tr key={inquiry.inquiryId} 
                onClick={() => handleInquiryOnClick(inquiry)} 
                style={{
                    fontWeight: selectedInquiry === inquiry ? 'bold' : 'normal',
                    color: inquiry.answerChecked === 1 ? 'red' : 'black', cursor: 'pointer'
                }}>
                <td>{inquiry.inquiryId}</td>
                <td>{inquiry.acaNm}</td>
                <td>{inquiry.inquiryTitle}</td>
                <td>{answerDisplay}</td>
            </tr>
})}
```
- ë‹µë³€ì„ í™•ì¸ í•˜ì§€ ì•Šì€ ë¬¸ì˜ëŠ” ê¸€ìë¥¼ ë¶‰ê²Œ í‘œì‹œ
- ë¬¸ì˜ë¥¼ ëˆ„ë¥´ë©´ ë¬¸ì˜ ìƒì„¸í˜ì´ì§€ê°€ í‘œ ì•„ë˜ì— ë‚˜íƒ€ë‚¨
- ì„ íƒëœ ë¬¸ì˜ëŠ” boldë¥¼ ì¨ì„œ ë‚˜íƒ€ëƒ„

### SelectedInquiry
```javascript
const handleCheckButton = () => {
    setSelectedInquiry(null);
    queryClient.invalidateQueries(['getUserInquiryList', page]);
}
```
í™•ì¸ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì„ íƒëœ ë¬¸ì˜ ì§€ìš°ê³  ë¦¬ìŠ¤íŠ¸ ë‹¤ì‹œ ë¸”ëŸ¬ì˜¤ê¸°

***

- ìš”ì²­
### AcademyInquiry
```javascript
// í•™ì› ì •ë³´ ê°€ì ¸ì˜¤ê¸°
const getAcademy = useQuery(["getAcademy"], async () => {
    try {
        const options = {
            params: {
                pIndex: 1,
                pSize: 1,
                ACADEMY_ID: academyId
            },
            headers: {
                Authorization: localStorage.getItem("accessToken")
            }
        }
        // api, optionsë¥¼ get ìš”ì²­
        return await instance.get("/academy", options);
    }catch (error) {
        console.error(error);
    }
},
{
    retry: 0,
    refetchOnWindowFocus: false,
    onSuccess: response => {
        setAcademyData(response.data.academy)
    }
})

// ë¬¸ì˜í•˜ê¸° ë²„íŠ¼ í´ë¦­
const InquiryButtonClick = async() => {
    // inquiryTitleê³¼ inquiryContentê°€ ë¹ˆê°’ì´ë‚˜ nullì¸ì§€ í™•ì¸
    if (!inquiryData.inquiryTitle || !inquiryData.inquiryContent) {
        // í•„ìˆ˜ ì…ë ¥ê°’ì´ ë¹„ì–´ìˆëŠ” ê²½ìš° ì²˜ë¦¬
        alert("ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        return;
    }

    const confirmed = window.confirm(`[${academyData.ACA_NM}]ì— ë¬¸ì˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`);
    if (confirmed) {
        const option = {
            headers: {
                Authorization: localStorage.getItem("accessToken")
            }
        }
        try {
            await instance.post("/inquiry", inquiryData, option);
            navigate("/account/mypage/inquiry/1");
        } catch (error) {
            console.error(error);
        }
    } else {
        return;
    }
}
```

### StudentSidebar
```javascript
// í™•ì¸í•˜ì§€ ì•Šì€ ë¬¸ì˜ ìˆ˜ ë¶ˆëŸ¬ì˜¤ê¸°
const getUncheckedAnswerCount = useQuery(['getUncheckedAnswerCount'], async () => {
    try {
        const option = {
            headers: {
                Authorization: localStorage.getItem("accessToken")
            }
        }
        return await instance.get(`/inquiry/${principal?.data?.data.userId}/UncheckedAnswerCount`, option)
    } catch (error) {
        console.error(error);
    }
},{
    retry: 0,
    refetchOnWindowFocus: false,
    onSuccess: (data) => {
        // uncheckedInquiryCount ê°’ì„ ê°€ì ¸ì™€ì„œ ìƒíƒœ ì—…ë°ì´íŠ¸
        setUncheckedAnswerCount(data.data);
    }
})
```

### MypageInquiry
```javascript
// ì‚¬ìš©ìê°€ ì‘ì„±í•œ ë¬¸ì˜ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
const getUserInquiryList = useQuery(['getUserInquiryList', page], async () => {
    try {
        const option = {
            headers: {
                Authorization: localStorage.getItem("accessToken")
            }
        }
        return await instance.get(`/student/inquiries/${principal.data.data.userId}/${page}`,option)
    } catch (error) {
        console.error(error);
    }
}, {
    retry: 0,
    refetchOnWindowFocus: false,
    onSuccess: (data) => {
        setSelectedInquiry(null);
        // uncheckedInquiryCount ê°’ì„ ê°€ì ¸ì™€ì„œ ìƒíƒœ ì—…ë°ì´íŠ¸
        setUncheckedAnswerCount(data.data.uncheckedInquiryCount); 
    }
})

// ë¬¸ì˜ ì„ íƒ
const handleInquiryOnClick = async (inquiry) => {
    // ë§Œì•½ answerCheckedê°€ 1ì´ë©´ ì„œë²„ì— ì—…ë°ì´íŠ¸ ìš”ì²­ì„ ë³´ëƒ„
    if (inquiry.answerChecked === 1) {
        try {
            const option = {
                headers: {
                    Authorization: localStorage.getItem("accessToken")
                }
            };
            // ì„œë²„ì— ì—…ë°ì´íŠ¸ ìš”ì²­
            await instance.put(`/inquiry/${inquiry.inquiryId}/updateAnswerChecked?answerChecked=0`, null, option);
            setSelectedInquiry(inquiry);
        } catch (error) {
            console.error(error);
        }
    } else {
        // answerCheckedê°€ 0ì´ë©´ ê·¸ëƒ¥ ì„ íƒë§Œ í•¨
        setSelectedInquiry(inquiry);
    }
};
```
- ì‚¬ìš©ìê°€ ì‘ì„±í•œ ë¬¸ì˜ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°(ì •ë³´ë¥¼ ì „ë¶€ ê°€ì ¸ì˜¨ë‹¤ -> ì„ íƒëœ ë¬¸ì˜ì— ëŒ€í•œ ìš”ì²­ì„ ë”°ë¡œ ë‚ ë¦¬ì§€ ì•ŠìŒ)
- ë¬¸ì˜ ì„ íƒ ì‹œ ë‹µë³€ í™•ì¸ ì—…ë°ì´íŠ¸(answer_checkedê°€ 1ì¼ë•Œë§Œ ì‹¤í–‰)

## BackEnd

### InquiryController
```java
public class InquiryController {

    private final InquiryService inquiryService;

    // ë¬¸ì˜ ì‘ì„±
    @PostMapping("/api/inquiry")
    public ResponseEntity<?> writeInquiry(@Valid @RequestBody WriteInquiryReqDto inquiryReqDto, BindingResult bindingResult) {
        return ResponseEntity.ok(inquiryService.writeInquiry(inquiryReqDto));
    }

    // ì‚¬ìš©ì(í•™ìƒ)ê°€ ì‘ì„±í•œ í›„ê¸° ê°€ì ¸ì˜¤ê¸°
    @GetMapping("/api/student/inquiries/{userId}/{page}")
    public ResponseEntity<?> getUserInquiryList(@PathVariable int userId,
                                                @PathVariable int page) {
        return ResponseEntity.ok(inquiryService.getUserInquiries(userId, page));
    }

    // ë‹µë³€ì´ ë‹¬ë¦° ë¬¸ì˜ í™•ì¸
    @PutMapping("/api/inquiry/{inquiryId}/updateAnswerChecked")
    public ResponseEntity<?> updateAnswerChecked(@PathVariable int inquiryId, @RequestParam int answerChecked) {
        return ResponseEntity.ok(inquiryService.updateAnswerChecked(inquiryId, answerChecked));
    }

    // ë‹µì´ ë‹¬ë ¸ì§€ë§Œ í™•ì¸í•˜ì§€ ì•Šì€ ë¬¸ì˜ ìˆ˜ ê°€ì ¸ì˜¤ê¸°
    @GetMapping("/api/inquiry/{userId}/UncheckedAnswerCount")
    public ResponseEntity<?> getUncheckedAnswerCount(@PathVariable int userId) {
        return ResponseEntity.ok(inquiryService.getuncheckedAnswerCount(userId));
    }

}
```

### InquiryService

```java
public class InquiryService {
    private final InpuiryMapper inpuiryMapper;

    @Transactional(rollbackFor = Exception.class)
    public boolean writeInquiry(WriteInquiryReqDto inquiryReqDto) {
        Inquiry inquiry = inquiryReqDto.toInquiry();
        return inpuiryMapper.saveInpuiry(inquiry) > 0;
    }

    public UserInquiriesRespDto getUserInquiries(int userId, int page) {
        int index = (page - 1) * 5;

        List<Inquiry> inquiries = inpuiryMapper.getUserInquiries(userId, index);
        int listTotalCount = inpuiryMapper.getUserInquiriesCount(userId);
        int uncheckedInquiryCount = inpuiryMapper.getUncheckedInquiry(userId);

        return new UserInquiriesRespDto(inquiries, listTotalCount, uncheckedInquiryCount);
    }

    public boolean updateAnswerChecked(int inquiryId, int answerChecked) {
        return  inpuiryMapper.updateAnswerChecked(inquiryId, answerChecked)> 0;
    }

    public int getuncheckedAnswerCount(int userId) {
        return inpuiryMapper.getUncheckedInquiry(userId);
    }
}

```

### repository-InpuiryMapper
```java
@Mapper
public interface InpuiryMapper {
    public int saveInpuiry(Inquiry inquiry);
    public int getUserInquiriesCount(int userId);
    public List<Inquiry> getUserInquiries(int userId, int index);
    public int updateAnswerChecked(int inquiryId, int answerChecked);
    public int getUncheckedInquiry(int userId);
}
```
updateAnswerCheckedëŠ” answer_checkedë¥¼ ë¬´ì¡°ê±´ 0ìœ¼ë¡œ ë°”ê¾¼ë‹¤

### inpuiry_mapper
```xml
<mapper namespace="com.aws.compass.repository.InpuiryMapper">
    <resultMap id="getUserInquiryMap" type="com.aws.compass.entity.Inquiry">
        <id property="inquiryId" column="inquiry_id"></id>
        <result property="acaNm" column="ACA_NM"></result>
        <result property="inquiryTitle" column="inquiry_title"></result>
        <result property="inquiryContent" column="inquiry_content"></result>
        <result property="answer" column="answer"></result>
        <result property="answerChecked" column="answer_checked"></result>
    </resultMap>

    <insert id="saveInpuiry" parameterType="com.aws.compass.entity.Inquiry">
        insert into inquiry_tb
        value(0, #{userId}, #{academyId}, #{inquiryTitle}, #{inquiryContent}, #{answer}, #{answerChecked})
    </insert>

    <update id="updateAnswerChecked">
        update inquiry_tb
        set
            answer_checked = #{answerChecked}
        where
            inquiry_id = #{inquiryId}
    </update>

    <select id="getUserInquiries" resultMap="getUserInquiryMap">
        SELECT
            it.inquiry_id,
            at.ACA_NM,
            it.inquiry_title,
            it.inquiry_content,
            it.answer,
            it.answer_checked
        FROM
            inquiry_tb it
            LEFT OUTER JOIN academy_tb at ON (at.ACADEMY_ID = it.ACADEMY_ID)
        WHERE
            user_id = #{userId}
        ORDER BY
            it.inquiry_id DESC
        LIMIT #{index}, 5
    </select>

    <select id="getUserInquiriesCount" resultType="java.lang.Integer">
        select
            count(*)
        FROM
            inquiry_tb it
            left outer join academy_tb at on(at.ACADEMY_ID = it.ACADEMY_ID)
        WHERE
            user_id = #{userId}
    </select>

    <select id="getUncheckedInquiry" resultType="java.lang.Integer">
        SELECT
            count(*)
        FROM
            inquiry_tb it
            LEFT OUTER JOIN academy_tb at ON (at.ACADEMY_ID = it.ACADEMY_ID)
        WHERE
            user_id = #{userId}
            and answer_checked = 1
    </select>
</mapper>
```
ë¬¸ì˜ê°€ ì‘ì„±ë ë•Œ answer_checked = 0, ë‹µë³€ì´ ë‹¬ë¦´ë•Œ answer_checked = 1, ë‹µë³€ì„ í™•ì¸í–ˆì„ ë•Œ answer_checked  = 0ì´ ëœë‹¤
</details>
  
<details>
<summary>ì‘ì„±í•œ í›„ê¸°</summary>
</details>

<br/>


### **í•™ì› ê´€ë¦¬ì ë§ˆì´í˜ì´ì§€**
<details>
<summary>ë‚˜ì˜ í•™ì›</summary>

![ë‚˜ì˜ í•™ì›ì •ë³´ ìˆ˜ì •](https://github.com/KoreaIt-J-23-2-2/compass_front/assets/137989664/38ecf768-96e3-472e-b5ff-eaf65702c3fc)

<br/>

ìŠ¹ì¸ëœ ë‚˜ì˜ í•™ì› ëª©ë¡ì„ ë³´ê³  í•™ì› ìƒì„¸ ì •ë³´ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥

---

<br/>

**html - ë‚˜ì˜ í•™ì› ì„ íƒ**

```html
<h2>ğŸ’ ë‚˜ì˜ í•™ì›</h2>
<div>
    {getMyAcademies.data.data.listTotalCount === 0 ? 
    <EmptyBox comment={<>ë‚˜ì˜ í•™ì›ì´ ì—†ìŠµë‹ˆë‹¤! <br />í•™ì›ì„ ë“±ë¡í•˜ê³  ìŠ¹ì¸ ë°›ì•„ ë‚˜ì˜ í•™ì› ì •ë³´ë¥¼ ë“±ë¡í•´ë³´ì„¸ìš”!</>}
        link={'/academy/regist'} btn={"ë“±ë¡í•˜ê¸°"}/> :
    <>
        <div css={S.SComment}>ë‚˜ì˜ <span>í•™ì› ì •ë³´ë¥¼ ìˆ˜ì •</span>í•´ë³´ì„¸ìš”! í•™ì›ëª…ì„ í´ë¦­í•˜ë©´ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.</div>
        <table css={GS.STable}>
            <tbody>
                <tr>
                    <td>í•™ì› ë²ˆí˜¸</td>
                    <td>í•™ì›ëª…</td>
                    <td>í•™ì› ì„ íƒ</td>
                </tr>
                { getMyAcademies?.data?.data.academyRegistrations.map(academy => {
                    return  <tr key={academy.academyRegistrationId} 
                                style={{ fontWeight: selectedAcademy === academy ? 'bold' : 'normal'}}>
                                <td>{academy.acaAsnum}</td>
                                <td css={S.SAcaNm} onClick={()=> {navigate(`/academy/info/1?ACADEMY_ID=${academy.academyId}`)}}>{academy.acaNm}</td>
                                <td>
                                    <button css={GS.SButton} onClick={(e) => handleAcademyOnClick(e, academy)}>
                                        {selectedAcademy === academy ? 'ì„ íƒ í•´ì œ' : 'ì„ íƒ'}
                                    </button>
                                </td>
                            </tr>
                })}
            </tbody>
        </table>
        <Pagination totalCount={getMyAcademies?.data?.data?.listTotalCount}
            link={`/account/mypage/myacademy`} />
        <div>
            {selectAcademyInfoOpen && !!selectedAcademy && <DetailMyAcademy selectedAcademy={selectedAcademy}/>}
        </div>
    </> }
</div> 
```
- ìŠ¹ì¸ëœ ë‚˜ì˜ í•™ì› ëª©ë¡ ë„ì›Œì¤Œ
- í•™ì› ì„ íƒì‹œ í•™ì› ì •ë³´ ìˆ˜ì • ì°½ ë„ì›Œì¤Œ

<br/>

**ë‚˜ì˜ í•™ì› ë¶ˆëŸ¬ì˜¤ê¸°**

```javascript
    const getMyAcademies = useQuery(["getMyAcademies", page], async () => {
        const option = {
            headers: {
                Authorization: localStorage.getItem("accessToken")
            }
        }
        return await instance.get(`/academies/${principal.data.data.userId}/${page}`, option);
    }, {
        refetchOnWindowFocus: false,
        onSuccess: () => {
            setSelectedAcademy(null);
        }
    })
```
- /academies/{userId}/{page}ë¡œ get ìš”ì²­

<br/>

---

<br/>

**html - í•™ì› ìƒì„¸ ì •ë³´ ê°€ì ¸ì˜¤ê¸°**

```html
<div>
    <div css={S.STitleBox}>
        <span>í•™ì› ì •ë³´</span>
    </div>
    <div css={S.SImgBox}>
        ë¡œê³  ì´ë¯¸ì§€
        <div>
            <img src={newAcademyDetailInfo.academyInfo.logoImg} alt="" />
            <input type="file" onChange={handleImgInputChange}/>
            {logoImgProgressPercent != 0 && logoImgProgressPercent != 100 && 
                <Line percent={logoImgProgressPercent} strokeWidth={2} strokeColor="#67dce2" trailColor="#D3D3D3"/>
            }
        </div>
    </div>
    <div css={S.SInfoBox}>ìˆ˜ê°• ì¸ì›<input type="text" name="classSize" value={newAcademyDetailInfo?.academyInfo?.classSize || ""} onChange={handleInfoInputChange}/></div>
    <div css={S.SInfoBox}>ìˆ˜ê°• ê¸°ê°„<input type="text" name="coursePeriod" value={newAcademyDetailInfo?.academyInfo?.coursePeriod || ""} onChange={handleInfoInputChange}/></div>
    <div css={S.SInfoBox}>ìˆ˜ê°• ëª©ì <input type="text" name="purpose" value={newAcademyDetailInfo?.academyInfo?.purpose || ""} onChange={handleInfoInputChange}/></div>
    <div css={S.SInfoBox}>í™ˆí˜ì´ì§€<input type="text" name="homePage" value={newAcademyDetailInfo?.academyInfo?.homePage || ""} onChange={handleInfoInputChange}/></div>
    <div css={S.SInfoBox}>í•™ì› ì „í™”ë²ˆí˜¸<input type="text" name="phone" value={newAcademyDetailInfo?.academyInfo?.phone || ""} onChange={handleInfoInputChange}/></div>
</div>
```
- ë¡œê³  ì´ë¯¸ì§€, ìˆ˜ê°• ì¸ì›, ìˆ˜ê°• ê¸°ê°„ ë“±ì˜ ìƒì„¸ ì •ë³´ë¥¼ ì…ë ¥í•˜ëŠ” ë¶€ë¶„


<br/>

**í•™ì› ì •ë³´ ê°€ì ¸ì˜¤ëŠ” ê¸°ëŠ¥**
```javascript
    // í•™ì› ì •ë³´ ê°€ì ¸ì˜¤ê¸°
    const getAcademy = useQuery(["getAcademy", selectedAcademy], async () => {
        try {
            const options = {
                params: {
                    pIndex: 1,
                    pSize: 1,
                    ACADEMY_ID: selectedAcademy.academyId
                },
                headers: {
                    Authorization: localStorage.getItem("accessToken")
                }
            }
            // api, optionsë¥¼ get ìš”ì²­
            return await instance.get("/academy", options);
        }catch (error) {
            console.error(error);
        }
    },
    {
        retry: 0,
        refetchOnWindowFocus: false,
        onSuccess: response => {
            setAcademyDetailInfo({
                "academyInfo": response.data.academyInfo ? response.data.academyInfo : academyInfo,
                "age": response.data.age,
                "convenience": response.data.convenience,
                "classInfo": response.data.classInfo
            });
            setNewAcademyDetailInfo({
                "academyInfo": !!response.data.academyInfo ? response.data.academyInfo : academyInfo,
                "age": response.data.age,
                "convenience": response.data.convenience,
                "classInfo": response.data.classInfo
            });

            setSelectedAgeOptions(response.data.age.map(option => {
                return { value: option.ageId, label: option.ageRange }
            }));
            setSelectedConvenienceOptions(response.data.convenience.map(option => {
                return { value: option.convenienceId, label: option.convenienceName }
            }));

            setTableData(
                response.data.classInfo.map((classItem, index) => ({
                    id: index + 1,
                    classInfoId: classItem.classInfoId,
                    className: classItem.className,
                    classPrice: classItem.classPrice
                }))
            );
        }
    })
```
- ì´ì „ AcademyDetailInfoì™€ ìƒˆë¡œìš´ NewAcademyDetailInfoë¥¼ ê°€ì ¸ì˜¨ë‹¤.
- selectedAgeOption, selectedConvenienceOptionì„ ê°€ì ¸ì™€ì¤€ë‹¤. (ì²´í¬ë°•ìŠ¤ì—ì„œ ì„ íƒëœ ì˜µì…˜ ì„¤ì •)
- tableDataì— classInfoë¥¼ ê°€ì ¸ì™€ ì¤€ë‹¤.

<br/>


**ë¡œê³  ì´ë¯¸ì§€ ì—…ë¡œë“œ í•¨ìˆ˜**
```javascript
    const handleImgInputChange = (e) => {
        const file = e.target.files[0];
        //firebaseì— ì €ì¥
        const storageRef = ref(storage, `logoImg/${selectedAcademy.academyId}/logoImg.jpg`);    // í•´ë‹¹ íŒŒì¼ì˜ ì´ë¦„ìœ¼ë¡œ firebaseì˜ storageì— ì €ì¥ë¨
        const uploadTask = uploadBytesResumable(storageRef, file);        // íŒŒì¼ ì—…ë¡œë“œê°€ ì‹¤í–‰ë¨
        uploadTask.on(          //ì—…ë¡œë“œê°€ ì‹œì‘ë˜ë©´
            "state_changed",    //íŒŒì¼ì´ ë³€ê²½ë˜ê³  ìˆì„ ë•Œ
            (snapshot) => {     //íŒŒì¼ ì—…ë¡œë“œ ëŒ€ê¸° ì¤‘ í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì ìš©í•  ë•Œ ì‚¬ìš©
                // ì¦ê°€í•˜ëŠ” %ê°€ ë“¤ì–´ìˆìŒ
                setLogoImgProgressPercent(Math.round((snapshot.bytesTransferred / snapshot.totalBytes) * 100));
            },
            (error) => {        //ì—…ë¡œë“œ ì‹¤íŒ¨í•  ê²½ìš°
                console.error(error);
            },
            () => { //ì—…ë¡œë“œê°€ ì™„ë£Œë˜ì—ˆì„ ê²½ìš°
                getDownloadURL(storageRef).then(downloadUrl => {    //ë°©ê¸ˆì „ ì„±ê³µí•œ ì—…ë¡œë“œ ê²½ë¡œë¥¼ ê°€ì ¸ì˜´
                    setNewAcademyDetailInfo({
                        ...newAcademyDetailInfo, 
                        "academyInfo": {
                            ...newAcademyDetailInfo.academyInfo,
                            "logoImg": downloadUrl
                        }
                    });
                })
            }
        )
    }
```
- íŒŒì´ì–´ë² ì´ìŠ¤ì— íŒŒì¼ì„ ì—…ë¡œë“œ í•˜ê³  ì—…ë¡œë“œëœ ê²½ë¡œë¥¼ ê°€ì ¸ì™€ newAcademyDetailInfo ê°ì²´ì— ì—…ë°ì´íŠ¸ í•œë‹¤.



<br/>

---

<br/>

**html - ìˆ˜ê°• ì—°ë ¹, ì‹œì„¤ ë° í¸ì˜ì‚¬í•­ ì²´í¬ë°•ìŠ¤**


```html
<div>
    <div css={S.STitleBox}>
        <span>ìˆ˜ê°• ì—°ë ¹</span>
    </div>
    <div css={S.SCheckBox}>
    {!ageOptions.isLoading && ageOptions?.map((option) => (
        <div key={option.value}>
            <input
                type="checkbox"
                checked={selectedAgeOptions.some((selectedOption) => selectedOption.value === option.value)}
                onChange={() => handleCheckboxChange(option, 'age')}
            />
            {option.label}
        </div>
    ))}
    </div>
</div>
<div>
    <div css={S.STitleBox}>
        <span>ì‹œì„¤ ë° í¸ì˜ì‚¬í•­</span>
    </div>
    <div css={S.SCheckBox}>
    {!convenienceOptionsState.isLoading && convenienceOptions?.map((option) => (
        <div key={option.value}>
            <input
                type="checkbox"
                checked={selectedConvenienceOptions.some((selectedOption) => selectedOption.value === option.value)}
                onChange={() => handleCheckboxChange(option, 'convenience')}
            />
            {option.label}
        </div>
    ))}
    </div>
</div>
```
- ìˆ˜ê°• ì—°ë ¹, ì‹œì„¤ ë° í¸ì˜ì‚¬í•­ì€ ì²´í¬ë°•ìŠ¤ë¡œ ê°€ì ¸ì™€ selectedOptionìœ¼ë¡œ ì´ì „ì— ìˆë˜ í•­ëª©ì€ ì²´í¬ë˜ë„ë¡ í•œë‹¤. 

<br/>

**ì˜µì…˜ ê°€ì ¸ì˜¤ëŠ” ê¸°ëŠ¥**
```javascript
    const ageOptionsState = useQuery(["ageOptionsState"], async () => {
        try {
            return await instance.get("/option/ages");
        } catch(error) {
            console.error(error);
        }
    },
    {
        retry: 0,
        refetchOnWindowFocus: false,
        onSuccess: response => {
            setAgeOptions(response.data.map(option => {
                return { value: option.ageId, label: option.ageRange }
            }))
        }
    });

    const convenienceOptionsState = useQuery(["convenienceOptionsState"], async () => {
        try {
            return await instance.get("/option/conveniences");
        }catch(error) {
            console.error(error);
        }
    },
    {
        retry: 0,
        refetchOnWindowFocus: false,
        onSuccess: response => {
            setConvenienceOptions(response.data.map(option => {
                return { value: option.convenienceId, label: option.convenienceName }
            }))
        }
    });
```
- ageOptionê³¼ convenienceOptionì„ ê°€ì ¸ì˜¨ë‹¤.

<br/>

**ì²´í¬ë°•ìŠ¤ OnChange í•¨ìˆ˜**


```javascript
    const handleCheckboxChange = (option, optionType) => {
        const optionId = option.value;
        const optionName = option.label;
    
        if (optionType === 'age') {
            const updatedSelectedOptions = selectedAgeOptions.map(({ value }) => value).includes(optionId)
                ? selectedAgeOptions.filter(({ value }) => value !== optionId)
                : [...selectedAgeOptions, { value: optionId, label: optionName }];
            setSelectedAgeOptions(updatedSelectedOptions);
    
            setNewAcademyDetailInfo((prev) => ({
                ...prev,
                age: updatedSelectedOptions.map(({ value, label }) => ({ ageId: value, ageRange: label })),
            }));
        } else {
            const updatedSelectedOptions = selectedConvenienceOptions.map(({ value }) => value).includes(optionId)
                ? selectedConvenienceOptions.filter(({ value }) => value !== optionId)
                : [...selectedConvenienceOptions, { value: optionId, label: optionName }];
    
            setSelectedConvenienceOptions(updatedSelectedOptions);
    
            setNewAcademyDetailInfo((prev) => ({
                ...prev,
                convenience: updatedSelectedOptions.map(({ value, label }) => ({ convenienceId: value, convenienceName: label })),
            }));
        }
    };
```
- optionTypeì— ë”°ë¼ selectedOptions, newAcademyDetailInfoë¥¼ ì—…ë°ì´íŠ¸ í•´ì¤€ë‹¤.
- mapì„ í†µí•´ valueê°€ optionIdë¥¼ í¬í•¨í•œë‹¤ë©´(ì²´í¬ë¼ìˆë˜ ê±¸ í•´ì œ) filterë¡œ selectedOptionsì—ì„œ ì œê±°í•´ì£¼ê³ , í¬í•¨í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´(ì²´í¬ë¼ìˆì§€ ì•Šë˜ ê±¸ ì²´í¬) selectedOptionsì— ì¶”ê°€í•´ì¤€ë‹¤.

<br/>

---

<br/>

**html - í•™ì› ìˆ˜ì—… ì •ë³´ í‘œ**
```html
<div css={S.SClassBox}>
    <div css={S.STitleBox}>
        <span>í•™ì› ìˆ˜ì—… ì •ë³´</span>
        <button onClick={addRow} css={GS.SButton}>ì¶”ê°€</button>
    </div>
    {tableData.length < 1 ? <div css={S.SEmpty}>ìˆ˜ì—… ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ì¶”ê°€ ë²„íŠ¼ì„ ëˆŒëŸ¬ ìˆ˜ì—… ì •ë³´ë¥¼ ì¶”ê°€í•´ë³´ì„¸ìš”!</div> : 
    <table css={GS.STable}>
        <tbody>
            <tr>
                <th>ë²ˆí˜¸</th>
                <th>ê³¼ì •ëª…</th>
                <th>ê°€ê²©</th>
                <th>ê³¼ì • ì‚­ì œ</th>
            </tr>
        {tableData.map((row) => (
            <tr key={row.id}>
                <td>{row.id}</td>
                <td>
                    <input type="text"
                        value={row.className}
                        onChange={(e) => handleClassInputChange(row.id, 'className', e.target.value)}/>
                </td>
                <td>
                    <input type="text"
                        value={row.classPrice}
                        onChange={(e) => handleClassInputChange(row.id, 'classPrice', e.target.value)}/>
                </td>
                <td>
                    <button onClick={() => handleDeleteRow(row.id)} css={GS.SButton}>ì‚­ì œ</button>
                </td>
            </tr>
        ))}
        </tbody>
    </table>}
</div>
```
- í‘œì—ì„œ ì¶”ê°€, ì‚­ì œ ë²„íŠ¼ìœ¼ë¡œ í–‰ì„ ì‚½ì…, ì‚­ì œ í•  ìˆ˜ ìˆë‹¤.

<br/>


**ìˆ˜ì—… ì •ë³´ í‘œ í–‰ ì¶”ê°€, ì‚­ì œ, ì…ë ¥ í•¨ìˆ˜**

``` javascript
    const addRow = () => {
        setTableData([
            ...tableData,
            { id: tableData.length + 1, classInfoId: '', className: '', classPrice: '' },
        ]);
    };

    const handleDeleteRow = (id) => {
        const updatedTableData = tableData.filter((row) => row.id !== id);
        // ë‹¤ì‹œ ë²ˆí˜¸ ë§¤ê¸°ê¸°
        const renumberedTableData = updatedTableData.map((row, index) => ({
          ...row,
          id: index + 1,
        }));
        setTableData(renumberedTableData);

        // ì‚­ì œëœ ë°ì´í„°ë¥¼ newAcademyDetailInfoì—ì„œë„ ì œê±°
        const updatedClassInfo = renumberedTableData.map((row) => ({
            className: row.className,
            classPrice: row.classPrice,
        }));

        setNewAcademyDetailInfo((prev) => ({
            ...prev,
            classInfo: updatedClassInfo,
        }));
    };

    const handleClassInputChange = (id, fieldName, value) => {
        const updatedTableData = tableData.map((row) =>
            row.id === id ? { ...row, [fieldName]: value } : row
        );
        setTableData(updatedTableData);
    
        const updatedClassInfo = updatedTableData.map((row) => ({
            className: row.className,
            classPrice: row.classPrice,
        }));
    
        setNewAcademyDetailInfo((prev) => ({
            ...prev,
            classInfo: updatedClassInfo,
        }));
    };  
```
- addRow : í–‰ì„ ì‚½ì…í•˜ëŠ” í•¨ìˆ˜, idë¥¼ tableDataì˜ í¬ê¸°ë³´ë‹¤ í•˜ë‚˜ í° ê°’ìœ¼ë¡œ ë‘ê³  ë‚˜ë¨¸ì§€ ë°ì´í„°ë¥¼ ë¹ˆ ê°’ìœ¼ë¡œ ë„£ì–´ì¤€ë‹¤.
- handleDeleteRow : 
  - ì‚­ì œ ë²„íŠ¼ì„ í´ë¦­í•œ í–‰ì˜ idë¥¼ filterë¡œ ì‚­ì œ
  - ì• ë²ˆí˜¸ê°€ ì‚­ì œë˜ë©´ idê°€ ì¤‘ë³µë  ìˆ˜ ìˆì–´ ë‹¤ì‹œ ë²ˆí˜¸ë¥¼ ë§¤ê²¨ì¤€ë‹¤.
  - newAcademyDetailInfoì—ì„œë„ ì‚­ì œ
- handleClassInputChange : tableDataì™€ newAcademyDetailInfo ì—…ë°ì´íŠ¸ í•´ì¤€ë‹¤.


<br/>

---

<br/>

**ìˆ˜ì •í•˜ê¸° ë²„íŠ¼ ì´ë²¤íŠ¸**


``` javascript
    const handleEditBtnClick = async () => {
        try {
            const isAnyFieldEmpty = tableData.some((row) => !row.className || !row.classPrice);

            if (isAnyFieldEmpty) {
                alert('ìˆ˜ì—… ê³¼ì •ì— ë¹ˆ ê°’ì´ ì—†ë„ë¡ ëª¨ë‘ ì…ë ¥í•˜ì„¸ìš”!');
                return;
            }

            const option = {
                headers: {
                    Authorization: localStorage.getItem("accessToken")
                }
            }
            
            if(JSON.stringify(newAcademyDetailInfo) !== JSON.stringify(academyDetailInfo)) {    // ê¸°ì¡´ academyInfoì™€ ë‹¬ë¼ì¡Œì„ ë•Œë§Œ ìˆ˜ì •
                await instance.put("/academy", newAcademyDetailInfo, option);
            }
            alert("ìˆ˜ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
            getAcademy.refetch();
        } catch (error) {
            alert("ìˆ˜ì • ì˜¤ë¥˜");
            console.error(error);
        }
    }
```
- ìˆ˜ì—… ê³¼ì •ì— ìˆ˜ì—…ëª…ì´ë‚˜ ê°€ê²©ì´ ë¹„ì–´ ìˆìœ¼ë©´ ìˆ˜ì—… ê³¼ì •ì— ë¹ˆ ê°’ì´ ì—†ë„ë¡ í•˜ë¼ëŠ” ì•Œë¦¼
- ê¸°ì¡´ academyDetailInfoì™€ ë‹¤ë¥¼ ë•Œë§Œ /academyë¡œ put ìš”ì²­
- academy_info_tbì—ëŠ” í•™ì›ì´ ë“±ë¡ ë  ë•Œ ë‚´ìš©ì´ null ê°’ìœ¼ë¡œ insertë˜ëŠ” íŠ¸ë¦¬ê±°ê°€ ìˆìœ¼ë¯€ë¡œ ë¬´ì¡°ê±´ put ìš”ì²­ë§Œ í•˜ë©´ ëœë‹¤.

<br/>

---

<br/>

### Back End

**AcademyController**


```java
    // ë‚˜ì˜ í•™ì›ë³´ê¸°
    @GetMapping("/api/academies/{userId}/{page}")
    public ResponseEntity<?> getMyAcademies(@PathVariable int userId, @PathVariable int page) {
        return ResponseEntity.ok(academyService.getMyAcademies(userId, page));
    }

    // í•™ì› ì •ë³´ ìˆ˜ì •
    @PutMapping("/api/academy")
    public ResponseEntity<?> editAcademyInfo(@RequestBody EditAcademyInfoReqDto editAcademyInfoReqDto) {
        return ResponseEntity.ok(academyService.editAcademyInfo(editAcademyInfoReqDto));
    }
```



<br/>

**AcademyService**


```java
    public MyAcademiesRespDto getMyAcademies(int userId, int page) {
        int index = (page - 1) * 5;

        List<AcademyRegistration> academyRegistrations = academyMapper.getMyAcademyRegistrations(userId, index);
        int listTotalCount = academyMapper.getMyAcademyCount(userId);

        return new MyAcademiesRespDto(academyRegistrations, listTotalCount);
    }

    @Transactional(rollbackFor = Exception.class)
    public boolean editAcademyInfo(EditAcademyInfoReqDto editAcademyInfoReqDto) {
        AcademyInfo academyInfo = editAcademyInfoReqDto.getAcademyInfo();
        academyMapper.updateAcademyInfo(academyInfo);

        List<Age> ages = editAcademyInfoReqDto.getAge();
        academyMapper.deleteAge(academyInfo.getAcademyInfoId());
        ages.forEach(age -> {
            academyMapper.insertAge(academyInfo.getAcademyInfoId(), age.getAgeId());
        });

        List<Convenience> conveniences = editAcademyInfoReqDto.getConvenience();
        academyMapper.deleteConvenience(academyInfo.getAcademyInfoId());
        conveniences.forEach(convenience -> {
            academyMapper.insertConvenience(academyInfo.getAcademyInfoId(), convenience.getConvenienceId());
        });

        List<ClassInfo> classInfos = editAcademyInfoReqDto.getClassInfo();
        academyMapper.deleteClassInfo(academyInfo.getAcademyInfoId());
        classInfos.forEach(classInfo -> {
            academyMapper.insertClassInfo(academyInfo.getAcademyInfoId(), classInfo);
        });
        return true;
    }
```
- academy_info_tbì˜ í•™ì› ìƒì„¸ ì •ë³´ë“¤ ì—…ë°ì´íŠ¸
- ìˆ˜ì—… ì—°ë ¹, í¸ì˜ ì‹œì„¤, ìˆ˜ì—… ì •ë³´ëŠ” í•œ í•™ì›ë‹¹ ì—¬ëŸ¬ ê°œê°€ ìˆê¸° ë•Œë¬¸ì— ì—…ë°ì´íŠ¸ê°€ ê¹Œë‹¤ë¡œì›Œ í•´ë‹¹ í•™ì›ì˜ ë°ì´í„°ë¥¼ ëª¨ë‘ ì‚­ì œí•œ í›„ ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ insert í•˜ëŠ” ë°©ë²•ì„ ì‚¬ìš©í•˜ì˜€ë‹¤.
- ë°°ì—´ë¡œ ì •ë³´ë“¤ì„ ë°›ì•„ì™€ì„œ forEachë¡œ í•˜ë‚˜ì”© insertí•´ì£¼ì—ˆë‹¤.


<br/>

**academy_mapper**


```xml
    <select id="getMyAcademyRegistrations" resultMap="academyRegistrationMap" parameterType="map">
        select
            art.academy_registration_id,
            art.ACADEMY_ID,
            at.ACA_ASNUM,
            at.ACA_NM,
            at.ADMST_ZONE_NM,
            art.match,
            art.user_id,
            art.business_registration_file,
            art.id_file,
            art.operation_registration_file,
            art.approval_status,
            art.reject_reason
        from
            academy_registration_tb art
                left outer join academy_tb at on(at.ACADEMY_ID = art.ACADEMY_ID)
        where
            art.user_id = #{userId}
            and art.approval_status = 1
        order by
            art.academy_registration_id desc
        limit #{index}, 5
    </select>
```
- approval_statusê°€ 1ì¸ í•™ì› ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ(ìŠ¹ì¸ëœ í•™ì›)


<br/>


```xml
    <update id="updateAcademyInfo" parameterType="com.aws.compass.entity.AcademyInfo">
        update
            academy_info_tb
        set
            logo_img = #{logoImg},
            class_size = #{classSize},
            course_period = #{coursePeriod},
            purpose = #{purpose},
            home_page = #{homePage},
            phone = #{phone}
        where
            academy_info_id = #{academyInfoId}
    </update>
```
- ë¡œê³  ì´ë¯¸ì§€, ìˆ˜ì—… ì¸ì›, ìˆ˜ì—… ê¸°ê°„ ë“± ì •ë³´ ì—…ë°ì´íŠ¸

<br/>

```xml
    <insert id="insertConvenience">
        insert into academy_convenience_tb
        values(0, #{academyInfoId}, #{convenienceId})
    </insert>
    <insert id="insertAge">
        insert into attendance_age_tb
        values(0, #{academyInfoId}, #{ageId})
    </insert>
    <insert id="insertClassInfo">
        insert into class_info_tb
        values(0, #{academyInfoId}, #{classInfo.className}, #{classInfo.classPrice})
    </insert>
    <delete id="deleteConvenience">
        delete from
            academy_convenience_tb
        where
            academy_info_id = #{academy_info_id}
    </delete>
    <delete id="deleteAge">
        delete from
            attendance_age_tb
        where
            academy_info_id = #{academy_info_id}
    </delete>
    <delete id="deleteClassInfo">
        delete from
            class_info_tb
        where
            academy_info_id = #{academy_info_id}
    </delete>
```
- ìˆ˜ì—… ì—°ë ¹, í¸ì˜ ì‹œì„¤, ìˆ˜ì—… ì •ë³´ëŠ” í•´ë‹¹ academy_info_idì˜ ë°ì´í„°ë¥¼ ëª¨ë‘ deleteí•œ í›„ insert í•´ì¤€ë‹¤.

<br/>

---

<br/>

</details>
 
<details>
<summary>ê´‘ê³  ê²°ì œ</summary>

![ê´‘ê³ ê²°ì œ](https://github.com/KoreaIt-J-23-2-2/compass_front/assets/137989664/dd5537d8-ec3a-411a-8b59-98741f6ed723)

### FrontEnd

#### ì¹´ì¹´ì˜¤ ê²°ì œ ë° ë§ˆì´í˜ì´ì§€ ê²°ì œ ë¦¬ìŠ¤íŠ¸

```html
<div>
            <h2>ğŸ’¸ ê´‘ê³  ê²°ì œ</h2>
            <div>
                {getMyAcademies.data.data.listTotalCount === 0 ? 
                <EmptyBox comment={<>ê´‘ê³  ê²°ì œí•  í•™ì›ì´ ì—†ìŠµë‹ˆë‹¤! <br />í•™ì›ì„ ë“±ë¡í•˜ê³  ìŠ¹ì¸ ë°›ì•„ ë‚˜ì˜ í•™ì›ì„ í™ë³´í•´ë³´ì„¸ìš”!</>}
                    link={'/academy/regist'} btn={"ë“±ë¡í•˜ê¸°"}/> :
                <>
                    <div css={S.SComment}><span>ê´‘ê³  ê²°ì œ</span> í•˜ê³  <span>ë‚˜ì˜ í•™ì›ì„ í™ë³´</span>í•´ë³´ì„¸ìš”! í•™ì›ëª…ì„ í´ë¦­í•˜ë©´ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.</div>
                    <table css={GS.STable}>
                        <tbody>
                            <tr>
                                <td>í•™ì› ë²ˆí˜¸</td>
                                <td>í•™ì›ëª…</td>
                                <td>í•™ì› ì„ íƒ</td>
                            </tr>
                        { getMyAcademies?.data?.data.academyRegistrations.map(academy => {
                            return  <tr key={academy.academyRegistrationId} 
                                        style={{ fontWeight: selectedAcademy === academy ? 'bold' : 'normal'}}>
                                        <td>{academy.acaAsnum}</td>
                                        <td css={S.SAcaNm} onClick={()=> {navigate(`/academy/info?ACADEMY_ID=${academy.academyId}`)}}>{academy.acaNm}</td>
                                        <td>
                                            <button css={GS.SButton} onClick={(e) => handleAcademyOnClick(e, academy)}>
                                                {selectedAcademy === academy ? 'ì„ íƒ í•´ì œ' : 'ì„ íƒ' }
                                            </button>
                                        </td>
                                    </tr>
                        })}
                        </tbody>
                    </table>
                    {!getMyAcademies.isLoading && 
                        <Pagination totalCount={getMyAcademies?.data?.data?.listTotalCount}
                            link={`/account/mypage/adpayment`}/>}
                    {isPaymentInfoOpen && !!selectedAcademy && (
                    <div css={S.SProductContainer}>
                        {ispurchase.isLoading ? <></> : !!isAcademyPaid
                        ? (
                        <div css={S.SPurchaseInfoBox}>
                            <div css={S.SPurchaseInfo}>
                                <span>ê²°ì œëœ ë‚´ìš©</span>
                                <div>ìƒí’ˆ : {isAcademyPaid.productName}</div>
                                <div>ê°€ê²© : {isAcademyPaid.productPrice}ì›</div>
                                <div>ê¸°ê°„ : {isAcademyPaid.productPeriod}ì¼</div>
                                <div>ìƒí’ˆ ê¸°ê°„ : {formatDate(isAcademyPaid.purchaseDate)} ~ {formatDate(addDays(isAcademyPaid.purchaseDate, isAcademyPaid.productPeriod))}</div>
                                <div>ìƒí’ˆì„¤ëª… : {isAcademyPaid.productPrice}ì›ì˜ í–‰ë³µ</div>
                            </div>
                        </div>
                        )
                        : products.map(product => {
                                return (
                                <div css={S.SProductLayout} onClick={() => { handlePaymentSubmit(product); }}>
                                    <div css={S.SProductImgBox}>
                                        <img css={S.SProductImg} src={productImg} alt="" />
                                        <p css={S.SProductImgText}>{product.productPrice}ì›</p>
                                    </div>
                                        <div css={S.SProductDetail}>
                                        <div>ìƒí’ˆ : {product.productName}</div>
                                        <div>ê°€ê²© : {product.productPrice}ì›</div>
                                        <div>ê¸°ê°„ : {product.productPeriod}ì¼</div>
                                        <div>ìƒí’ˆì„¤ëª… : {product.productPrice}ì›ì˜ í–‰ë³µ</div>
                                    </div>
                                </div>
                                );
                            })
                        }
                    </div>
                    )}
                </>}
            </div>
        </div>
```
- handlePaymentSubmit ê²°ì œë¥¼ ì²˜ë¦¬í•˜ëŠ” í•µì‹¬ í•¨ìˆ˜
- ê²°ì œëœ í•™ì› ëª©ë¡ì„ í…Œì´ë¸”ë¡œ í‘œì‹œí•˜ê³ , ì„ íƒëœ í•™ì›ì— ëŒ€í•œ ê²°ì œ ì •ë³´ë¥¼ ìƒì„¸í•˜ê²Œ ì œê³µ
- ê²°ì œ ì •ë³´ê°€ ì—†ëŠ” ê²½ìš°ì—ëŠ” ì•Œë¦¼ ë©”ì‹œì§€ì™€ í•¨ê»˜ ë“±ë¡ëœ í•™ì›ì´ ì—†ë‹¤ëŠ” ì•ˆë‚´ë¥¼ ì œê³µ

#### ì…ë ¥ë°›ì€ ê°’
```javascript
// ê²°ì œ
    const getProduct = useQuery(["getProduct"], async () => {
        try{
            const option = {
                headers: {
                    Authorization: localStorage.getItem("accessToken")
                }
            }
            return await instance.get(`/ad/products`, option)
        } catch(error){
            console.error(error)
        }
    }, {
        retry: 0,
        refetchOnWindowFocus: false,
        onSuccess: (response) => {
            setProducts(response.data);
        }
    })

    useEffect(() => {
        const iamport = document.createElement("script");
        iamport.src = "https://cdn.iamport.kr/v1/iamport.js";
        document.head.appendChild(iamport);
        return () => {
            document.head.removeChild(iamport);
        }
    }, [])

// ì¹´ì¹´ì˜¤ ê²°ì œ ê´€ë ¨
    const handlePaymentSubmit = (product) => {
        const principal = quertClient.getQueryState("getPrincipal");
        if(!window.IMP) {return}
        const { IMP } = window;
        IMP.init("imp52230315") // IMPë¥¼ ì´ˆê¸°í™” ì‹œí‚´

        const paymentData = {
            pg: "kakaopay",
            pay_method: "kakaopay",
            merchant_uid: `mid_${new Date().getTime()}`,
            amount: product.productPrice,
            name: product.productName,
            buyer_name: principal?.data?.data.name,
            buyer_email: principal?.data?.data.email
        }

        IMP.request_pay(paymentData, (response) => {
            const { success, error_msg } = response;

            if(success) {
                const purchaseDate = {
                    productId: product.productId,
                    userId: principal?.data?.data.userId,
                    academyId: selectedAcademy.academyId
                }
                const option = {
                    headers: {
                        Authorization: localStorage.getItem("accessToken")
                    }
                }
                instance.post("/purchase", purchaseDate, option).then(response => {
                    alert("ê´‘ê³ ê²°ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤!!ğŸ™‡")
                    ispurchase.refetch()
                    quertClient.refetchQueries(["getPrincipal"])
                })
            } else {
                alert(error_msg);
            }
        })
    }
```
- ì•„ì„í¬íŠ¸(Iamport): ì•„ì„í¬íŠ¸ëŠ” ê²°ì œ ì²˜ë¦¬ë¥¼ ë„ì™€ì£¼ëŠ” ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. ì´ˆê¸°í™” ë° ê²°ì œ ìš”ì²­ì— ì‚¬ìš©ë©ë‹ˆë‹¤.

  (ì•„ì„í¬íŠ¸)
https://portone.io/korea/koutm_source=google&utm_medium=google_sa&utm_campaign=pf_conversion_2302_kr&utm_content=homepage&gclid=EAIaIQobChMI0Za95tHlggMVzyZ7Bx3TTg0dEAAYASAAEgI14fD_BwE

- ì£¼ìš” ê¸°ëŠ¥:

1. ê²°ì œëœ í•™ì› í‘œì‹œ :
getMyAcademies ì¿¼ë¦¬ë¥¼ í†µí•´ ì‚¬ìš©ìê°€ ê²°ì œí•œ í•™ì› ëª©ë¡ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
í…Œì´ë¸”ì„ ì‚¬ìš©í•˜ì—¬ í•™ì› ë²ˆí˜¸, í•™ì›ëª…, ì„ íƒ ë²„íŠ¼ì„ í‘œì‹œ

2. ê²°ì œ ì²˜ë¦¬ (handlePaymentSubmit) :
ì¹´ì¹´ì˜¤ ê²°ì œë¥¼ ìœ„í•´ IMPë¥¼ ì´ˆê¸°í™”í•˜ê³ , ê²°ì œ ì •ë³´ë¥¼ êµ¬ì„±í•˜ì—¬ IMP.request_payë¥¼ í˜¸ì¶œ
ê²°ì œ ì„±ê³µ ì‹œ, í•´ë‹¹ ì •ë³´ë¥¼ ì„œë²„ì— ì „ì†¡í•˜ì—¬ ê²°ì œ ë‚´ì—­ì„ ê¸°ë¡í•˜ê³ , ê´€ë ¨ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸

3. ìƒí’ˆ ëª©ë¡ í‘œì‹œ :
getProduct ì¿¼ë¦¬ë¥¼ í†µí•´ ê´‘ê³  ìƒí’ˆ ëª©ë¡ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
ê°€ì ¸ì˜¨ ìƒí’ˆ ëª©ë¡ì„ ë Œë”ë§í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ì„ íƒí•  ìˆ˜ ìˆëŠ” ìƒí’ˆì„ í‘œì‹œ

4. ìƒí’ˆ ì„ íƒ ë° ê²°ì œ ë‚´ì—­ í‘œì‹œ :
ì‚¬ìš©ìê°€ ìƒí’ˆì„ ì„ íƒí•˜ë©´ í•´ë‹¹ ìƒí’ˆì— ëŒ€í•œ ê²°ì œ ì •ë³´ë¥¼ í‘œì‹œ
ì´ë¯¸ ê²°ì œí•œ ê²½ìš°ì—ëŠ” ê²°ì œëœ ë‚´ìš©ì„ ìƒì„¸íˆ í‘œì‹œí•˜ê³ , ê²°ì œë˜ì§€ ì•Šì•˜ë‹¤ë©´ ì„ íƒí•  ìˆ˜ ìˆëŠ” ìƒí’ˆ ëª©ë¡ì„ ì œê³µ

#### í•™ì› ì°¾ê¸° í˜ì´ì§€ ê´‘ê³  ë¦¬ìŠ¤íŠ¸
```html
  <div>
    <div css={S.HeaderBox}>
        <h3>ì´ëŸ° í•™ì›ì€ ì–´ë– ì„¸ìš”?</h3>
        <div>
            <span>ê´‘ê³ </span>
            <RiAdvertisementFill size={22}/>
        </div>
    </div>
    <ul css={S.UlBox}>
    {!getPurchaseAcademyList.isLoading && Array.isArray(getPurchaseAcademyList?.data?.data) && getPurchaseAcademyList?.data?.data.map(academy => {
        return <LiAcademyBox key={academy.ACADEMY_ID} academy={academy}/>
    })}
    </ul>
</div>
```
- ê´‘ê³  ë¦¬ìŠ¤íŠ¸ì˜ ê° í•™ì›ì€ LiAcademyBox ì»´í¬ë„ŒíŠ¸ë¥¼ í†µí•´ í‘œí˜„

#### ì…ë ¥ë°›ì€ ê°’
```javascript
// ê´‘ê³  ëª©ë¡ ê°€ì§€ê³ ì˜¤ê¸°
    const getPurchaseAcademyList = useQuery(["getPurchaseAcademyList"], async () => {
        try{
            return await instance.get(`/ad/academies/random`)

        } catch(error) {
            console.error(error)
        }
    }, {
        retry: 0,
        refetchOnWindowFocus: false
    })
```
- ê´‘ê³  ëª©ë¡ì„ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ API ì—”ë“œí¬ì¸íŠ¸ /ad/academies/randomì— ë¹„ë™ê¸° ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.
- ê°€ì ¸ì˜¨ í•™ì› ëª©ë¡ì€ getPurchaseAcademyList.data.dataì— ì €ì¥
- ê°€ì ¸ì˜¨ í•™ì› ëª©ë¡ì„ ë§¤í•‘í•˜ì—¬ ê° í•™ì›ì„ LiAcademyBoxë¡œ í‘œì‹œ

### Backend

#### Controller
```java
@RestController
@RequiredArgsConstructor
public class PaymentController {

    private final PaymentService paymentService;

    // ê´‘ê³  ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
    @GetMapping("/api/ad/products")
    public ResponseEntity<?> getProducts() {
        return ResponseEntity.ok(paymentService.getProducts());
    }

    // ê´‘ê³  ê²°ì œëœ í•™ì›
    @PostMapping("/api/purchase")
    public ResponseEntity<?> purchase(@RequestBody PurchaseReqDto purchaseReqDto) {
        return ResponseEntity.ok(paymentService.purchase(purchaseReqDto));
    }

    // ê´‘ê³  ì •ë³´ ìœ íš¨ì„± ê²€ì‚¬
    @GetMapping("/api/purchase/check")
    public ResponseEntity<?> getPurchaseInfo(@RequestParam int userId, @RequestParam int academyId) {
        return ResponseEntity.ok(paymentService.isPurchase(userId, academyId));
    }
}
```
- ê´‘ê³  ì œí’ˆ ë° êµ¬ë§¤ì™€ ê´€ë ¨ëœ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ê´€ë¦¬

#### DTO
```java
  @Data
@Builder
public class PurchaseReqDto {

    private int purchaseInfoId;
    private int academyId;
    private int userId;
    private int productId;
    private Date purchaseDate;
    private int productPeriod;

    public Purchase toPurchase() {
        return Purchase.builder()
                .purchaseInfoId(purchaseInfoId)
                .academyId(academyId)
                .userId(userId)
                .productId(productId)
                .purchaseDate(purchaseDate)
                .build();
    }
}
```
- ê´‘ê³ ì™€ ê´€ë ¨ëœ ì •ë³´ì˜ ë°ì´í„° ì „ì†¡ ê°ì²´

#### Service
```java
@Service
@RequiredArgsConstructor
public class PaymentService {

    private final PaymentMapper paymentMapper;

    public List<ProductRespDto> getProducts() {
        List<ProductRespDto> productRespDtos = new ArrayList<>();
        paymentMapper.getProducts().forEach(product -> {
            productRespDtos.add(product.toProduct());
        });
        return productRespDtos;
    }

    public boolean purchase(PurchaseReqDto purchaseReqDto) {
        return paymentMapper.savePurchase(purchaseReqDto.toPurchase()) > 0;
    }

    public PurchaseInfoRespDto isPurchase(int userId, int academyId) {
        if(!Objects.isNull(paymentMapper.checkPurchase(userId, academyId))) {
            return paymentMapper.checkPurchase(userId, academyId).toPurchaseInfoDto();
        }
        return null;
    }
}
```
- ê²°ì œì™€ ê´€ë ¨ëœ ì‘ì—…ì„ ì²˜ë¦¬í•˜ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ í¬í•¨ëœ ì„œë¹„ìŠ¤

- ê´‘ê³  ì œí’ˆ ê°€ì ¸ì˜¤ê¸° : paymentMapper.getProducts()ë¥¼ ì‚¬ìš©í•˜ì—¬ ê´‘ê³  ì œí’ˆ ëª©ë¡ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
- í•™ì›ì„ ìœ„í•œ ê´‘ê³  êµ¬ë§¤ : ì œê³µëœ êµ¬ë§¤ ì •ë³´ë¡œ paymentMapper.savePurchase()ë¥¼ í˜¸ì¶œí•˜ì—¬ êµ¬ë§¤ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.
- ê´‘ê³  ì •ë³´ ìœ íš¨ì„± ê²€ì‚¬ : paymentMapper.checkPurchase()ë¥¼ í˜¸ì¶œí•˜ì—¬ ê´‘ê³  ì •ë³´ì˜ ìœ íš¨ì„±ì„ í™•ì¸í•©ë‹ˆë‹¤.

#### Repository
```java
@Mapper
public interface PaymentMapper {

    public List<Product> getProducts();
    public int savePurchase(Purchase purchase);
    public Product checkPurchase(int userId, int academyId);
}
```
- ê²°ì œì™€ ê´€ë ¨ëœ ë°ì´í„°ë² ì´ìŠ¤ ìƒí˜¸ ì‘ìš©ì„ ìœ„í•œ MyBatis Mapper ì¸í„°í˜ì´ìŠ¤
#### SQL
```java
<resultMap id="productMap" type="com.aws.compass.entity.Product">
        <id property="productId" column="product_id"/>
        <result property="productName" column="product_Name"/>
        <result property="productPrice" column="product_price"/>
        <result property="productPeriod" column="product_period"/>
        <result property="purchaseDate" column="purchase_date"/>
    </resultMap>

    <resultMap id="purchaseMap" type="com.aws.compass.entity.Purchase">
        <id property="purchaseInfoId" column="purchase_info_id"/>
        <result property="academyId" column="academy_id"/>
        <result property="userId" column="user_id"/>
        <result property="productId" column="product_id"/>
        <result property="purchaseDate" column="purchase_date"/>
    </resultMap>

    <insert id="savePurchase" parameterType="com.aws.compass.entity.Purchase">
        insert into purchase_info_tb
        values(0, #{academyId}, #{userId}, #{productId}, CONVERT_TZ(NOW(), 'UTC', 'Asia/Seoul'))
    </insert>

    <select id="getProducts"
            resultMap="productMap">
        select
            pt.product_id,
            pt.product_name,
            pt.product_price,
            pt.product_period
        from
            product_tb pt
    </select>

    <select id="checkPurchase" resultMap="productMap">
        SELECT
            pit.purchase_date,
            pt.product_name,
            pt.product_period,
            pt.product_price
        FROM
            purchase_info_tb pit
            left outer join product_tb pt on(pt.product_id = pit.product_id)
        where
            user_id = #{userId}
            and ACADEMY_ID = #{academyId}
            and now() <![CDATA[ <= ]]> date_add(purchase_date, interval pt.product_period DAY)
    </select>
```
- ê²°ê³¼ ë§¤í•‘: SQL ì¿¼ë¦¬ ê²°ê³¼ë¥¼ Java ê°ì²´ì— ë§¤í•‘í•˜ê¸° ìœ„í•œ ê²°ê³¼ ë§µì„ ì •ì˜ (productMap ë° purchaseMap)
- Insert ì¿¼ë¦¬ (savePurchase)
- purchase_info_tb í…Œì´ë¸”ì— ìƒˆë¡œìš´ êµ¬ë§¤ ë ˆì½”ë“œë¥¼ ì‚½ì…
- Select ì¿¼ë¦¬ (getProducts ë° checkPurchase)


</details>
  
<details>
<summary>ë‚˜ì˜ í•™ì› ë¬¸ì˜</summary>
</details>

<br/>


### **ì›¹ ê´€ë¦¬ì ë§ˆì´í˜ì´ì§€**
<details>
<summary>í•™ì› ë“±ë¡ ëŒ€ê¸°ëª©ë¡</summary>

<br/>

ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì¸ í•™ì›ë“¤ì„ ëª¨ì•„ ì›¹ ê´€ë¦¬ìê°€ ìŠ¹ì¸/ìŠ¹ì¸ ê±°ë¶€ í•  ìˆ˜ ìˆë„ë¡ ë§Œë“  í˜ì´ì§€

<br/>

---

<br/>

### **Front End**

**html**

``` html
<h2>ğŸ“œ í•™ì› ë“±ë¡ ëŒ€ê¸°ëª©ë¡</h2>
<div>
    {getAcademies.data.data.listTotalCount === 0 ? <div css={S.SEmptyBox}>ë“±ë¡ ëŒ€ê¸°ì¤‘ì¸ í•™ì›ì´ ì—†ìŠµë‹ˆë‹¤.</div> : 
    <>
        <div css={S.SComment}>
            ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì¸ í•™ì›ë“¤ì„ ìŠ¹ì¸ ê±°ì ˆ ë˜ëŠ” ìŠ¹ì¸ í•´ì£¼ì„¸ìš”.
        </div>
        <table css={GS.STable}>
            <tbody>
                <tr>
                    <th>í•™ì› ë²ˆí˜¸</th>
                    <th>í•™ì›ëª…</th>
                    <th>ì‹ ì²­ì</th>
                    <th>í•™ì› ì„ íƒ</th>
                </tr>
                { getAcademies?.data?.data.academyRegistrations.map(academy => {
                    return  <tr key={academy.academyRegistrationId} 
                                style={{ fontWeight: selectedAcademy === academy ? 'bold' : 'normal' }}>
                                <td>{academy.acaAsnum}</td>
                                <td>{academy.acaNm}</td>
                                <td>{academy.name}</td>
                                <td>
                                    <button css={GS.SButton} onClick={(e) => handleAcademyOnClick(e, academy)}>
                                        {selectedAcademy === academy ? 'ì„ íƒ í•´ì œ' : 'ì„ íƒ'}
                                    </button>
                                </td>
                            </tr>
                })}
            </tbody>
        </table>
        {!getAcademies.isLoading && 
            <Pagination totalCount={getAcademies.data.data.listTotalCount}
                link={'/account/mypage/academyawating'}/>}
        {isWaitingAcademyOpen && !!selectedAcademy && <SelectedAcademy selectedAcademy={selectedAcademy}/>}
    </>}
</div>
```
``` html
<div css={S.SContainer}>
    <div css={S.SNameContainer}>
        <span css={S.SName}>ì„ íƒëœ í•™ì›</span>
    </div>
    <div css={S.SSelectedAcaContainer}>
        <div css={S.SAcademyInfoBox}>
            <div><span>í•™ì› ë²ˆí˜¸</span><div>{selectedAcademy.acaAsnum}</div></div>
            <div><span>ì§€ì—­</span><div>{selectedAcademy.admstZoneNm}</div></div>
            <div><span>ì‹ ì²­ì</span><div>{selectedAcademy.name}</div></div>
        </div>
        <div css={S.SAcademyInfoBox}>
            <div><span>í•™ì›ëª…</span><div>{selectedAcademy.acaNm}</div></div>
        </div>
    </div>
    <div css={S.SNameContainer}>
        <span css={S.SName}>ì‚¬ì „í™•ì¸ì„œë¥˜ ì œì¶œ</span>
    </div>
    <FileDownload selectedAcademy={selectedAcademy}/>
</div>
<div css={S.SButtonBox}>
    <button onClick={handleDisapprovalOnClick} css={S.SDeclineBtn}>ìŠ¹ì¸ ê±°ì ˆ</button>
    <button onClick={handleApprovalOnClick} css={S.SApprovalBtn}>ìŠ¹ì¸</button>
</div>
```
- ìŠ¹ì¸ ëŒ€ê¸°ì¤‘ì¸ í•™ì› ë¦¬ìŠ¤íŠ¸ë¥¼ ë³´ì—¬ì¤€ë‹¤. ì„ íƒ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ í•´ë‹¹ í•™ì›ì˜ ì •ë³´ì™€ ì—…ë¡œë“œí•œ íŒŒì¼ì„ ë‹¤ìš´ë°›ì•„ ë³¼ ìˆ˜ ìˆë‹¤.
- ìŠ¹ì¸ ë²„íŠ¼ê³¼ ìŠ¹ì¸ ê±°ì ˆ ë²„íŠ¼ìœ¼ë¡œ í•´ë‹¹ í•™ì›ì„ ìŠ¹ì¸/ìŠ¹ì¸ ê±°ì ˆ í•  ìˆ˜ ìˆë‹¤.


<br/><br/>

**ìŠ¹ì¸ ëŒ€ê¸° í•™ì› ëª©ë¡ ê°€ì ¸ì˜¤ê¸°**

``` javascript
    const getAcademies = useQuery(["getAcademies", page], async () => {
        const option = {
            headers: {
                Authorization: localStorage.getItem("accessToken")
            }
        }
        return await instance.get(`/admin/academies/awaiting/${page}`, option);
    }, {
        refetchOnWindowFocus: false,
        onSuccess: () => {
            setSelectedAcademy(null);
        }
    })
```
- /admin/academies/awaiting ìœ¼ë¡œ ìš”ì²­


<br/>

**ìŠ¹ì¸ ë²„íŠ¼ í´ë¦­**
``` javascript
    const handleApprovalOnClick = async () => {
        try {
            const requestData = {
                academyRegistrationId: selectedAcademy.academyRegistrationId,
                userId: selectedAcademy.userId
            }
            const option = {
                headers: {
                    Authorization: localStorage.getItem("accessToken")
                }
            }
            await instance.put('/admin/academy/approval', requestData, option);
            alert("ìŠ¹ì¸ ì™„ë£Œ");
            queryClient.refetchQueries(["getAcademies"]);
        } catch (error) {
            console.error(error);
        }
    }
```
- /admin/academy/approvalë¡œ ìŠ¹ì¸í•  í•™ì›ì˜ ë°ì´í„° ë‹´ì•„ ìš”ì²­
- ìŠ¹ì¸ í›„ ëŒ€ê¸° í•™ì› ëª©ë¡ refetch

<br/>


**ìŠ¹ì¸ ê±°ì ˆ ë²„íŠ¼ í´ë¦­**
``` javascript
    const handleDisapprovalOnClick = async () => {
        const rejectReason = prompt("ê±°ì ˆ ì‚¬ìœ ë¥¼ ì…ë ¥í•˜ì„¸ìš”: ");

        if(rejectReason !== null && rejectReason.trim() !== "") {
            try {
                const requestData = {
                    academyRegistrationId: selectedAcademy.academyRegistrationId,
                    rejectReason: rejectReason
                }
                const option = {
                    headers: {
                        Authorization: localStorage.getItem("accessToken")
                    }
                }
                await instance.put(`/admin/academy/disapproval`, requestData, option);
                alert("ìŠ¹ì¸ ê±°ì ˆ ì™„ë£Œ");
                queryClient.refetchQueries(["getAcademies"]);
            } catch (error) {
                console.error(error);
            }
        } else {
            alert("ê±°ì ˆ ì‚¬ìœ ë¥¼ ì…ë ¥í•˜ì§€ ì•Šì•„ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.");
        }
    }
```
- /admin/academy/disapprovalë¡œ ìŠ¹ì¸ ê±°ì ˆí•  í•™ì›ì˜ ë°ì´í„° ë‹´ì•„ ìš”ì²­
- ê±°ì ˆ ì‚¬ìœ ë¥¼ ì…ë ¥í•˜ì§€ ì•Šì„ ì‹œ ì·¨ì†Œë˜ë„ë¡ í•¨.

<br/>

---

<br/>

### **Back End**


**AdminController**
``` java
    // ëŒ€ê¸° í•™ì› ê°€ì ¸ì˜¤ê¸°
    @GetMapping("/api/admin/academies/awaiting/{page}")
    public ResponseEntity<?> getAwaitingAcademies(@PathVariable int page) {
        return ResponseEntity.ok(adminService.getAwaitingAcademies(page));
    }

    // í•™ì› ìŠ¹ì¸í•˜ê¸°
    @PutMapping("/api/admin/academy/approval")
    public ResponseEntity<?> approvalAcademy(@RequestBody ApprovalAcademyReqDto approvalAcademyReqDto) {
        return ResponseEntity.ok(adminService.approvalAcademy(approvalAcademyReqDto));
    }

    // í•™ì› ìŠ¹ì¸ ê±°ì ˆí•˜ê¸°
    @PutMapping("/api/admin/academy/disapproval")
    public ResponseEntity<?> disapprovalAcademy(@RequestBody DisapprovalReqDto disapprovalReqDto) {
        return ResponseEntity.ok(adminService.disapprovalAcademy(disapprovalReqDto));
    }
```
- í˜ì´ì§€ë„¤ì´ì…˜ì„ ìœ„í•´ pageë²ˆí˜¸ë¥¼ PathVariableë¡œ ë°›ì•„ì˜¨ë‹¤.

<br/>

**AdminService**
``` java
    public AwaitingAcademiesRespDto getAwaitingAcademies(int page) {
        int index = (page - 1) * 5;

        List<AcademyRegistration> academyRegistrations = adminMapper.getAcademyRegistrations(index);
        int listTotalCount = adminMapper.getAwaitingAcademyCount();

        return new AwaitingAcademiesRespDto(academyRegistrations, listTotalCount);
    }

    @Transactional(rollbackFor = Exception.class)
    public boolean approvalAcademy(ApprovalAcademyReqDto approvalAcademyReqDto) {
        return adminMapper.updateApprovalState(approvalAcademyReqDto.getAcademyRegistrationId()) > 0
                && adminMapper.updateUserRole(approvalAcademyReqDto.getUserId()) > 0;
    }

    @Transactional(rollbackFor = Exception.class)
    public boolean disapprovalAcademy(DisapprovalReqDto disapprovalReqDto) {
        return adminMapper.updateApprovalStatus(disapprovalReqDto.getAcademyRegistrationId(), disapprovalReqDto.getRejectReason()) > 0;
    }
```
- getAwaitingAcademies : ìŠ¹ì¸ ëŒ€ê¸° ëª©ë¡ê³¼ ë¦¬ìŠ¤íŠ¸ ê¸¸ì´ë¥¼ return
- approvalAcademy : 
  - í•™ì›ì˜ ìŠ¹ì¸ ìƒíƒœë¥¼ ë³€ê²½(0(ìŠ¹ì¸ ëŒ€ê¸°) -> 1(ìŠ¹ì¸))
  - userì˜ role ë³€ê²½(1(í•™ìƒ) -> 2(í•™ì› ê´€ë¦¬ì))
- disapprovalAcademy :
  - í•™ì›ì˜ ìŠ¹ì¸ ìƒíƒœ, ê±°ì ˆ ì‚¬ìœ  ë³€ê²½(0(ìŠ¹ì¸ ëŒ€ê¸°) -> -1(ìŠ¹ì¸ ê±°ì ˆ))

<br/>

**admin_mapper**
``` xml
    <update id="updateApprovalState">
        update
            academy_registration_tb
        set
            approval_status = 1
        where
            academy_registration_id = #{academyRegistrationId}
    </update>
    <update id="updateUserRole">
        update
            user_tb
        set
            role_id = 2
        where
            user_id = #{userId}
    </update>
    <update id="updateApprovalStatus" parameterType="map">
        update
            academy_registration_tb
        set
            approval_status = -1,
            reject_reason = #{rejectReason}
        where
            academy_registration_id = #{academyRegistrationId}
    </update>

    <select id="getAcademyRegistrations" resultMap="academyRegistrationMap">
        select
            art.academy_registration_id,
            art.ACADEMY_ID,
            at.ACA_ASNUM,
            at.ACA_NM,
            at.ADMST_ZONE_NM,
            art.match,
            art.user_id,
            ut.name,
            art.business_registration_file,
            art.id_file,
            art.operation_registration_file
        from
            academy_registration_tb art
                left outer join academy_tb at on(at.ACADEMY_ID = art.ACADEMY_ID)
                left outer join user_tb ut on(ut.user_id = art.user_id)
        where
            art.approval_status = 0
        order by
            art.academy_registration_id asc
        limit #{index}, 5
    </select>
    <select id="getAwaitingAcademyCount" resultType="java.lang.Integer">
        select
            count(*)
        from
            academy_registration_tb
        where
            approval_status = 0
    </select>
```
- getAcademyRegistrations : approval_statusê°€ 0ì¸ ê²ƒë“¤ë§Œ(ìŠ¹ì¸ ëŒ€ê¸° ìƒíƒœì¸ ê²ƒ) ê°€ì ¸ì˜´
- ì˜¤ë˜ëœ ìŠ¹ì¸ ëŒ€ê¸° í•™ì›ë¶€í„° ê°€ì ¸ì˜¤ê¸° ìœ„í•´ id ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ê°€ì ¸ì˜´


</details>

<br/>



<br/>

## **âœ ëŠë‚€ì **
> **íŒ€ì¥: ë³€ì •ë¯¼** 
- ì´ë²ˆ í”„ë¡œì íŠ¸ì˜ íŒ€ì¥ì„ ì²˜ìŒ ë§¡ê²Œ ë˜ì—ˆì„ ë•Œ ê³¼ì—° ì´ í”„ë¡œì íŠ¸ë¥¼ ì˜ ì´ëŒì–´ ê°ˆ ìˆ˜ ìˆì„ê¹Œë¼ëŠ” ìƒê°ì´ ë§‰ì—°í•˜ê²Œ ë“¤ì—ˆìŠµë‹ˆë‹¤. ì € í˜¼ì ì´ëŒì–´ê°€ëŠ” ê²ƒì´ ì•„ë‹Œ íŒ€ì›ë“¤ê³¼ ë§¤ì¼ íšŒì˜í•˜ê³ , ì§„í–‰ ì²™ë„ë¥¼ ì²´í¬í•˜ë©´ì„œ ì£¼ê³ ë°›ëŠ” ëŒ€í™”ë“¤ì„ í†µí•´ ë°©í–¥ì„ ì¡ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. íŒ€ì›ë“¤ì˜ ì—­ëŸ‰ì„ ë†’ì´ê¸° ìœ„í•´ ì „ë¶€ CRUDë¥¼ ë§¡ì•„ì„œ í•  ìˆ˜ ìˆë„ë¡ ì§„í–‰í•˜ì˜€ê³ , ì§„í–‰ ì²™ë„ë¥¼ ì²´í¬í•˜ë©° ì„œë¡œ í•  ì¼ì„ íŒŒì•…í•˜ê³  ë„ì›€ì„ ì£¼ëŠ” ë°©í–¥ìœ¼ë¡œ ì´ëŒì–´ ë‚˜ê°ˆ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
- ë°°ìš´ ëŒ€ë¡œ ë‹¨ìˆœíˆ firebaseì— ì—…ë¡œë“œí•˜ë©´ ëœë‹¤ê³  ìƒê°í–ˆì§€ë§Œ, ì—¬ëŸ¬ ê°œì˜ íŒŒì¼ì„ ì˜¬ë¦¬ëŠ” ê³¼ì •ì—ì„œ interruptê°€ ë°œìƒí•´ ì´ì „ íŒŒì¼ì´ ì—…ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì…ì¥ì—ì„œ ìƒê°í•˜ë©´ ì‚¬ìš©ìëŠ” ì´ ê³¼ì •ì„ ëª¨ë¥´ë‹ˆ ë‹¹ì—°íˆ interruptë¥¼ í•´ê²°í•´ì•¼ë§Œ í–ˆìŠµë‹ˆë‹¤. ì§„í–‰ ì¤‘ ìƒíƒœë¥¼ ì•Œë¦¬ëŠ” í”„ë¡œê·¸ë ˆìŠ¤ë°”ë¥¼ ë§Œë“¤ê³ , ë‹¤ìŒ ë‹¨ê³„ë¥¼ ì§„í–‰í•˜ë ¤ë©´ ì•Œë¦¼ì°½ì„ ë„ì›Œ ì•„ì§ ì—…ë¡œë“œë˜ì§€ ì•ŠìŒì„ ì•Œë¦¬ëŠ” ë°©í–¥ìœ¼ë¡œ ì‚¬ìš©ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤.
- ì—¬ëŸ¬ ê°œì˜ DBì—ì„œ ê°’ì„ ê°€ì ¸ì˜¤ë‹¤ ë³´ë‹ˆ í•œ ë²ˆì— ë“¤ê³  ì˜¤ë©´ SQLë¬¸ì´ ë„ˆë¬´ ëŠ˜ì–´ë‚˜ê³  ì‹œê°„ë„ ì˜¤ë˜ ê±¸ë ¸ìŠµë‹ˆë‹¤. ë”°ë¡œ ê°€ì ¸ì™€ì„œ ê°’ì„ ì „ë‹¬í•  ë•Œë§Œ í•©ì³ì„œ ë“¤ê³  ì˜¤ëŠ” ë°©í–¥ìœ¼ë¡œ ì§„í–‰í–ˆë”ë‹ˆ ì‹œê°„ë„ ì¤„ì–´ë“¤ê³  ê°’ì„ ë“¤ê³  ì™€ì„œ í™•ì¸í•˜ëŠ” ë°ë„ ë¶ˆí¸í•¨ì´ ì¤„ì—ˆìŠµë‹ˆë‹¤.
- í›„ê¸° ìˆ˜ì •ì„ í•  ë•Œ ìµœì‹  ê°’ì´ ì•ˆ ë„˜ì–´ì˜¤ê³  ìê¾¸ ì´ì „ì˜ ê°’ì´ ë„˜ì–´ì™”ìŠµë‹ˆë‹¤. ê·¸ ê³¼ì •ì—ì„œ ì–¸ì œ ë¦¬ë·°ë¥¼ ë‹¤ì‹œ ê°€ì ¸ì™€ì•¼ í•˜ëŠ”ì§€, ì–¸ì œ ìˆ˜ì • ë²„íŠ¼ì˜ ìƒíƒœë¥¼ ë³€ê²½í•´ì•¼ í•˜ëŠ”ì§€ ë“± ë‹¤ì‹œ ìƒê°í•˜ëŠ” ê³¼ì •ì—ì„œ í•´ë‹µì„ ì°¾ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
- í˜¼ì ì§„í–‰í•˜ëŠ” í”„ë¡œì íŠ¸ì˜€ë‹¤ë©´ 1ë‹¬ì´ë¼ëŠ” ì‹œê°„ ë‚´ì— í•´ê²°í•˜ì§€ ëª»í•˜ê³ , ë¬¸ì œì ì„ ì°¾ëŠ” ê³¼ì •ì—ì„œë„ ì˜¤ë˜ ê±¸ë ¸ì„ ê²ƒ ê°™ë‹¤ê³  ëŠê¼ˆìŠµë‹ˆë‹¤. í•¨ê»˜ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ì½”ë“œë¥¼ ë¦¬ë·°í•˜ëŠ” ê³¼ì •ì—ì„œ ë²„ê·¸ë¥¼ ì°¾ê³  ì‚¬ìš©ì„±ì— ëŒ€í•´ì„œ ìƒê°í•˜ë©´ì„œ ì„œë¡œ í”¼ë“œë°±í–ˆë”ë‹ˆ ì½”ë“œì™€ ì‚¬ìš©ì„±ì— ëŒ€í•œ ì´í•´ë„ê°€ ë†’ì•„ì§€ê³  í”„ë¡œì íŠ¸ì˜ ì™„ì„±ë„ë¥¼ ë†’ì¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

<br/>

> **íŒ€ì›: ì •ê°€ì˜** 
-  í”„ë¡œì íŠ¸ë¥¼ í†µí•´ í˜‘ì—…ê³¼ ì†Œí†µì˜ ì¤‘ìš”ì„±ì„ ê¹¨ë‹¬ì•˜ìŠµë‹ˆë‹¤. ë§¤ì¼ ì•„ì¹¨ íšŒì˜ë¡ ì‘ì„±ê³¼ ì½”ë“œ ë¦¬ë·°ë¥¼ í†µí•´ íŒ€ ì „ì²´ê°€ í”„ë¡œì íŠ¸ ì§„í–‰ ìƒí™©ì„ íŒŒì•…í–ˆìŠµë‹ˆë‹¤. ì´ë¡œì¨ ì½”ë“œì˜ ì´í•´ë„ê°€ ë†’ì•„ì§€ê³  ì¬ì‚¬ìš©ì´ ì‰¬ì›Œì¡ŒìŠµë‹ˆë‹¤. í•  ì¼ì˜ ìš°ì„  ìˆœìœ„ ì„¤ì •ì„ í†µí•´ í”„ë¡œì íŠ¸ì˜ ì™„ì„±ë„ë¥¼ ë†’ì˜€ìŠµë‹ˆë‹¤.
 ë³´ì•ˆ ë¶€ë¶„ì„ ë§¡ì•„ jwt í† í°ê³¼ Securityì— ëŒ€í•œ ì´í•´ë¥¼ ë†’ì˜€ê³ , OAuth2ë¥¼ í™œìš©í•œ ì†Œì…œ ë¡œê·¸ì¸ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ê´€ë¦¬ì ë§ˆì´í˜ì´ì§€ì—ì„œëŠ” í•™ì› ìŠ¹ì¸ ê¸°ëŠ¥ì„ ë„ì…í•˜ì—¬ í•™ì› ì •ë³´ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. í•™ì› ìƒì„¸ ì •ë³´ ìˆ˜ì •ì—ì„œëŠ” ì—¬ëŸ¬ í…Œì´ë¸”ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  ì—…ë°ì´íŠ¸í•˜ëŠ” ê³¼ì •ì—ì„œ ì–´ë ¤ì›€ì„ ê²ªì—ˆì§€ë§Œ, ì´ë¥¼ í†µí•´ ë§ì€ ê²ƒì„ ë°°ìš¸ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
 ì „ì²´ì ì¸ ë””ìì¸ ìˆ˜ì •ì„ ë‹´ë‹¹í•˜ë©° ì‚¬ìš©ìê°€ í•œ ëˆˆì— ê¸°ëŠ¥ì„ íŒŒì•…í•˜ê³  í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆì„ ì§€ ê³ ë¯¼í•˜ëŠ” ê³¼ì •ì„ í†µí•´ ë””ìì¸ ì›ì¹™ ë° ì‚¬ìš©ì„±ì— ëŒ€í•œ ì´í•´ê°€ ê¹Šì–´ì§€ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. 

<br/>

> **íŒ€ì›: ê¹€ì±„ì›** 
- í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ë•Œ ì—¬ëŸ¬ ì‚¬ëŒê³¼ ì–´ë–¤ ì›¹ì‚¬ì´íŠ¸ë¥¼ ë§Œë“¤ì§€ ëª©í‘œë¥¼ ì¡ëŠ” ê²ƒë¶€í„° ì‹œì‘í•˜ëŠ” í”„ë¡œì íŠ¸ëŠ” ì²˜ìŒì´ì—ˆê¸° ë•Œë¬¸ì— ê¸´ì¥ë„ ë˜ê³ , ë°°ìš´ ì§€ì‹ìœ¼ë¡œ ì–¼ë§ˆë‚˜ ì‹¤ì§ˆì ì¸ ê²°ê³¼ë¬¼ì„ ë§Œë“¤ì–´ ë‚¼ ìˆ˜ ìˆì„ì§€ì— ëŒ€í•œ ê¶ê¸ˆì¦ë„ ìˆì—ˆìŠµë‹ˆë‹¤. í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ì œê°€ ì•Œê³  ìˆë‹¤ê³  ìƒê°í•œ ë¶€ë¶„ë„ ì‹¤ì œë¡œëŠ” ëª¨ë¥´ëŠ” ê²ƒì´ ë§ì•˜ìŠµë‹ˆë‹¤. íŠ¹íˆ, í•™ì› ì°¾ê¸° í˜ì´ì§€ë¥¼ ë§¡ì•„ DBì˜ ì •ë³´ë¥¼ ë‹¤ë£¨ëŠ” ì¼ì´ ë§ì•˜ëŠ”ë°, ì˜¤ëœ ì‹œê°„ì´ ì§€ë‚œ MySQL ë¬¸ë²•ë“¤ì„ ê¸°ì–µí•˜ê¸° ìœ„í•´ ì´ì „ì— ê³µë¶€í–ˆë˜ ìë£Œë¥¼ ì°¾ì•„ë³´ë©° ë³µìŠµí•´ì•¼ í–ˆê³ , MyBatis ë™ì  ì¿¼ë¦¬ ë¬¸ë²•ì„ ì´ìš©í•˜ì—¬ ì¡°ê±´ì´ ìˆëŠ” ê²½ìš°ì—ë§Œ í•„í„°ë¥¼ ì ìš©í•˜ëŠ” ë°©ë²•ì„ ë°°ì› ìŠµë‹ˆë‹¤. ë‹¤ë£¨ëŠ” ì •ë³´ê°€ ë§ì•˜ê¸°ì— ì •ë³´ë¥¼ ë¹ ë¥´ê²Œ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ ì¿¼ë¦¬ë¥¼ ì§œê¸° ìœ„í•´ ë…¸ë ¥í–ˆìŠµë‹ˆë‹¤. ì´ ë¶€ë¶„ì—ì„œ ì‹œê°„ì´ ë§ì´ ì†Œìš”ë˜ì—ˆì§€ë§Œ, íŒ€ì›ë“¤ì˜ ë°°ë ¤ë¡œ ë¬¸ì˜ ë¶€ë¶„ì„ ë§¡ì•„ CRUD ê³¼ì •ë„ í•´ë³¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
- ê³„íšì„ ì„¸ìš°ê³  ì‹œì‘í–ˆì§€ë§Œ, ì˜ˆìƒì¹˜ ëª»í•œ ìƒí™©ê³¼ ì¶”ê°€ ìš”êµ¬ì‚¬í•­ìœ¼ë¡œ ì¸í•´ ì¼ì´ ê³„ì† ëŠ˜ì–´ë‚˜ë©´ì„œ, ê·¸ë•Œë§ˆë‹¤ íŒ€ì›ë“¤ê³¼ ì†Œí†µí•˜ë©° ì—­í• ì„ ë‚˜ëˆ„ì–´ ì¼ì„ ì‹ ì†í•˜ê²Œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ë°°ì› ìŠµë‹ˆë‹¤. í”„ë¡œì íŠ¸ ì´ˆë°˜ì—ëŠ” OpenAPIë¥¼ ì‚¬ìš©í•˜ë‹¤ê°€ ì •ë³´ ì²˜ë¦¬ ë¬¸ì œë¡œ ì¸í•´ ì •ë³´ë¥¼ DBì— ì €ì¥í•´ ì‚¬ìš©í•´ì•¼ í–ˆëŠ”ë°, ì´ì— ë”°ë¼ ì½”ë“œë¥¼ ìˆ˜ì •í•´ì•¼ í–ˆê³ , ì´ë¡œ ì¸í•´ ì¼ë¶€ ê¸°ëŠ¥ì„ í¬ê¸°í•˜ê³  ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ê°œì„ í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ì€ ì½”ë“œë“¤ë„ ì‹œê°„ì— ì«“ê²¨ ìˆ˜ì •í•˜ì§€ ëª»í•œ ê²ƒì´ ì•„ì‰¬ì› ìŠµë‹ˆë‹¤.
- í•™ì› ì°¾ê¸° í˜ì´ì§€ì—ì„œ ì „ì²´ ì´ˆê¸°í™” ë²„íŠ¼ì´ ìˆìœ¼ë©´ ì‚¬ìš©ìê°€ í¸í•˜ê²Œ ëª¨ë“  ì¡°ê±´ì„ ë¦¬ì…‹ í›„ ìƒˆë¡œìš´ ì¡°ê±´ì„ ë„£ì„ ìˆ˜ ìˆì–´ì„œ êµ¬í˜„í•˜ë ¤ í–ˆì§€ë§Œ, ì´ˆê¸°í™” í›„ ëª¨ë‹¬ì´ ì¼œì§€ë©´ ì´ì „ ê°’ì´ ë‚¨ì•„ìˆëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ê²ƒì„ í•´ê²°í•˜ë ¤ ì‹œê°„ì„ ì“°ê¸°ì—ëŠ” ë‹¤ë¥¸ ê¸°ëŠ¥ë“¤ì´ ë§ì´ ë‚¨ì•„ìˆì—ˆê¸°ì— ì¡°ê±´ë³„ ì´ˆê¸°í™” ë²„íŠ¼ë§Œ ë§Œë“¤ê³  ëª¨ë“  ì¡°ê±´ì„ ì´ˆê¸°í™”í•˜ëŠ” ë²„íŠ¼ì„ êµ¬í˜„í•˜ì§€ ëª»í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ ë¶€ë¶„ì€ í”„ë¡œì íŠ¸ê°€ ëë‚œ í›„ í˜¼ìì„œë¼ë„ ê°œì„ í•´ ë³´ë ¤ê³  í•©ë‹ˆë‹¤. ë˜ í•˜ë‚˜ ì•„ì‰¬ìš´ ì ì€ ê´€ì‹¬ í•™ì› í˜ì´ì§€ì—ì„œ ê´€ì‹¬ í•™ì› ëª©ë¡ì„ ê°€ì ¸ì˜¬ ë•Œ ë³¸ì¸ì˜ ê´€ì‹¬ í•™ì›ì„ ê°€ì ¸ì™€ì•¼ í–ˆëŠ”ë°, user_idë¥¼ ì¡°ê±´ìœ¼ë¡œ ì£¼ë©´ í•´ë‹¹ í•™ì›ì˜ ê´€ì‹¬ í•™ì› ìˆ˜ë¥¼ ì–»ì„ ìˆ˜ ì—†ì–´, like_tb í…Œì´ë¸”ì„ ì„œë¸Œì¿¼ë¦¬ë¡œ ì¡°ì¸í•˜ì—¬ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. ì´ ë°©ë²•ìœ¼ë¡œëŠ” ê°’ì€ ì˜ ë‚˜ì™”ì§€ë§Œ, ì—¬ëŸ¬ ë°©ë²•ì„ ì‹œë„í•´ ë³´ì§€ ëª»í•˜ê³  ì´ ë°©ë²•ë§Œ ì‚¬ìš©í•œ ê²ƒì´ ì•„ì‰¬ì› ìŠµë‹ˆë‹¤. ì´ ë¶€ë¶„ë„ í”„ë¡œì íŠ¸ê°€ ëë‚œ í›„ ë‹¤ë¥¸ ë°©ë²•ì„ ì°¾ì•„ë³´ê³  ê°œì„ í•´ ë³¼ ê³„íšì…ë‹ˆë‹¤.

<br/>

> **íŒ€ì›: ì´ì§€ìš°** 
-  í”„ë¡œì íŠ¸ê°€ ì‹œì‘í•˜ê¸°ì— ì•ì„œì„œ ë§ìœ¼ë©´ ë§ê³  ì ë‹¤ë©´ ì ì€ í”„ë¡œê·¸ë˜ë°ì„ ë°°ì› ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ì €ì˜ ì§€ì‹ìœ¼ë¡œ í”„ë¡œì íŠ¸ë¥¼ í•  ìˆ˜ ìˆì„ê¹Œ? íŒ€ì›ë“¤ì—ê²Œ í”¼í•´ë¥¼ ì£¼ì§€ëŠ” ì•Šì„ê¹Œ ê±±ì •í•˜ë©´ì„œ ì‹œì‘í•˜ì˜€ìŠµë‹ˆë‹¤. ì²˜ìŒì—ëŠ” ë­ê°€ ë¬´ì—‡ì¸ì§€ ì˜ ëª¨ë¥´ëŠ” ìƒíƒœë¡œ ì‹œì‘í•´ì„œ ë‹¹í™©ë„ í•˜ê³  í•˜ì˜€ì§€ë§Œ íŒ€ì¥ë‹˜ê³¼ íŒ€ì›ë¶„ë“¤ì˜ ë„ì›€ìœ¼ë¡œ ì ì  ì–´ë–»ê²Œ í•´ì•¼ í•˜ëŠ”ì§€ ê°ì´ ì¡í˜€ ì™”ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë©´ì„œ ë°°ì› ë˜ ê²ƒì€ ë”ìš± ìì„¸íˆ ì•Œê²Œ ë˜ì—ˆê³  ëª¨ë¥´ëŠ” ê²ƒì„ í•˜ë©´ì„œ ìƒˆë¡œìš´ ê²ƒë“¤ì„ í„°ë“í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ ê²°ê³¼ë¡œ ë§Œë“¤ì–´ì§„ í”„ë¡œì íŠ¸ëŠ” íŒ€ ì „ì²´ì˜ ë…¸ë ¥ ê²°ì •ì²´ë¡œ ë‹¤ê°€ì™”ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ëŸ¬í•œ ì„±ì·¨ì™€ ë§Œì¡±ê°ê³¼ ë”ë¶ˆì–´ í”¼ë¡œê°ë„ ëŠê¼ˆìŠµë‹ˆë‹¤. í”„ë¡œì íŠ¸ ê¸°ê°„ì˜ ì§‘ì¤‘ê³¼ ë…¸ë ¥ìœ¼ë¡œ ì¸í•´ ëª¸ê³¼ ë§ˆìŒì´ ì§€ì³¤ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. í–¥í›„ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ë¥¼ í•˜ê²Œ ë˜ë©´ ëª¸ê³¼ ë§ˆìŒì„ ì˜ ë‹¨ë ¨í•˜ê³  í•´ì•¼ê² ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. ë˜ í•œ í”„ë¡œì íŠ¸ë¥¼ ëŒì•„ë³´ë©´ì„œ ë¶€ì¡±í•œ ë¶€ë¶„ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. ì™„ë²½í•œ ê²°ê³¼ë¬¼ì„ ë§Œë“¤ ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì„ ê¹¨ë‹«ê²Œ ë˜ì—ˆê³ , ê·¸ê²ƒì„ í–¥í•œ ê°œì„ ì˜ ê¸°íšŒë¡œ ì—¬ê²¼ìŠµë‹ˆë‹¤. ë¯¸í¡í•œ ì ì„ ë³´ì™„í•˜ê³  ë°œì „í•˜ëŠ” ê³¼ì •ì´ ì§€ì†ì ì¸ í•™ìŠµê³¼ ì„±ì¥ì„ ê°€ì ¸ë‹¤ì¤„ ê²ƒì´ë¼ ìƒê°í–ˆìŠµë‹ˆë‹¤!! íŒ€ì¥ë‹˜ íŒ€ì›ë¶„ë“¤ ìµœê³ !!


<br/>

